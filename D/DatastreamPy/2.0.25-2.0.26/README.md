# Comparing `tmp/DatastreamPy-2.0.25-py3-none-any.whl.zip` & `tmp/DatastreamPy-2.0.26-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,13 +1,13 @@
-Zip file size: 51261 bytes, number of entries: 11
+Zip file size: 51265 bytes, number of entries: 11
 -rw-rw-rw-  2.0 fat    16190 b- defN 24-May-02 11:26 DatastreamPy/DSConnect.py
--rw-rw-rw-  2.0 fat    22949 b- defN 24-May-17 17:14 DatastreamPy/DSUserDataObjectBase.py
+-rw-rw-rw-  2.0 fat    22949 b- defN 24-May-21 09:05 DatastreamPy/DSUserDataObjectBase.py
 -rw-rw-rw-  2.0 fat     5633 b- defN 24-May-02 11:26 DatastreamPy/DS_Requests.py
--rw-rw-rw-  2.0 fat    27560 b- defN 24-May-17 17:06 DatastreamPy/DS_Response.py
+-rw-rw-rw-  2.0 fat    27575 b- defN 24-May-17 17:32 DatastreamPy/DS_Response.py
 -rw-rw-rw-  2.0 fat    60200 b- defN 24-May-02 11:26 DatastreamPy/DatastreamEconomicFilters.py
 -rw-rw-rw-  2.0 fat    52895 b- defN 24-May-02 11:26 DatastreamPy/DatastreamUserCreated_TimeSeries.py
 -rw-rw-rw-  2.0 fat     1041 b- defN 24-May-02 11:26 DatastreamPy/__init__.py
--rw-rw-rw-  2.0 fat    27395 b- defN 24-May-17 17:14 DatastreamPy-2.0.25.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 24-May-17 17:14 DatastreamPy-2.0.25.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       13 b- defN 24-May-17 17:14 DatastreamPy-2.0.25.dist-info/top_level.txt
--rw-rw-r--  2.0 fat      955 b- defN 24-May-17 17:14 DatastreamPy-2.0.25.dist-info/RECORD
-11 files, 214923 bytes uncompressed, 49643 bytes compressed:  76.9%
+-rw-rw-rw-  2.0 fat    27395 b- defN 24-May-21 09:12 DatastreamPy-2.0.26.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-May-21 09:12 DatastreamPy-2.0.26.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       13 b- defN 24-May-21 09:12 DatastreamPy-2.0.26.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat      955 b- defN 24-May-21 09:12 DatastreamPy-2.0.26.dist-info/RECORD
+11 files, 214938 bytes uncompressed, 49647 bytes compressed:  76.9%
```

## zipnote {}

```diff
@@ -15,20 +15,20 @@
 
 Filename: DatastreamPy/DatastreamUserCreated_TimeSeries.py
 Comment: 
 
 Filename: DatastreamPy/__init__.py
 Comment: 
 
-Filename: DatastreamPy-2.0.25.dist-info/METADATA
+Filename: DatastreamPy-2.0.26.dist-info/METADATA
 Comment: 
 
-Filename: DatastreamPy-2.0.25.dist-info/WHEEL
+Filename: DatastreamPy-2.0.26.dist-info/WHEEL
 Comment: 
 
-Filename: DatastreamPy-2.0.25.dist-info/top_level.txt
+Filename: DatastreamPy-2.0.26.dist-info/top_level.txt
 Comment: 
 
-Filename: DatastreamPy-2.0.25.dist-info/RECORD
+Filename: DatastreamPy-2.0.26.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## DatastreamPy/DSUserDataObjectBase.py

```diff
@@ -20,15 +20,15 @@
 from enum import IntEnum
 import pytz
 import json
 import re
 from datetime import datetime, timedelta, date
 
 class DSPackageInfo:
-    buildVer = '2.0.25'
+    buildVer = '2.0.26'
     appId = 'DatastreamPy-' + buildVer
     UserAgent = ' DatastreamPy/' + buildVer
 
 class DSUserObjectFault(Exception):
     """
     DSUserObjectFault exception is a representation of the DSFault error returned from the API server.
     DSFaults are returned for the following reasons:
```

## DatastreamPy/DS_Response.py

```diff
@@ -787,937 +787,938 @@
 00003120: 6461 7461 272c 2027 4578 6365 7074 696f  data', 'Exceptio
 00003130: 6e20 6f63 6375 7265 643a 272c 2065 7870  n occured:', exp
 00003140: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
 00003150: 6169 7365 2065 7870 0d0a 2020 2020 0d0a  aise exp..    ..
 00003160: 2020 2020 6465 6620 6765 745f 6275 6e64      def get_bund
 00003170: 6c65 5f64 6174 6128 7365 6c66 2c20 6275  le_data(self, bu
 00003180: 6e64 6c65 5265 7175 6573 743d 4e6f 6e65  ndleRequest=None
-00003190: 293a 0d0a 2020 2020 2020 2020 2222 2254  ):..        """T
-000031a0: 6869 7320 4675 6e63 7469 6f6e 2070 726f  his Function pro
-000031b0: 6365 7373 6573 2061 206d 756c 7469 706c  cesses a multipl
-000031c0: 6520 4a53 4f4e 2066 6f72 6d61 7420 6461  e JSON format da
-000031d0: 7461 2072 6571 7565 7374 7320 746f 2070  ta requests to p
-000031e0: 726f 7669 6465 0d0a 2020 2020 2020 2020  rovide..        
-000031f0: 2020 2064 6174 6120 7265 7370 6f6e 7365     data response
-00003200: 2066 726f 6d20 4453 5753 2077 6562 2069   from DSWS web i
-00003210: 6e20 7468 6520 666f 726d 206f 6620 7079  n the form of py
-00003220: 7468 6f6e 2044 6174 6166 7261 6d65 2e0d  thon Dataframe..
-00003230: 0a20 2020 2020 2020 2020 2020 5573 6520  .           Use 
-00003240: 706f 7374 5f75 7365 725f 7265 7175 6573  post_user_reques
-00003250: 7420 746f 2066 6f72 6d20 6561 6368 204a  t to form each J
-00003260: 534f 4e20 6461 7461 2072 6571 7565 7374  SON data request
-00003270: 2061 6e64 2061 7070 656e 6420 746f 2061   and append to a
-00003280: 204c 6973 740d 0a20 2020 2020 2020 2020   List..         
-00003290: 2020 746f 2070 6173 7320 7468 6520 6275    to pass the bu
-000032a0: 6e64 6c65 5265 7175 7365 742e 0d0a 2020  ndleRequset...  
-000032b0: 2020 2020 2020 2020 200d 0a20 2020 2020           ..     
-000032c0: 2020 2020 2020 2041 7267 733a 0d0a 2020         Args:..  
-000032d0: 2020 2020 2020 2020 2020 2020 2062 756e               bun
-000032e0: 646c 6552 6571 7565 7374 3a20 4c69 7374  dleRequest: List
-000032f0: 2c20 6578 7065 6374 7320 6c69 7374 206f  , expects list o
-00003300: 6620 4461 7461 7265 7175 6573 7473 200d  f Datarequests .
-00003310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003320: 7265 744e 616d 653a 2062 6f6f 6c2c 2064  retName: bool, d
-00003330: 6566 6175 6c74 2046 616c 7365 2c20 746f  efault False, to
-00003340: 2062 6520 7365 7420 746f 2054 7275 6520   be set to True 
-00003350: 6966 2074 6865 2049 6e73 7472 756d 656e  if the Instrumen
-00003360: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-00003370: 2020 2020 2020 2020 2020 2020 2020 6e61                na
-00003380: 6d65 7320 616e 6420 4461 7461 7479 7065  mes and Datatype
-00003390: 206e 616d 6573 2061 7265 2074 6f20 6265   names are to be
-000033a0: 2072 6574 7572 6e65 640d 0a0d 0a20 2020   returned....   
-000033b0: 2020 2020 2020 2020 2052 6574 7572 6e73           Returns
-000033c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000033d0: 2020 2020 2044 6174 6146 7261 6d65 2e22       DataFrame."
-000033e0: 2222 0d0a 0d0a 2020 2020 2020 2020 6765  ""....        ge
-000033f0: 7444 6174 6142 756e 646c 655f 7572 6c20  tDataBundle_url 
-00003400: 3d20 7365 6c66 2e75 726c 202b 2022 4765  = self.url + "Ge
-00003410: 7444 6174 6142 756e 646c 6522 0d0a 2020  tDataBundle"..  
-00003420: 2020 2020 2020 7261 775f 6461 7461 5265        raw_dataRe
-00003430: 7175 6573 7420 3d20 2222 0d0a 2020 2020  quest = ""..    
-00003440: 2020 2020 6a73 6f6e 5f64 6174 6152 6571      json_dataReq
-00003450: 7565 7374 203d 2022 220d 0a20 2020 2020  uest = ""..     
-00003460: 2020 206a 736f 6e5f 5265 7370 6f6e 7365     json_Response
-00003470: 203d 2022 220d 0a20 2020 2020 2020 0d0a   = ""..       ..
-00003480: 2020 2020 2020 2020 6966 2062 756e 646c          if bundl
-00003490: 6552 6571 7565 7374 203d 3d20 4e6f 6e65  eRequest == None
-000034a0: 3a0d 0a20 2020 2020 2020 2020 2020 2062  :..            b
-000034b0: 756e 646c 6552 6571 7565 7374 203d 205b  undleRequest = [
-000034c0: 5d0d 0a20 2020 2020 2020 200d 0a20 2020  ]..        ..   
-000034d0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-000034e0: 2020 2020 2020 2064 6174 6172 6571 7565         datareque
-000034f0: 7374 203d 2044 6174 6152 6571 7565 7374  st = DataRequest
-00003500: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00003510: 7365 6c66 2e43 6865 636b 5f54 6f6b 656e  self.Check_Token
-00003520: 2829 2023 2063 6865 636b 2061 6e64 2072  () # check and r
-00003530: 656e 6577 2074 6f6b 656e 2069 6620 7769  enew token if wi
-00003540: 7468 696e 2031 3520 6d69 6e75 7465 7320  thin 15 minutes 
-00003550: 6f66 2065 7870 6972 790d 0a20 2020 2020  of expiry..     
-00003560: 2020 2020 2020 2072 6177 5f64 6174 6152         raw_dataR
-00003570: 6571 7565 7374 203d 2064 6174 6172 6571  equest = datareq
-00003580: 7565 7374 2e67 6574 5f62 756e 646c 655f  uest.get_bundle_
-00003590: 5265 7175 6573 7428 6275 6e64 6c65 5265  Request(bundleRe
-000035a0: 7175 6573 742c 2073 656c 662e 746f 6b65  quest, self.toke
-000035b0: 6e29 0d0a 0d0a 2020 2020 2020 2020 2020  n)....          
-000035c0: 2020 6966 2028 7261 775f 6461 7461 5265    if (raw_dataRe
-000035d0: 7175 6573 7420 213d 2022 2229 3a0d 0a20  quest != ""):.. 
-000035e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000035f0: 6a73 6f6e 5f52 6573 706f 6e73 6520 3d20  json_Response = 
-00003600: 7365 6c66 2e5f 6765 745f 6a73 6f6e 5f52  self._get_json_R
-00003610: 6573 706f 6e73 6528 6765 7444 6174 6142  esponse(getDataB
-00003620: 756e 646c 655f 7572 6c2c 2072 6177 5f64  undle_url, raw_d
-00003630: 6174 6152 6571 7565 7374 290d 0a20 2020  ataRequest)..   
-00003640: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00003650: 2027 4461 7461 5265 7370 6f6e 7365 7327   'DataResponses'
-00003660: 2069 6e20 6a73 6f6e 5f52 6573 706f 6e73   in json_Respons
-00003670: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00003680: 2020 2020 2020 2020 2069 6620 7265 744e           if retN
-00003690: 616d 653a 0d0a 2020 2020 2020 2020 2020  ame:..          
-000036a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000036b0: 656c 662e 5f67 6574 5f6d 6574 6164 6174  elf._get_metadat
-000036c0: 615f 6275 6e64 6c65 286a 736f 6e5f 5265  a_bundle(json_Re
-000036d0: 7370 6f6e 7365 5b27 4461 7461 5265 7370  sponse['DataResp
-000036e0: 6f6e 7365 7327 5d29 0d0a 2020 2020 2020  onses'])..      
-000036f0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00003700: 6573 706f 6e73 655f 6461 7461 6672 616d  esponse_datafram
-00003710: 6520 3d20 7365 6c66 2e5f 666f 726d 6174  e = self._format
-00003720: 5f62 756e 646c 655f 7265 7370 6f6e 7365  _bundle_response
-00003730: 286a 736f 6e5f 5265 7370 6f6e 7365 290d  (json_Response).
-00003740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003750: 2020 2020 2020 7265 7475 726e 2072 6573        return res
-00003760: 706f 6e73 655f 6461 7461 6672 616d 650d  ponse_dataframe.
-00003770: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003780: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00003790: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000037a0: 274d 6573 7361 6765 2720 696e 206a 736f  'Message' in jso
-000037b0: 6e5f 5265 7370 6f6e 7365 3a0d 0a20 2020  n_Response:..   
-000037c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000037d0: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
-000037e0: 7469 6f6e 286a 736f 6e5f 5265 7370 6f6e  tion(json_Respon
-000037f0: 7365 5b27 4d65 7373 6167 6527 5d29 0d0a  se['Message'])..
-00003800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003810: 2020 2020 7265 7475 726e 204e 6f6e 650d      return None.
-00003820: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00003830: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00003840: 2020 2020 7265 7475 726e 204e 6f6e 650d      return None.
-00003850: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
-00003860: 4578 6365 7074 696f 6e20 6173 2065 7870  Exception as exp
-00003870: 3a0d 0a20 2020 2020 2020 2020 2020 2044  :..            D
-00003880: 5355 7365 724f 626a 6563 744c 6f67 4675  SUserObjectLogFu
-00003890: 6e63 732e 4c6f 6745 7863 6570 7469 6f6e  ncs.LogException
-000038a0: 2827 4461 7461 7374 7265 616d 5079 272c  ('DatastreamPy',
-000038b0: 2027 4453 5265 7370 6f6e 7365 2e67 6574   'DSResponse.get
-000038c0: 5f62 756e 646c 655f 6461 7461 272c 2027  _bundle_data', '
-000038d0: 4578 6365 7074 696f 6e20 6f63 6375 7265  Exception occure
-000038e0: 643a 272c 2065 7870 290d 0a20 2020 2020  d:', exp)..     
-000038f0: 2020 2020 2020 2072 6169 7365 2065 7870         raise exp
-00003900: 0d0a 2020 2020 0d0a 232d 2d2d 2d2d 2d2d  ..    ..#-------
-00003910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003190: 2c20 7265 744e 616d 653d 4661 6c73 6529  , retName=False)
+000031a0: 3a0d 0a20 2020 2020 2020 2022 2222 5468  :..        """Th
+000031b0: 6973 2046 756e 6374 696f 6e20 7072 6f63  is Function proc
+000031c0: 6573 7365 7320 6120 6d75 6c74 6970 6c65  esses a multiple
+000031d0: 204a 534f 4e20 666f 726d 6174 2064 6174   JSON format dat
+000031e0: 6120 7265 7175 6573 7473 2074 6f20 7072  a requests to pr
+000031f0: 6f76 6964 650d 0a20 2020 2020 2020 2020  ovide..         
+00003200: 2020 6461 7461 2072 6573 706f 6e73 6520    data response 
+00003210: 6672 6f6d 2044 5357 5320 7765 6220 696e  from DSWS web in
+00003220: 2074 6865 2066 6f72 6d20 6f66 2070 7974   the form of pyt
+00003230: 686f 6e20 4461 7461 6672 616d 652e 0d0a  hon Dataframe...
+00003240: 2020 2020 2020 2020 2020 2055 7365 2070             Use p
+00003250: 6f73 745f 7573 6572 5f72 6571 7565 7374  ost_user_request
+00003260: 2074 6f20 666f 726d 2065 6163 6820 4a53   to form each JS
+00003270: 4f4e 2064 6174 6120 7265 7175 6573 7420  ON data request 
+00003280: 616e 6420 6170 7065 6e64 2074 6f20 6120  and append to a 
+00003290: 4c69 7374 0d0a 2020 2020 2020 2020 2020  List..          
+000032a0: 2074 6f20 7061 7373 2074 6865 2062 756e   to pass the bun
+000032b0: 646c 6552 6571 7573 6574 2e0d 0a20 2020  dleRequset...   
+000032c0: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
+000032d0: 2020 2020 2020 4172 6773 3a0d 0a20 2020        Args:..   
+000032e0: 2020 2020 2020 2020 2020 2020 6275 6e64              bund
+000032f0: 6c65 5265 7175 6573 743a 204c 6973 742c  leRequest: List,
+00003300: 2065 7870 6563 7473 206c 6973 7420 6f66   expects list of
+00003310: 2044 6174 6172 6571 7565 7374 7320 0d0a   Datarequests ..
+00003320: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00003330: 6574 4e61 6d65 3a20 626f 6f6c 2c20 6465  etName: bool, de
+00003340: 6661 756c 7420 4661 6c73 652c 2074 6f20  fault False, to 
+00003350: 6265 2073 6574 2074 6f20 5472 7565 2069  be set to True i
+00003360: 6620 7468 6520 496e 7374 7275 6d65 6e74  f the Instrument
+00003370: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00003380: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+00003390: 6573 2061 6e64 2044 6174 6174 7970 6520  es and Datatype 
+000033a0: 6e61 6d65 7320 6172 6520 746f 2062 6520  names are to be 
+000033b0: 7265 7475 726e 6564 0d0a 0d0a 2020 2020  returned....    
+000033c0: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+000033d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000033e0: 2020 2020 4461 7461 4672 616d 652e 2222      DataFrame.""
+000033f0: 220d 0a0d 0a20 2020 2020 2020 2067 6574  "....        get
+00003400: 4461 7461 4275 6e64 6c65 5f75 726c 203d  DataBundle_url =
+00003410: 2073 656c 662e 7572 6c20 2b20 2247 6574   self.url + "Get
+00003420: 4461 7461 4275 6e64 6c65 220d 0a20 2020  DataBundle"..   
+00003430: 2020 2020 2072 6177 5f64 6174 6152 6571       raw_dataReq
+00003440: 7565 7374 203d 2022 220d 0a20 2020 2020  uest = ""..     
+00003450: 2020 206a 736f 6e5f 6461 7461 5265 7175     json_dataRequ
+00003460: 6573 7420 3d20 2222 0d0a 2020 2020 2020  est = ""..      
+00003470: 2020 6a73 6f6e 5f52 6573 706f 6e73 6520    json_Response 
+00003480: 3d20 2222 0d0a 2020 2020 2020 200d 0a20  = ""..       .. 
+00003490: 2020 2020 2020 2069 6620 6275 6e64 6c65         if bundle
+000034a0: 5265 7175 6573 7420 3d3d 204e 6f6e 653a  Request == None:
+000034b0: 0d0a 2020 2020 2020 2020 2020 2020 6275  ..            bu
+000034c0: 6e64 6c65 5265 7175 6573 7420 3d20 5b5d  ndleRequest = []
+000034d0: 0d0a 2020 2020 2020 2020 0d0a 2020 2020  ..        ..    
+000034e0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+000034f0: 2020 2020 2020 6461 7461 7265 7175 6573        datareques
+00003500: 7420 3d20 4461 7461 5265 7175 6573 7428  t = DataRequest(
+00003510: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00003520: 656c 662e 4368 6563 6b5f 546f 6b65 6e28  elf.Check_Token(
+00003530: 2920 2320 6368 6563 6b20 616e 6420 7265  ) # check and re
+00003540: 6e65 7720 746f 6b65 6e20 6966 2077 6974  new token if wit
+00003550: 6869 6e20 3135 206d 696e 7574 6573 206f  hin 15 minutes o
+00003560: 6620 6578 7069 7279 0d0a 2020 2020 2020  f expiry..      
+00003570: 2020 2020 2020 7261 775f 6461 7461 5265        raw_dataRe
+00003580: 7175 6573 7420 3d20 6461 7461 7265 7175  quest = datarequ
+00003590: 6573 742e 6765 745f 6275 6e64 6c65 5f52  est.get_bundle_R
+000035a0: 6571 7565 7374 2862 756e 646c 6552 6571  equest(bundleReq
+000035b0: 7565 7374 2c20 7365 6c66 2e74 6f6b 656e  uest, self.token
+000035c0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+000035d0: 2069 6620 2872 6177 5f64 6174 6152 6571   if (raw_dataReq
+000035e0: 7565 7374 2021 3d20 2222 293a 0d0a 2020  uest != ""):..  
+000035f0: 2020 2020 2020 2020 2020 2020 2020 206a                 j
+00003600: 736f 6e5f 5265 7370 6f6e 7365 203d 2073  son_Response = s
+00003610: 656c 662e 5f67 6574 5f6a 736f 6e5f 5265  elf._get_json_Re
+00003620: 7370 6f6e 7365 2867 6574 4461 7461 4275  sponse(getDataBu
+00003630: 6e64 6c65 5f75 726c 2c20 7261 775f 6461  ndle_url, raw_da
+00003640: 7461 5265 7175 6573 7429 0d0a 2020 2020  taRequest)..    
+00003650: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00003660: 2744 6174 6152 6573 706f 6e73 6573 2720  'DataResponses' 
+00003670: 696e 206a 736f 6e5f 5265 7370 6f6e 7365  in json_Response
+00003680: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00003690: 2020 2020 2020 2020 6966 2072 6574 4e61          if retNa
+000036a0: 6d65 3a0d 0a20 2020 2020 2020 2020 2020  me:..           
+000036b0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000036c0: 6c66 2e5f 6765 745f 6d65 7461 6461 7461  lf._get_metadata
+000036d0: 5f62 756e 646c 6528 6a73 6f6e 5f52 6573  _bundle(json_Res
+000036e0: 706f 6e73 655b 2744 6174 6152 6573 706f  ponse['DataRespo
+000036f0: 6e73 6573 275d 290d 0a20 2020 2020 2020  nses'])..       
+00003700: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00003710: 7370 6f6e 7365 5f64 6174 6166 7261 6d65  sponse_dataframe
+00003720: 203d 2073 656c 662e 5f66 6f72 6d61 745f   = self._format_
+00003730: 6275 6e64 6c65 5f72 6573 706f 6e73 6528  bundle_response(
+00003740: 6a73 6f6e 5f52 6573 706f 6e73 6529 0d0a  json_Response)..
+00003750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003760: 2020 2020 2072 6574 7572 6e20 7265 7370       return resp
+00003770: 6f6e 7365 5f64 6174 6166 7261 6d65 0d0a  onse_dataframe..
+00003780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003790: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+000037a0: 2020 2020 2020 2020 2020 2020 6966 2027              if '
+000037b0: 4d65 7373 6167 6527 2069 6e20 6a73 6f6e  Message' in json
+000037c0: 5f52 6573 706f 6e73 653a 0d0a 2020 2020  _Response:..    
+000037d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000037e0: 2020 2020 7261 6973 6520 4578 6365 7074      raise Except
+000037f0: 696f 6e28 6a73 6f6e 5f52 6573 706f 6e73  ion(json_Respons
+00003800: 655b 274d 6573 7361 6765 275d 290d 0a20  e['Message']).. 
+00003810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003820: 2020 2072 6574 7572 6e20 4e6f 6e65 0d0a     return None..
+00003830: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00003840: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00003850: 2020 2072 6574 7572 6e20 4e6f 6e65 0d0a     return None..
+00003860: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+00003870: 7863 6570 7469 6f6e 2061 7320 6578 703a  xception as exp:
+00003880: 0d0a 2020 2020 2020 2020 2020 2020 4453  ..            DS
+00003890: 5573 6572 4f62 6a65 6374 4c6f 6746 756e  UserObjectLogFun
+000038a0: 6373 2e4c 6f67 4578 6365 7074 696f 6e28  cs.LogException(
+000038b0: 2744 6174 6173 7472 6561 6d50 7927 2c20  'DatastreamPy', 
+000038c0: 2744 5352 6573 706f 6e73 652e 6765 745f  'DSResponse.get_
+000038d0: 6275 6e64 6c65 5f64 6174 6127 2c20 2745  bundle_data', 'E
+000038e0: 7863 6570 7469 6f6e 206f 6363 7572 6564  xception occured
+000038f0: 3a27 2c20 6578 7029 0d0a 2020 2020 2020  :', exp)..      
+00003900: 2020 2020 2020 7261 6973 6520 6578 700d        raise exp.
+00003910: 0a20 2020 200d 0a23 2d2d 2d2d 2d2d 2d2d  .    ..#--------
 00003920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00003930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003940: 200d 0a23 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ..#------------
-00003950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d20  --------------- 
+00003950: 0d0a 232d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ..#-------------
 00003960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d20 2020 2020  -----------     
-00003980: 2020 2020 2020 2020 0d0a 232d 2d2d 2d2d          ..#-----
-00003990: 2d2d 4865 6c70 6572 2046 756e 6374 696f  --Helper Functio
-000039a0: 6e73 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ns--------------
-000039b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003980: 2d2d 2d2d 2d2d 2d2d 2d2d 2020 2020 2020  ----------      
+00003990: 2020 2020 2020 200d 0a23 2d2d 2d2d 2d2d         ..#------
+000039a0: 2d48 656c 7065 7220 4675 6e63 7469 6f6e  -Helper Function
+000039b0: 732d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  s---------------
 000039c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000039d0: 2d2d 2d2d 2d0d 0a20 2020 2064 6566 205f  -----..    def _
-000039e0: 6765 745f 5265 7370 6f6e 7365 2873 656c  get_Response(sel
-000039f0: 662c 2072 6571 5572 6c2c 2072 6177 5f72  f, reqUrl, raw_r
-00003a00: 6571 7565 7374 293a 0d0a 2020 2020 2020  equest):..      
-00003a10: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-00003a20: 2020 2020 2363 6f6e 7665 7274 2072 6177      #convert raw
-00003a30: 2072 6571 7565 7374 2074 6f20 6a73 6f6e   request to json
-00003a40: 2066 6f72 6d61 7420 6265 666f 7265 2070   format before p
-00003a50: 6f73 740d 0a20 2020 2020 2020 2020 2020  ost..           
-00003a60: 206a 736f 6e52 6571 7565 7374 203d 2073   jsonRequest = s
-00003a70: 656c 662e 5f6a 736f 6e5f 5265 7175 6573  elf._json_Reques
-00003a80: 7428 7261 775f 7265 7175 6573 7429 0d0a  t(raw_request)..
-00003a90: 2020 2020 2020 2020 2020 2020 0d0a 2020              ..  
-00003aa0: 2020 2020 2020 2020 2020 6874 7470 5f52            http_R
-00003ab0: 6573 706f 6e73 6520 3d20 7365 6c66 2e5f  esponse = self._
-00003ac0: 7265 7153 6573 7369 6f6e 2e70 6f73 7428  reqSession.post(
-00003ad0: 7265 7155 726c 2c20 6a73 6f6e 3d6a 736f  reqUrl, json=jso
-00003ae0: 6e52 6571 7565 7374 2c20 2070 726f 7869  nRequest,  proxi
-00003af0: 6573 3d73 656c 662e 5f70 726f 7869 6573  es=self._proxies
-00003b00: 2c20 7665 7269 6679 203d 2073 656c 662e  , verify = self.
-00003b10: 5f63 6572 7466 696c 6573 2c20 6365 7274  _certfiles, cert
-00003b20: 203d 2073 656c 662e 5f73 736c 4365 7274   = self._sslCert
-00003b30: 2c20 7469 6d65 6f75 743d 2073 656c 662e  , timeout= self.
-00003b40: 5f74 696d 656f 7574 290d 0a20 2020 2020  _timeout)..     
-00003b50: 2020 2020 2020 2072 6574 7572 6e20 6874         return ht
-00003b60: 7470 5f52 6573 706f 6e73 650d 0a20 2020  tp_Response..   
-00003b70: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00003b80: 7074 696f 6e20 6173 2065 7870 3a0d 0a20  ption as exp:.. 
-00003b90: 2020 2020 2020 2020 2020 2044 5355 7365             DSUse
-00003ba0: 724f 626a 6563 744c 6f67 4675 6e63 732e  rObjectLogFuncs.
-00003bb0: 4c6f 6745 7863 6570 7469 6f6e 2827 4461  LogException('Da
-00003bc0: 7461 7374 7265 616d 5079 272c 2027 4453  tastreamPy', 'DS
-00003bd0: 5265 7370 6f6e 7365 2e67 6574 5f52 6573  Response.get_Res
-00003be0: 706f 6e73 6527 2c20 2745 7863 6570 7469  ponse', 'Excepti
-00003bf0: 6f6e 206f 6363 7572 6564 3a27 2c20 6578  on occured:', ex
-00003c00: 7029 0d0a 2020 2020 2020 2020 2020 2020  p)..            
-00003c10: 7261 6973 6520 6578 700d 0a0d 0a20 2020  raise exp....   
-00003c20: 2020 2020 200d 0a20 2020 2064 6566 205f       ..    def _
-00003c30: 6765 745f 6a73 6f6e 5f52 6573 706f 6e73  get_json_Respons
-00003c40: 6528 7365 6c66 2c20 7265 7155 726c 2c20  e(self, reqUrl, 
-00003c50: 7261 775f 7265 7175 6573 7429 3a0d 0a20  raw_request):.. 
-00003c60: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00003c70: 2020 2020 2020 2068 7474 7052 6573 706f         httpRespo
-00003c80: 6e73 6520 3d20 7365 6c66 2e5f 6765 745f  nse = self._get_
-00003c90: 5265 7370 6f6e 7365 2872 6571 5572 6c2c  Response(reqUrl,
-00003ca0: 2072 6177 5f72 6571 7565 7374 290d 0a20   raw_request).. 
-00003cb0: 2020 2020 2020 2020 2023 2063 6865 636b           # check
-00003cc0: 2074 6865 2072 6573 706f 6e73 650d 0a20   the response.. 
-00003cd0: 2020 2020 2020 2020 2069 6620 6874 7470           if http
-00003ce0: 5265 7370 6f6e 7365 2e6f 6b3a 0d0a 2020  Response.ok:..  
-00003cf0: 2020 2020 2020 2020 2020 2020 6a73 6f6e              json
-00003d00: 5f52 6573 706f 6e73 6520 3d20 6469 6374  _Response = dict
-00003d10: 2868 7474 7052 6573 706f 6e73 652e 6a73  (httpResponse.js
-00003d20: 6f6e 2829 290d 0a20 2020 2020 2020 2020  on())..         
-00003d30: 2020 2020 2072 6574 7572 6e20 6a73 6f6e       return json
-00003d40: 5f52 6573 706f 6e73 650d 0a20 2020 2020  _Response..     
-00003d50: 2020 2020 2065 6c69 6620 6874 7470 5265       elif httpRe
-00003d60: 7370 6f6e 7365 2e73 7461 7475 735f 636f  sponse.status_co
-00003d70: 6465 203d 3d20 3430 3020 6f72 2068 7474  de == 400 or htt
-00003d80: 7052 6573 706f 6e73 652e 7374 6174 7573  pResponse.status
-00003d90: 5f63 6f64 6520 3d3d 2034 3033 3a0d 0a20  _code == 403:.. 
-00003da0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00003db0: 2070 6f73 7369 626c 6520 4453 4661 756c   possible DSFaul
-00003dc0: 7420 6578 6365 7074 696f 6e20 7265 7475  t exception retu
-00003dd0: 726e 6564 2064 7565 2074 6f20 7065 726d  rned due to perm
-00003de0: 6973 7369 6f6e 732c 2065 7463 0d0a 2020  issions, etc..  
-00003df0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00003e00: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00003e10: 2020 2020 2020 2020 7472 794a 736f 6e20          tryJson 
-00003e20: 3d20 6a73 6f6e 2e6c 6f61 6473 2868 7474  = json.loads(htt
-00003e30: 7052 6573 706f 6e73 652e 7465 7874 290d  pResponse.text).
-00003e40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003e50: 2020 2020 2069 6620 274d 6573 7361 6765       if 'Message
-00003e60: 2720 696e 2074 7279 4a73 6f6e 2e6b 6579  ' in tryJson.key
-00003e70: 7328 2920 616e 6420 2743 6f64 6527 2069  s() and 'Code' i
-00003e80: 6e20 7472 794a 736f 6e2e 6b65 7973 2829  n tryJson.keys()
-00003e90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00003ea0: 2020 2020 2020 2020 2020 2066 6175 6c74             fault
-00003eb0: 4469 6374 203d 2064 6963 7428 7472 794a  Dict = dict(tryJ
-00003ec0: 736f 6e29 0d0a 2020 2020 2020 2020 2020  son)..          
-00003ed0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00003ee0: 6973 6520 4453 5573 6572 4f62 6a65 6374  ise DSUserObject
-00003ef0: 4661 756c 7428 6661 756c 7444 6963 7429  Fault(faultDict)
-00003f00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00003f10: 2020 6578 6365 7074 206a 736f 6e2e 4a53    except json.JS
-00003f20: 4f4e 4465 636f 6465 4572 726f 7220 6173  ONDecodeError as
-00003f30: 206a 6465 636f 6465 6572 723a 0d0a 2020   jdecodeerr:..  
-00003f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003f50: 2020 7061 7373 0d0a 2020 2020 2020 2020    pass..        
-00003f60: 2020 2320 756e 6578 7065 6374 6564 2072    # unexpected r
-00003f70: 6573 706f 6e73 6520 736f 2072 6169 7365  esponse so raise
-00003f80: 2061 7320 616e 2065 7272 6f72 0d0a 2020   as an error..  
-00003f90: 2020 2020 2020 2020 6874 7470 5265 7370          httpResp
-00003fa0: 6f6e 7365 2e72 6169 7365 5f66 6f72 5f73  onse.raise_for_s
-00003fb0: 7461 7475 7328 290d 0a20 2020 2020 2020  tatus()..       
-00003fc0: 2065 7863 6570 7420 6a73 6f6e 2e4a 534f   except json.JSO
-00003fd0: 4e44 6563 6f64 6545 7272 6f72 2061 7320  NDecodeError as 
-00003fe0: 6a64 6563 6f64 6565 7272 3a0d 0a20 2020  jdecodeerr:..   
-00003ff0: 2020 2020 2020 2020 2044 5355 7365 724f           DSUserO
-00004000: 626a 6563 744c 6f67 4675 6e63 732e 4c6f  bjectLogFuncs.Lo
-00004010: 6745 7863 6570 7469 6f6e 2827 4461 7461  gException('Data
-00004020: 7374 7265 616d 5079 272c 2027 4453 5265  streamPy', 'DSRe
-00004030: 7370 6f6e 7365 2e67 6574 5f6a 736f 6e5f  sponse.get_json_
-00004040: 5265 7370 6f6e 7365 272c 2027 4a53 4f4e  Response', 'JSON
-00004050: 2064 6563 6f64 6572 2045 7863 6570 7469   decoder Excepti
-00004060: 6f6e 206f 6363 7572 6564 3a27 2c20 6a64  on occured:', jd
-00004070: 6563 6f64 6565 7272 290d 0a20 2020 2020  ecodeerr)..     
-00004080: 2020 2020 2020 2072 6169 7365 0d0a 2020         raise..  
-00004090: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-000040a0: 6570 7469 6f6e 2061 7320 6578 703a 0d0a  eption as exp:..
-000040b0: 2020 2020 2020 2020 2020 2020 4453 5573              DSUs
-000040c0: 6572 4f62 6a65 6374 4c6f 6746 756e 6373  erObjectLogFuncs
-000040d0: 2e4c 6f67 4578 6365 7074 696f 6e28 2744  .LogException('D
-000040e0: 6174 6173 7472 6561 6d50 7927 2c20 2744  atastreamPy', 'D
-000040f0: 5352 6573 706f 6e73 652e 6765 745f 6a73  SResponse.get_js
-00004100: 6f6e 5f52 6573 706f 6e73 6527 2c20 2745  on_Response', 'E
-00004110: 7863 6570 7469 6f6e 206f 6363 7572 6564  xception occured
-00004120: 3a27 2c20 6578 7029 0d0a 2020 2020 2020  :', exp)..      
-00004130: 2020 2020 2020 7261 6973 650d 0a20 2020        raise..   
-00004140: 200d 0a20 2020 2064 6566 205f 6765 745f   ..    def _get_
-00004150: 746f 6b65 6e28 7365 6c66 2c20 6973 5072  token(self, isPr
-00004160: 6f78 793d 4661 6c73 6529 3a0d 0a20 2020  oxy=False):..   
-00004170: 2020 2020 2074 6f6b 656e 5f75 726c 203d       token_url =
-00004180: 2073 656c 662e 7572 6c20 2b20 2247 6574   self.url + "Get
-00004190: 546f 6b65 6e22 0d0a 2020 2020 2020 2020  Token"..        
-000041a0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-000041b0: 2020 7072 6f70 7469 6573 203d 205b 5d0d    propties = [].
-000041c0: 0a20 2020 2020 2020 2020 2020 2070 726f  .            pro
-000041d0: 7074 6965 732e 6170 7065 6e64 2850 726f  pties.append(Pro
-000041e0: 7065 7274 6965 7328 225f 5f41 7070 4964  perties("__AppId
-000041f0: 222c 2044 5350 6163 6b61 6765 496e 666f  ", DSPackageInfo
-00004200: 2e61 7070 4964 2929 0d0a 2020 2020 2020  .appId))..      
-00004210: 2020 2020 2020 7072 6f70 7469 6573 2e61        propties.a
-00004220: 7070 656e 6428 5072 6f70 6572 7469 6573  ppend(Properties
-00004230: 2822 5265 7475 726e 4f70 7469 6f6e 7322  ("ReturnOptions"
-00004240: 2c20 224e 6176 6967 6174 6f72 5365 7269  , "NavigatorSeri
-00004250: 6573 2c4e 6176 6967 6174 6f72 4461 7461  es,NavigatorData
-00004260: 7479 7065 7322 2929 0d0a 0d0a 2020 2020  types"))....    
-00004270: 2020 2020 2020 2020 746f 6b65 6e52 6571          tokenReq
-00004280: 203d 2054 6f6b 656e 5265 7175 6573 7428   = TokenRequest(
-00004290: 7365 6c66 2e75 7365 726e 616d 652c 2073  self.username, s
-000042a0: 656c 662e 7061 7373 776f 7264 2c20 7072  elf.password, pr
-000042b0: 6f70 7469 6573 290d 0a20 2020 2020 2020  opties)..       
-000042c0: 2020 2020 2072 6177 5f74 6f6b 656e 5265       raw_tokenRe
-000042d0: 7120 3d20 746f 6b65 6e52 6571 2e67 6574  q = tokenReq.get
-000042e0: 5f54 6f6b 656e 5265 7175 6573 7428 290d  _TokenRequest().
-000042f0: 0a20 2020 2020 2020 2020 2020 200d 0a20  .            .. 
-00004300: 2020 2020 2020 2020 2020 2023 506f 7374             #Post
-00004310: 2074 6865 2074 6f6b 656e 2072 6571 7565   the token reque
-00004320: 7374 2074 6f20 6765 7420 7265 7370 6f6e  st to get respon
-00004330: 7365 2069 6e20 6a73 6f6e 2066 6f72 6d61  se in json forma
-00004340: 740d 0a20 2020 2020 2020 2020 2020 206a  t..            j
-00004350: 736f 6e5f 5265 7370 6f6e 7365 203d 2073  son_Response = s
-00004360: 656c 662e 5f67 6574 5f6a 736f 6e5f 5265  elf._get_json_Re
-00004370: 7370 6f6e 7365 2874 6f6b 656e 5f75 726c  sponse(token_url
-00004380: 2c20 7261 775f 746f 6b65 6e52 6571 290d  , raw_tokenReq).
-00004390: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000043a0: 662e 746f 6b65 6e45 7870 6972 7920 3d20  f.tokenExpiry = 
-000043b0: 7365 6c66 2e6a 736f 6e44 6174 6554 696d  self.jsonDateTim
-000043c0: 655f 746f 5f64 6174 6574 696d 6528 6a73  e_to_datetime(js
-000043d0: 6f6e 5f52 6573 706f 6e73 655b 2754 6f6b  on_Response['Tok
-000043e0: 656e 4578 7069 7279 275d 290d 0a20 2020  enExpiry'])..   
-000043f0: 2020 2020 2020 2020 2073 656c 662e 746f           self.to
-00004400: 6b65 6e20 3d20 6a73 6f6e 5f52 6573 706f  ken = json_Respo
-00004410: 6e73 655b 2754 6f6b 656e 5661 6c75 6527  nse['TokenValue'
-00004420: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
-00004430: 2023 2043 6865 636b 2074 6865 2050 726f   # Check the Pro
-00004440: 7065 7274 6965 7320 636f 6c6c 6563 7469  perties collecti
-00004450: 6f6e 2066 6f72 2074 6865 2075 726c 7320  on for the urls 
-00004460: 7468 6174 2073 7065 6369 6679 2077 6865  that specify whe
-00004470: 7265 2074 6f20 6272 6f77 7365 2066 6f72  re to browse for
-00004480: 2044 6174 6173 7472 6561 6d20 4e61 7669   Datastream Navi
-00004490: 6761 746f 720d 0a20 2020 2020 2020 2020  gator..         
-000044a0: 2020 2069 6620 6a73 6f6e 5f52 6573 706f     if json_Respo
-000044b0: 6e73 655b 2750 726f 7065 7274 6965 7327  nse['Properties'
-000044c0: 5d20 616e 6420 6c65 6e28 6a73 6f6e 5f52  ] and len(json_R
-000044d0: 6573 706f 6e73 655b 2750 726f 7065 7274  esponse['Propert
-000044e0: 6965 7327 5d29 203e 2030 3a0d 0a20 2020  ies']) > 0:..   
-000044f0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00004500: 2070 726f 7020 696e 206a 736f 6e5f 5265   prop in json_Re
-00004510: 7370 6f6e 7365 5b27 5072 6f70 6572 7469  sponse['Properti
-00004520: 6573 275d 3a0d 0a20 2020 2020 2020 2020  es']:..         
-00004530: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00004540: 696e 7374 616e 6365 2870 726f 705b 274b  instance(prop['K
-00004550: 6579 275d 2c20 7374 7229 2061 6e64 2070  ey'], str) and p
-00004560: 726f 705b 274b 6579 275d 2e6c 6f77 6572  rop['Key'].lower
-00004570: 2829 203d 3d20 276e 6176 6967 6174 6f72  () == 'navigator
-00004580: 7365 7269 6573 273a 0d0a 2020 2020 2020  series':..      
-00004590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000045a0: 2020 7365 6c66 2e6e 6176 6967 6174 6f72    self.navigator
-000045b0: 5365 7269 6573 5572 6c20 3d20 7072 6f70  SeriesUrl = prop
-000045c0: 5b27 5661 6c75 6527 5d20 2320 5468 6520  ['Value'] # The 
-000045d0: 7572 6c20 746f 2062 726f 7773 6520 616e  url to browse an
-000045e0: 6420 7365 6172 6368 2044 6174 6173 7472  d search Datastr
-000045f0: 6561 6d20 4e61 7669 6761 746f 7220 666f  eam Navigator fo
-00004600: 7220 7370 6563 6966 6963 2069 6e73 7472  r specific instr
-00004610: 756d 656e 7473 0d0a 2020 2020 2020 2020  uments..        
-00004620: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00004630: 2069 7369 6e73 7461 6e63 6528 7072 6f70   isinstance(prop
-00004640: 5b27 4b65 7927 5d2c 2073 7472 2920 616e  ['Key'], str) an
-00004650: 6420 7072 6f70 5b27 4b65 7927 5d2e 6c6f  d prop['Key'].lo
-00004660: 7765 7228 2920 3d3d 2027 6e61 7669 6761  wer() == 'naviga
-00004670: 746f 7264 6174 6174 7970 6573 273a 0d0a  tordatatypes':..
-00004680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004690: 2020 2020 2020 2020 7365 6c66 2e6e 6176          self.nav
-000046a0: 6967 6174 6f72 4461 7461 7479 7065 7355  igatorDatatypesU
-000046b0: 726c 203d 2070 726f 705b 2756 616c 7565  rl = prop['Value
-000046c0: 275d 2023 2054 6865 2075 726c 2074 6f20  '] # The url to 
-000046d0: 6272 6f77 7365 2061 6e64 2073 6561 7263  browse and searc
-000046e0: 6820 4461 7461 7374 7265 616d 204e 6176  h Datastream Nav
-000046f0: 6967 6174 6f72 2066 6f72 2073 7065 6369  igator for speci
-00004700: 6669 6320 6461 7461 7479 7065 730d 0a20  fic datatypes.. 
-00004710: 2020 2020 2020 2020 2020 200d 0a20 2020             ..   
-00004720: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00004730: 7074 696f 6e20 6173 2065 7870 3a0d 0a20  ption as exp:.. 
-00004740: 2020 2020 2020 2020 2020 2044 5355 7365             DSUse
-00004750: 724f 626a 6563 744c 6f67 4675 6e63 732e  rObjectLogFuncs.
-00004760: 4c6f 6745 7863 6570 7469 6f6e 2827 4461  LogException('Da
-00004770: 7461 7374 7265 616d 5079 272c 2027 4453  tastreamPy', 'DS
-00004780: 5265 7370 6f6e 7365 2e67 6574 5f74 6f6b  Response.get_tok
-00004790: 656e 272c 2027 4578 6365 7074 696f 6e20  en', 'Exception 
-000047a0: 6f63 6375 7265 643a 272c 2065 7870 290d  occured:', exp).
-000047b0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-000047c0: 7365 2065 7870 0d0a 0d0a 2020 2020 6465  se exp....    de
-000047d0: 6620 4973 5661 6c69 6428 7365 6c66 293a  f IsValid(self):
-000047e0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-000047f0: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
-00004800: 2e74 6f6b 656e 2c20 7374 7229 2061 6e64  .token, str) and
-00004810: 206c 656e 2873 656c 662e 746f 6b65 6e29   len(self.token)
-00004820: 203e 2030 2061 6e64 2069 7369 6e73 7461   > 0 and isinsta
-00004830: 6e63 6528 7365 6c66 2e74 6f6b 656e 4578  nce(self.tokenEx
-00004840: 7069 7279 2c20 6461 7465 7469 6d65 290d  piry, datetime).
-00004850: 0a0d 0a20 2020 2064 6566 2043 6865 636b  ...    def Check
-00004860: 5f54 6f6b 656e 2873 656c 6629 3a0d 0a20  _Token(self):.. 
-00004870: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
-00004880: 6c66 2e49 7356 616c 6964 2829 3a0d 0a20  lf.IsValid():.. 
-00004890: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-000048a0: 2045 7863 6570 7469 6f6e 2822 596f 7520   Exception("You 
-000048b0: 6172 6520 6e6f 7420 6c6f 6767 6564 206f  are not logged o
-000048c0: 6e2e 2050 6c65 6173 6520 7265 6372 6561  n. Please recrea
-000048d0: 7465 2074 6869 7320 636c 6965 6e74 206f  te this client o
-000048e0: 626a 6563 7420 7375 7070 6c79 696e 6720  bject supplying 
-000048f0: 7661 6c69 6420 7573 6572 2063 7265 6465  valid user crede
-00004900: 6e74 6961 6c73 2e22 290d 0a20 2020 2020  ntials.")..     
-00004910: 2020 2023 2041 2066 756e 6374 696f 6e20     # A function 
-00004920: 6361 6c6c 6564 2062 6566 6f72 6520 6576  called before ev
-00004930: 6572 7920 7175 6572 7920 746f 2063 6865  ery query to che
-00004940: 636b 2061 6e64 2072 656e 6577 2074 6865  ck and renew the
-00004950: 2074 6f6b 656e 2069 6620 7769 7468 696e   token if within
-00004960: 2031 3520 6d69 6e75 7465 7320 6f66 2065   15 minutes of e
-00004970: 7870 6972 7920 7469 6d65 206f 7220 6c61  xpiry time or la
-00004980: 7465 720d 0a20 2020 2020 2020 2074 696d  ter..        tim
-00004990: 6552 656e 6577 203d 2064 6174 6574 696d  eRenew = datetim
-000049a0: 652e 7574 636e 6f77 2829 202b 2074 696d  e.utcnow() + tim
-000049b0: 6564 656c 7461 286d 696e 7574 6573 203d  edelta(minutes =
-000049c0: 2031 3529 2023 2063 7572 696f 7573 6c79   15) # curiously
-000049d0: 2075 7463 6e6f 7728 2920 6d65 7468 6f64   utcnow() method
-000049e0: 2064 6f65 736e 2774 2073 6574 2074 6865   doesn't set the
-000049f0: 2074 696d 6520 7a6f 6e65 2074 6f20 7574   time zone to ut
-00004a00: 632e 2057 6520 6e65 6564 2074 6f20 646f  c. We need to do
-00004a10: 2073 6f20 746f 2063 6f6d 7061 7265 2077   so to compare w
-00004a20: 6974 6820 746f 6b65 6e2e 0d0a 2020 2020  ith token...    
-00004a30: 2020 2020 7469 6d65 5265 6e65 7720 3d20      timeRenew = 
-00004a40: 6461 7465 7469 6d65 2874 696d 6552 656e  datetime(timeRen
-00004a50: 6577 2e79 6561 722c 2074 696d 6552 656e  ew.year, timeRen
-00004a60: 6577 2e6d 6f6e 7468 2c20 7469 6d65 5265  ew.month, timeRe
-00004a70: 6e65 772e 6461 792c 2074 696d 6552 656e  new.day, timeRen
-00004a80: 6577 2e68 6f75 722c 2074 696d 6552 656e  ew.hour, timeRen
-00004a90: 6577 2e6d 696e 7574 652c 2074 696d 6552  ew.minute, timeR
-00004aa0: 656e 6577 2e73 6563 6f6e 642c 2030 2c20  enew.second, 0, 
-00004ab0: 747a 696e 666f 3d70 7974 7a2e 7574 6329  tzinfo=pytz.utc)
-00004ac0: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
-00004ad0: 662e 746f 6b65 6e45 7870 6972 7920 3c3d  f.tokenExpiry <=
-00004ae0: 2074 696d 6552 656e 6577 203a 0d0a 2020   timeRenew :..  
-00004af0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-00004b00: 6765 745f 746f 6b65 6e28 290d 0a0d 0a20  get_token().... 
-00004b10: 2020 200d 0a20 2020 2064 6566 205f 6a73     ..    def _js
-00004b20: 6f6e 5f52 6571 7565 7374 2873 656c 662c  on_Request(self,
-00004b30: 2072 6177 5f74 6578 7429 3a0d 0a20 2020   raw_text):..   
-00004b40: 2020 2020 2023 636f 6e76 6572 7420 7468       #convert th
-00004b50: 6520 6469 6374 696f 6e61 7279 2028 7261  e dictionary (ra
-00004b60: 7720 7465 7874 2920 746f 206a 736f 6e20  w text) to json 
-00004b70: 7465 7874 2066 6972 7374 0d0a 2020 2020  text first..    
-00004b80: 2020 2020 6a73 6f6e 5465 7874 203d 206a      jsonText = j
-00004b90: 736f 6e2e 6475 6d70 7328 7261 775f 7465  son.dumps(raw_te
-00004ba0: 7874 290d 0a20 2020 2020 2020 2062 7974  xt)..        byt
-00004bb0: 6554 656d 7020 3d20 6279 7465 7328 6a73  eTemp = bytes(js
-00004bc0: 6f6e 5465 7874 2c27 7574 662d 3827 290d  onText,'utf-8').
-00004bd0: 0a20 2020 2020 2020 2062 7974 6554 656d  .        byteTem
-00004be0: 7020 3d20 6a73 6f6e 5465 7874 2e65 6e63  p = jsonText.enc
-00004bf0: 6f64 6528 2775 7466 2d38 2729 0d0a 2020  ode('utf-8')..  
-00004c00: 2020 2020 2020 2363 6f6e 7665 7274 2074        #convert t
-00004c10: 6865 206a 736f 6e20 5465 7874 2074 6f20  he json Text to 
-00004c20: 6a73 6f6e 2066 6f72 6d61 7474 6564 2052  json formatted R
-00004c30: 6571 7565 7374 0d0a 2020 2020 2020 2020  equest..        
-00004c40: 6a73 6f6e 5265 7175 6573 7420 3d20 6a73  jsonRequest = js
-00004c50: 6f6e 2e6c 6f61 6473 2862 7974 6554 656d  on.loads(byteTem
-00004c60: 7029 0d0a 2020 2020 2020 2020 7265 7475  p)..        retu
-00004c70: 726e 206a 736f 6e52 6571 7565 7374 0d0a  rn jsonRequest..
-00004c80: 0d0a 2020 2020 6465 6620 6a73 6f6e 4461  ..    def jsonDa
-00004c90: 7465 5469 6d65 5f74 6f5f 6461 7465 7469  teTime_to_dateti
-00004ca0: 6d65 2873 656c 662c 206a 736f 6e44 6174  me(self, jsonDat
-00004cb0: 6529 3a0d 0a20 2020 2020 2020 2023 2043  e):..        # C
-00004cc0: 6f6e 7665 7274 2061 204a 534f 4e20 2f44  onvert a JSON /D
-00004cd0: 6174 6528 2920 7374 7269 6e67 2074 6f20  ate() string to 
-00004ce0: 6120 6461 7465 7469 6d65 206f 626a 6563  a datetime objec
-00004cf0: 740d 0a20 2020 2020 2020 2069 6620 6a73  t..        if js
-00004d00: 6f6e 4461 7465 2069 7320 4e6f 6e65 3a0d  onDate is None:.
-00004d10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00004d20: 7572 6e20 4e6f 6e65 0d0a 2020 2020 2020  urn None..      
-00004d30: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-00004d40: 2020 2020 6d61 7463 6820 3d20 7265 2e6d      match = re.m
-00004d50: 6174 6368 2872 225e 282f 4461 7465 5c28  atch(r"^(/Date\(
-00004d60: 2928 2d3f 5c64 2a29 285c 292f 2922 2c20  )(-?\d*)(\)/)", 
-00004d70: 6a73 6f6e 4461 7465 290d 0a20 2020 2020  jsonDate)..     
-00004d80: 2020 2020 2020 2069 6620 6d61 7463 6820         if match 
-00004d90: 3d3d 204e 6f6e 653a 0d0a 2020 2020 2020  == None:..      
-00004da0: 2020 2020 2020 2020 2020 6d61 7463 6820            match 
-00004db0: 3d20 7265 2e6d 6174 6368 2872 225e 282f  = re.match(r"^(/
-00004dc0: 4461 7465 5c28 2928 2d3f 5c64 2a29 285b  Date\()(-?\d*)([
-00004dd0: 2b2d 5d29 282e 2e29 282e 2e29 285c 292f  +-])(..)(..)(\)/
-00004de0: 2922 2c20 6a73 6f6e 4461 7465 290d 0a20  )", jsonDate).. 
-00004df0: 2020 2020 2020 2020 2020 2069 6620 6d61             if ma
-00004e00: 7463 683a 0d0a 2020 2020 2020 2020 2020  tch:..          
-00004e10: 2020 2020 2020 7265 7475 726e 2064 6174        return dat
-00004e20: 6574 696d 6528 3139 3730 2c20 312c 2031  etime(1970, 1, 1
-00004e30: 2c20 747a 696e 666f 3d70 7974 7a2e 7574  , tzinfo=pytz.ut
-00004e40: 6329 202b 2074 696d 6564 656c 7461 2873  c) + timedelta(s
-00004e50: 6563 6f6e 6473 3d66 6c6f 6174 286d 6174  econds=float(mat
-00004e60: 6368 2e67 726f 7570 2832 2929 2f31 3030  ch.group(2))/100
-00004e70: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
-00004e80: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00004e90: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
-00004ea0: 6570 7469 6f6e 2822 496e 7661 6c69 6420  eption("Invalid 
-00004eb0: 4a53 4f4e 2044 6174 653a 2022 202b 206a  JSON Date: " + j
-00004ec0: 736f 6e44 6174 6529 0d0a 2020 2020 2020  sonDate)..      
-00004ed0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-00004ee0: 6f6e 2061 7320 6578 703a 0d0a 2020 2020  on as exp:..    
-00004ef0: 2020 2020 2020 2020 4453 5573 6572 4f62          DSUserOb
-00004f00: 6a65 6374 4c6f 6746 756e 6373 2e4c 6f67  jectLogFuncs.Log
-00004f10: 4578 6365 7074 696f 6e28 2744 6174 6173  Exception('Datas
-00004f20: 7472 6561 6d50 7927 2c20 2744 5352 6573  treamPy', 'DSRes
-00004f30: 706f 6e73 652e 6a73 6f6e 4461 7465 5469  ponse.jsonDateTi
-00004f40: 6d65 5f74 6f5f 6461 7465 7469 6d65 272c  me_to_datetime',
-00004f50: 2027 4578 6365 7074 696f 6e20 6f63 6375   'Exception occu
-00004f60: 7265 643a 272c 2065 7870 290d 0a20 2020  red:', exp)..   
-00004f70: 2020 2020 2020 2020 2072 6169 7365 2065           raise e
-00004f80: 7870 0d0a 2020 2020 2020 2020 2020 2020  xp..            
-00004f90: 0d0a 2020 2020 6465 6620 5f67 6574 5f44  ..    def _get_D
-00004fa0: 6174 6528 7365 6c66 2c20 6a73 6f6e 4461  ate(self, jsonDa
-00004fb0: 7465 293a 0d0a 2020 2020 2020 2020 7472  te):..        tr
-00004fc0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00004fd0: 236d 6174 6368 203d 2072 652e 6d61 7463  #match = re.matc
-00004fe0: 6828 225e 2f44 6174 655b 285d 5b30 2d39  h("^/Date[(][0-9
-00004ff0: 5d7b 3133 7d5b 2b5d 5b30 2d39 5d7b 347d  ]{13}[+][0-9]{4}
-00005000: 5b29 5d2f 222c 206a 736f 6e44 6174 6529  [)]/", jsonDate)
-00005010: 0d0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
-00005020: 7463 6820 3d20 7265 2e6d 6174 6368 2872  tch = re.match(r
-00005030: 225e 282f 4461 7465 5c28 2928 2d3f 5c64  "^(/Date\()(-?\d
-00005040: 2a29 285b 2b2d 5d29 282e 2e29 282e 2e29  *)([+-])(..)(..)
-00005050: 285c 292f 2922 2c20 6a73 6f6e 4461 7465  (\)/)", jsonDate
-00005060: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
-00005070: 6620 6d61 7463 683a 0d0a 2020 2020 2020  f match:..      
-00005080: 2020 2020 2020 2020 2020 2364 203d 2072            #d = r
-00005090: 652e 7365 6172 6368 2827 5b30 2d39 5d7b  e.search('[0-9]{
-000050a0: 3133 7d27 2c20 6a73 6f6e 4461 7465 290d  13}', jsonDate).
-000050b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000050c0: 2064 203d 2066 6c6f 6174 286d 6174 6368   d = float(match
-000050d0: 2e67 726f 7570 2832 2929 0d0a 2020 2020  .group(2))..    
-000050e0: 2020 2020 2020 2020 2020 2020 6e64 6174              ndat
-000050f0: 6520 3d20 6461 7465 7469 6d65 2831 3937  e = datetime(197
-00005100: 302c 312c 3129 202b 2074 696d 6564 656c  0,1,1) + timedel
-00005110: 7461 2873 6563 6f6e 6473 3d66 6c6f 6174  ta(seconds=float
-00005120: 2864 292f 3130 3030 290d 0a20 2020 2020  (d)/1000)..     
-00005130: 2020 2020 2020 2020 2020 2075 7463 6461             utcda
-00005140: 7465 203d 2070 7974 7a2e 5554 432e 6672  te = pytz.UTC.fr
-00005150: 6f6d 7574 6328 6e64 6174 6529 2e73 7472  omutc(ndate).str
-00005160: 6674 696d 6528 2725 592d 256d 2d25 6427  ftime('%Y-%m-%d'
-00005170: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00005180: 2020 2072 6574 7572 6e20 7574 6364 6174     return utcdat
-00005190: 650d 0a20 2020 2020 2020 2020 2020 2065  e..            e
-000051a0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-000051b0: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
-000051c0: 7074 696f 6e28 2249 6e76 616c 6964 204a  ption("Invalid J
-000051d0: 534f 4e20 4461 7465 2229 0d0a 2020 2020  SON Date")..    
-000051e0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-000051f0: 7469 6f6e 2061 7320 6578 703a 0d0a 2020  tion as exp:..  
-00005200: 2020 2020 2020 2020 2020 4453 5573 6572            DSUser
-00005210: 4f62 6a65 6374 4c6f 6746 756e 6373 2e4c  ObjectLogFuncs.L
-00005220: 6f67 4578 6365 7074 696f 6e28 2744 6174  ogException('Dat
-00005230: 6173 7472 6561 6d50 7927 2c20 2744 5352  astreamPy', 'DSR
-00005240: 6573 706f 6e73 652e 6765 745f 4461 7465  esponse.get_Date
-00005250: 272c 2027 4578 6365 7074 696f 6e20 6f63  ', 'Exception oc
-00005260: 6375 7265 643a 272c 2065 7870 290d 0a20  cured:', exp).. 
-00005270: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00005280: 2065 7870 0d0a 2020 2020 2020 2020 2020   exp..          
-00005290: 2020 0d0a 2020 2020 2020 2020 2020 2020    ..            
-000052a0: 0d0a 2020 2020 0d0a 2020 2020 6465 6620  ..    ..    def 
-000052b0: 5f67 6574 5f44 6174 6174 7970 6556 616c  _get_DatatypeVal
-000052c0: 7565 7328 7365 6c66 2c20 6a73 6f6e 5265  ues(self, jsonRe
-000052d0: 7370 293a 0d0a 2020 2020 2020 2020 6d75  sp):..        mu
-000052e0: 6c74 6949 6e64 6578 203d 2046 616c 7365  ltiIndex = False
-000052f0: 0d0a 2020 2020 2020 2020 6466 203d 2070  ..        df = p
-00005300: 642e 4461 7461 4672 616d 6528 290d 0a20  d.DataFrame().. 
-00005310: 2020 2020 2020 2076 616c 4469 6374 203d         valDict =
-00005320: 207b 2249 6e73 7472 756d 656e 7422 3a5b   {"Instrument":[
-00005330: 5d2c 2244 6174 6174 7970 6522 3a5b 5d2c  ],"Datatype":[],
-00005340: 2256 616c 7565 223a 5b5d 2c22 4375 7272  "Value":[],"Curr
-00005350: 656e 6379 223a 5b5d 7d0d 0a0d 0a20 2020  ency":[]}....   
-00005360: 2020 2020 2066 6f72 2069 7465 6d20 696e       for item in
-00005370: 206a 736f 6e52 6573 705b 2744 6174 6154   jsonResp['DataT
-00005380: 7970 6556 616c 7565 7327 5d3a 200d 0a20  ypeValues']: .. 
-00005390: 2020 2020 2020 2020 2020 2064 6174 6174             datat
-000053a0: 7970 6520 3d20 6974 656d 5b27 4461 7461  ype = item['Data
-000053b0: 5479 7065 275d 0d0a 2020 2020 2020 2020  Type']..        
-000053c0: 2020 2020 0d0a 2020 2020 2020 2020 2020      ..          
-000053d0: 2020 666f 7220 6920 696e 2069 7465 6d5b    for i in item[
-000053e0: 2753 796d 626f 6c56 616c 7565 7327 5d3a  'SymbolValues']:
-000053f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005400: 2069 6e73 7472 756d 656e 7420 3d20 695b   instrument = i[
-00005410: 2753 796d 626f 6c27 5d0d 0a20 2020 2020  'Symbol']..     
-00005420: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-00005430: 6379 203d 204e 6f6e 650d 0a20 2020 2020  cy = None..     
-00005440: 2020 2020 2020 2020 2020 6966 2027 4375            if 'Cu
-00005450: 7272 656e 6379 2720 696e 2069 3a0d 0a20  rrency' in i:.. 
-00005460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005470: 2020 6375 7272 656e 6379 203d 2069 5b27    currency = i['
-00005480: 4375 7272 656e 6379 275d 2069 6620 695b  Currency'] if i[
-00005490: 2743 7572 7265 6e63 7927 5d20 656c 7365  'Currency'] else
-000054a0: 2027 4e41 270d 0a0d 0a20 2020 2020 2020   'NA'....       
-000054b0: 2020 2020 2020 2020 7661 6c44 6963 745b          valDict[
-000054c0: 2244 6174 6174 7970 6522 5d2e 6170 7065  "Datatype"].appe
-000054d0: 6e64 2864 6174 6174 7970 6529 0d0a 2020  nd(datatype)..  
-000054e0: 2020 2020 2020 2020 2020 2020 2076 616c               val
-000054f0: 4469 6374 5b22 496e 7374 7275 6d65 6e74  Dict["Instrument
-00005500: 225d 2e61 7070 656e 6428 696e 7374 7275  "].append(instru
-00005510: 6d65 6e74 290d 0a20 2020 2020 2020 2020  ment)..         
-00005520: 2020 2020 2020 6966 2063 7572 7265 6e63        if currenc
-00005530: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00005540: 2020 2020 2020 2076 616c 4469 6374 5b27         valDict['
-00005550: 4375 7272 656e 6379 275d 2e61 7070 656e  Currency'].appen
-00005560: 6428 6375 7272 656e 6379 290d 0a20 2020  d(currency)..   
-00005570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005580: 636f 6c4e 616d 6573 203d 2028 696e 7374  colNames = (inst
-00005590: 7275 6d65 6e74 2c20 6461 7461 7479 7065  rument, datatype
-000055a0: 2c20 6375 7272 656e 6379 290d 0a20 2020  , currency)..   
-000055b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000055c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000055d0: 2020 2020 2020 636f 6c4e 616d 6573 203d        colNames =
-000055e0: 2028 696e 7374 7275 6d65 6e74 2c20 6461   (instrument, da
-000055f0: 7461 7479 7065 290d 0a0d 0a20 2020 2020  tatype)....     
-00005600: 2020 2020 2020 2020 2020 7661 6c75 6573            values
-00005610: 203d 2069 5b27 5661 6c75 6527 5d0d 0a20   = i['Value'].. 
-00005620: 2020 2020 2020 2020 2020 2020 2020 7661                va
-00005630: 6c54 7970 6520 3d20 695b 2754 7970 6527  lType = i['Type'
-00005640: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
-00005650: 2020 2020 2348 616e 646c 696e 6720 616c      #Handling al
-00005660: 6c20 706f 7373 6962 6c65 2074 7970 6573  l possible types
-00005670: 206f 6620 6461 7461 2061 7320 7065 7220   of data as per 
-00005680: 4453 5379 6d62 6f6c 5265 7370 6f6e 7365  DSSymbolResponse
-00005690: 5661 6c75 6554 7970 650d 0a0d 0a20 2020  ValueType....   
-000056a0: 2020 2020 2020 2020 2020 2020 2354 6865              #The
-000056b0: 7365 2076 616c 7565 2074 7970 6573 2072  se value types r
-000056c0: 6574 7572 6e20 616e 2061 7272 6179 0d0a  eturn an array..
-000056d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000056e0: 6620 7661 6c54 7970 6520 696e 205b 4453  f valType in [DS
-000056f0: 5379 6d62 6f6c 5265 7370 6f6e 7365 5661  SymbolResponseVa
-00005700: 6c75 6554 7970 652e 426f 6f6c 4172 7261  lueType.BoolArra
-00005710: 792c 200d 0a20 2020 2020 2020 2020 2020  y, ..           
-00005720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005730: 2020 2044 5353 796d 626f 6c52 6573 706f     DSSymbolRespo
-00005740: 6e73 6556 616c 7565 5479 7065 2e49 6e74  nseValueType.Int
-00005750: 4172 7261 792c 200d 0a20 2020 2020 2020  Array, ..       
-00005760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005770: 2020 2020 2020 2044 5353 796d 626f 6c52         DSSymbolR
-00005780: 6573 706f 6e73 6556 616c 7565 5479 7065  esponseValueType
-00005790: 2e44 6174 6554 696d 6541 7272 6179 2c0d  .DateTimeArray,.
-000057a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000057b0: 2020 2020 2020 2020 2020 2020 2020 2044                 D
-000057c0: 5353 796d 626f 6c52 6573 706f 6e73 6556  SSymbolResponseV
-000057d0: 616c 7565 5479 7065 2e44 6f75 626c 6541  alueType.DoubleA
-000057e0: 7272 6179 2c0d 0a20 2020 2020 2020 2020  rray,..         
-000057f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005800: 2020 2020 2044 5353 796d 626f 6c52 6573       DSSymbolRes
-00005810: 706f 6e73 6556 616c 7565 5479 7065 2e53  ponseValueType.S
-00005820: 7472 696e 6741 7272 6179 2c0d 0a20 2020  tringArray,..   
-00005830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005840: 2020 2020 2020 2020 2020 2044 5353 796d             DSSym
-00005850: 626f 6c52 6573 706f 6e73 6556 616c 7565  bolResponseValue
-00005860: 5479 7065 2e4f 626a 6563 7441 7272 6179  Type.ObjectArray
-00005870: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00005880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005890: 2044 5353 796d 626f 6c52 6573 706f 6e73   DSSymbolRespons
-000058a0: 6556 616c 7565 5479 7065 2e4e 756c 6c61  eValueType.Nulla
-000058b0: 626c 6542 6f6f 6c41 7272 6179 2c0d 0a20  bleBoolArray,.. 
-000058c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058d0: 2020 2020 2020 2020 2020 2020 2044 5353               DSS
-000058e0: 796d 626f 6c52 6573 706f 6e73 6556 616c  ymbolResponseVal
-000058f0: 7565 5479 7065 2e4e 756c 6c61 626c 6549  ueType.NullableI
-00005900: 6e74 4172 7261 792c 0d0a 2020 2020 2020  ntArray,..      
-00005910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005920: 2020 2020 2020 2020 4453 5379 6d62 6f6c          DSSymbol
-00005930: 5265 7370 6f6e 7365 5661 6c75 6554 7970  ResponseValueTyp
-00005940: 652e 4e75 6c6c 6162 6c65 4461 7465 5469  e.NullableDateTi
-00005950: 6d65 4172 7261 792c 0d0a 2020 2020 2020  meArray,..      
-00005960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005970: 2020 2020 2020 2020 4453 5379 6d62 6f6c          DSSymbol
-00005980: 5265 7370 6f6e 7365 5661 6c75 6554 7970  ResponseValueTyp
-00005990: 652e 4e75 6c6c 6162 6c65 446f 7562 6c65  e.NullableDouble
-000059a0: 4172 7261 795d 3a0d 0a20 2020 2020 2020  Array]:..       
-000059b0: 2020 2020 2020 2020 2020 2020 2023 5468               #Th
-000059c0: 6520 6172 7261 7920 6361 6e20 6265 206f  e array can be o
-000059d0: 6620 626f 6f6c 2c20 646f 7562 6c65 2c20  f bool, double, 
-000059e0: 696e 742c 2073 7472 696e 672c 2064 6174  int, string, dat
-000059f0: 6573 206f 7220 4f62 6a65 6374 0d0a 0d0a  es or Object....
-00005a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005a10: 2020 2020 2343 6865 636b 2069 6620 7468      #Check if th
-00005a20: 6520 6172 7261 7920 6f66 2068 6173 204a  e array of has J
-00005a30: 534f 4e20 6461 7465 2073 7472 696e 6720  SON date string 
-00005a40: 616e 6420 636f 6e76 6572 7420 6561 6368  and convert each
-00005a50: 2074 6f20 4461 7465 7469 6d65 0d0a 2020   to Datetime..  
-00005a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005a70: 2020 7465 6d70 203d 205b 7365 6c66 2e5f    temp = [self._
-00005a80: 6765 745f 4461 7465 2878 2920 6966 2069  get_Date(x) if i
-00005a90: 7369 6e73 7461 6e63 6528 782c 2073 7472  sinstance(x, str
-00005aa0: 2920 616e 6420 782e 7374 6172 7473 7769  ) and x.startswi
-00005ab0: 7468 2827 2f44 6174 6528 2729 2065 6c73  th('/Date(') els
-00005ac0: 6520 7820 666f 7220 7820 696e 2076 616c  e x for x in val
-00005ad0: 7565 735d 0d0a 2020 2020 2020 2020 2020  ues]..          
-00005ae0: 2020 2020 2020 2020 2020 6466 5b63 6f6c            df[col
-00005af0: 4e61 6d65 735d 203d 2074 656d 700d 0a20  Names] = temp.. 
-00005b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b10: 2020 200d 0a20 2020 2020 2020 2020 2020     ..           
-00005b20: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-00005b30: 7661 6c75 6573 2920 3e20 313a 0d0a 2020  values) > 1:..  
-00005b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b50: 2020 2020 2020 6d75 6c74 6949 6e64 6578        multiIndex
-00005b60: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
-00005b70: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00005b80: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00005b90: 2020 2020 2020 2020 2020 2020 6d75 6c74              mult
-00005ba0: 6949 6e64 6578 203d 2046 616c 7365 0d0a  iIndex = False..
-00005bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005bc0: 2020 2020 2020 2020 7661 6c44 6963 745b          valDict[
-00005bd0: 2256 616c 7565 225d 2e61 7070 656e 6428  "Value"].append(
-00005be0: 7661 6c75 6573 5b30 5d29 2020 0d0a 0d0a  values[0])  ....
-00005bf0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00005c00: 5468 6573 6520 7661 6c75 6520 7479 7065  These value type
-00005c10: 7320 7265 7475 726e 2073 696e 676c 6520  s return single 
-00005c20: 7661 6c75 650d 0a20 2020 2020 2020 2020  value..         
-00005c30: 2020 2020 2020 656c 6966 2076 616c 5479        elif valTy
-00005c40: 7065 2069 6e20 5b44 5353 796d 626f 6c52  pe in [DSSymbolR
-00005c50: 6573 706f 6e73 6556 616c 7565 5479 7065  esponseValueType
-00005c60: 2e45 6d70 7479 2c0d 0a20 2020 2020 2020  .Empty,..       
-00005c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005c80: 2020 2020 2020 2020 2044 5353 796d 626f           DSSymbo
-00005c90: 6c52 6573 706f 6e73 6556 616c 7565 5479  lResponseValueTy
-00005ca0: 7065 2e42 6f6f 6c2c 0d0a 2020 2020 2020  pe.Bool,..      
-00005cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005cc0: 2020 2020 2020 2020 2020 4453 5379 6d62            DSSymb
-00005cd0: 6f6c 5265 7370 6f6e 7365 5661 6c75 6554  olResponseValueT
-00005ce0: 7970 652e 496e 742c 0d0a 2020 2020 2020  ype.Int,..      
-00005cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d00: 2020 2020 2020 2020 2020 4453 5379 6d62            DSSymb
-00005d10: 6f6c 5265 7370 6f6e 7365 5661 6c75 6554  olResponseValueT
-00005d20: 7970 652e 4461 7465 5469 6d65 2c0d 0a20  ype.DateTime,.. 
-00005d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d40: 2020 2020 2020 2020 2020 2020 2020 2044                 D
-00005d50: 5353 796d 626f 6c52 6573 706f 6e73 6556  SSymbolResponseV
-00005d60: 616c 7565 5479 7065 2e44 6f75 626c 652c  alueType.Double,
-00005d70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d90: 2020 4453 5379 6d62 6f6c 5265 7370 6f6e    DSSymbolRespon
-00005da0: 7365 5661 6c75 6554 7970 652e 5374 7269  seValueType.Stri
-00005db0: 6e67 5d3a 0d0a 2020 2020 2020 2020 2020  ng]:..          
-00005dc0: 2020 2020 2020 2020 2074 656d 7020 3d20           temp = 
-00005dd0: 7365 6c66 2e5f 6765 745f 4461 7465 2876  self._get_Date(v
-00005de0: 616c 7565 7329 2069 6620 6973 696e 7374  alues) if isinst
-00005df0: 616e 6365 2876 616c 7565 732c 2073 7472  ance(values, str
-00005e00: 2920 616e 6420 7661 6c75 6573 2e73 7461  ) and values.sta
-00005e10: 7274 7377 6974 6828 272f 4461 7465 2827  rtswith('/Date('
-00005e20: 2920 656c 7365 2076 616c 7565 7320 0d0a  ) else values ..
-00005e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005e40: 2020 2076 616c 4469 6374 5b22 5661 6c75     valDict["Valu
-00005e50: 6522 5d2e 6170 7065 6e64 2874 656d 7029  e"].append(temp)
-00005e60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005e70: 2065 6c69 6620 7661 6c54 7970 6520 3d3d   elif valType ==
-00005e80: 2044 5353 796d 626f 6c52 6573 706f 6e73   DSSymbolRespons
-00005e90: 6556 616c 7565 5479 7065 2e45 7272 6f72  eValueType.Error
-00005ea0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00005eb0: 2020 2020 2020 2020 2345 7272 6f72 2052          #Error R
-00005ec0: 6574 7572 6e65 640d 0a20 2020 2020 2020  eturned..       
-00005ed0: 2020 2020 2020 2020 2020 2020 2020 7661                va
-00005ee0: 6c44 6963 745b 2256 616c 7565 225d 2e61  lDict["Value"].a
-00005ef0: 7070 656e 6428 7661 6c75 6573 290d 0a0d  ppend(values)...
-00005f00: 0a20 2020 2020 2020 2069 6620 6d75 6c74  .        if mult
-00005f10: 6949 6e64 6578 3a0d 0a20 2020 2020 2020  iIndex:..       
-00005f20: 2020 2020 2069 6620 6375 7272 656e 6379       if currency
-00005f30: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00005f40: 2020 2020 6466 2e63 6f6c 756d 6e73 203d      df.columns =
-00005f50: 2070 642e 4d75 6c74 6949 6e64 6578 2e66   pd.MultiIndex.f
-00005f60: 726f 6d5f 7475 706c 6573 2864 662e 636f  rom_tuples(df.co
-00005f70: 6c75 6d6e 732c 206e 616d 6573 3d5b 2749  lumns, names=['I
-00005f80: 6e73 7472 756d 656e 7427 2c27 4669 656c  nstrument','Fiel
-00005f90: 6427 2c27 4375 7272 656e 6379 275d 290d  d','Currency']).
-00005fa0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00005fb0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00005fc0: 2020 2020 2064 662e 636f 6c75 6d6e 7320       df.columns 
-00005fd0: 3d20 7064 2e4d 756c 7469 496e 6465 782e  = pd.MultiIndex.
-00005fe0: 6672 6f6d 5f74 7570 6c65 7328 6466 2e63  from_tuples(df.c
-00005ff0: 6f6c 756d 6e73 2c20 6e61 6d65 733d 5b27  olumns, names=['
-00006000: 496e 7374 7275 6d65 6e74 272c 2746 6965  Instrument','Fie
-00006010: 6c64 275d 290d 0a20 2020 2020 2020 2020  ld'])..         
-00006020: 2020 2020 2020 2020 2020 0d0a 2020 2020            ..    
-00006030: 2020 2020 6966 206e 6f74 206d 756c 7469      if not multi
-00006040: 496e 6465 783a 0d0a 2020 2020 2020 2020  Index:..        
-00006050: 2020 2020 696e 6465 784c 656e 203d 2072      indexLen = r
-00006060: 616e 6765 286c 656e 2876 616c 4469 6374  ange(len(valDict
-00006070: 5b27 496e 7374 7275 6d65 6e74 275d 2929  ['Instrument']))
-00006080: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00006090: 2076 616c 4469 6374 5b27 4375 7272 656e   valDict['Curren
-000060a0: 6379 275d 3a0d 0a20 2020 2020 2020 2020  cy']:..         
-000060b0: 2020 2020 2020 206e 6577 6466 203d 2070         newdf = p
-000060c0: 642e 4461 7461 4672 616d 6528 6461 7461  d.DataFrame(data
-000060d0: 3d76 616c 4469 6374 2c63 6f6c 756d 6e73  =valDict,columns
-000060e0: 3d5b 2249 6e73 7472 756d 656e 7422 2c20  =["Instrument", 
-000060f0: 2244 6174 6174 7970 6522 2c20 2256 616c  "Datatype", "Val
-00006100: 7565 222c 2022 4375 7272 656e 6379 225d  ue", "Currency"]
-00006110: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00006120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006130: 2020 2020 696e 6465 783d 696e 6465 784c      index=indexL
-00006140: 656e 290d 0a20 2020 2020 2020 2020 2020  en)..           
-00006150: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00006160: 2020 2020 2020 2020 6e65 7764 6620 3d20          newdf = 
-00006170: 7064 2e44 6174 6146 7261 6d65 2864 6174  pd.DataFrame(dat
-00006180: 613d 7661 6c44 6963 742c 636f 6c75 6d6e  a=valDict,column
-00006190: 733d 5b22 496e 7374 7275 6d65 6e74 222c  s=["Instrument",
-000061a0: 2022 4461 7461 7479 7065 222c 2022 5661   "Datatype", "Va
-000061b0: 6c75 6522 5d2c 0d0a 2020 2020 2020 2020  lue"],..        
-000061c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000061d0: 2020 2020 2020 2020 2069 6e64 6578 3d69           index=i
-000061e0: 6e64 6578 4c65 6e29 0d0a 2020 2020 2020  ndexLen)..      
-000061f0: 2020 2020 2020 7265 7475 726e 206e 6577        return new
-00006200: 6466 0d0a 2020 2020 2020 2020 7265 7475  df..        retu
-00006210: 726e 2064 6620 0d0a 2020 2020 2020 2020  rn df ..        
-00006220: 2020 2020 0d0a 2020 2020 6465 6620 5f66      ..    def _f
-00006230: 6f72 6d61 745f 5265 7370 6f6e 7365 2873  ormat_Response(s
-00006240: 656c 662c 2072 6573 706f 6e73 655f 6a73  elf, response_js
-00006250: 6f6e 293a 0d0a 2020 2020 2020 2020 2320  on):..        # 
-00006260: 4966 2064 6174 6573 2069 7320 6e6f 7420  If dates is not 
-00006270: 6176 6169 6c61 626c 652c 2074 6865 2072  available, the r
-00006280: 6571 7565 7374 2069 7320 6e6f 7420 636f  equest is not co
-00006290: 6e73 7472 7563 7465 6420 636f 7272 6563  nstructed correc
-000062a0: 746c 790d 0a20 2020 2020 2020 2072 6573  tly..        res
-000062b0: 706f 6e73 655f 6a73 6f6e 203d 2064 6963  ponse_json = dic
-000062c0: 7428 7265 7370 6f6e 7365 5f6a 736f 6e29  t(response_json)
-000062d0: 0d0a 2020 2020 2020 2020 6966 2027 4461  ..        if 'Da
-000062e0: 7465 7327 2069 6e20 7265 7370 6f6e 7365  tes' in response
-000062f0: 5f6a 736f 6e3a 0d0a 2020 2020 2020 2020  _json:..        
-00006300: 2020 2020 6461 7465 735f 636f 6e76 6572      dates_conver
-00006310: 7465 6420 3d20 5b5d 0d0a 2020 2020 2020  ted = []..      
-00006320: 2020 2020 2020 6966 2072 6573 706f 6e73        if respons
-00006330: 655f 6a73 6f6e 5b27 4461 7465 7327 5d20  e_json['Dates'] 
-00006340: 213d 204e 6f6e 653a 0d0a 2020 2020 2020  != None:..      
-00006350: 2020 2020 2020 2020 2020 6461 7465 7320            dates 
-00006360: 3d20 7265 7370 6f6e 7365 5f6a 736f 6e5b  = response_json[
-00006370: 2744 6174 6573 275d 0d0a 2020 2020 2020  'Dates']..      
-00006380: 2020 2020 2020 2020 2020 666f 7220 6420            for d 
-00006390: 696e 2064 6174 6573 3a0d 0a20 2020 2020  in dates:..     
-000063a0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-000063b0: 6174 6573 5f63 6f6e 7665 7274 6564 2e61  ates_converted.a
-000063c0: 7070 656e 6428 7365 6c66 2e5f 6765 745f  ppend(self._get_
-000063d0: 4461 7465 2864 2929 0d0a 2020 2020 2020  Date(d))..      
-000063e0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-000063f0: 2020 2020 2072 6574 7572 6e20 2745 7272       return 'Err
-00006400: 6f72 202d 2070 6c65 6173 6520 6368 6563  or - please chec
-00006410: 6b20 696e 7374 7275 6d65 6e74 7320 616e  k instruments an
-00006420: 6420 7061 7261 6d65 7465 7273 2028 7469  d parameters (ti
-00006430: 6d65 2073 6572 6965 7320 6f72 2073 7461  me series or sta
-00006440: 7469 6329 270d 0a20 2020 2020 2020 200d  tic)'..        .
-00006450: 0a20 2020 2020 2020 2023 204c 6f6f 7020  .        # Loop 
-00006460: 7468 726f 7567 6820 7468 6520 7661 6c75  through the valu
-00006470: 6573 2069 6e20 7468 6520 7265 7370 6f6e  es in the respon
-00006480: 7365 0d0a 2020 2020 2020 2020 6461 7461  se..        data
-00006490: 6672 616d 6520 3d20 7365 6c66 2e5f 6765  frame = self._ge
-000064a0: 745f 4461 7461 7479 7065 5661 6c75 6573  t_DatatypeValues
-000064b0: 2872 6573 706f 6e73 655f 6a73 6f6e 290d  (response_json).
-000064c0: 0a20 2020 2020 2020 2069 6620 286c 656e  .        if (len
-000064d0: 2864 6174 6573 5f63 6f6e 7665 7274 6564  (dates_converted
-000064e0: 2920 3d3d 206c 656e 2864 6174 6166 7261  ) == len(datafra
-000064f0: 6d65 2e69 6e64 6578 2929 3a0d 0a20 2020  me.index)):..   
-00006500: 2020 2020 2020 2020 2064 6174 6166 7261           datafra
-00006510: 6d65 2e69 6e64 6578 2e6e 616d 6520 3d20  me.index.name = 
-00006520: 2744 6174 6573 270d 0a20 2020 2020 2020  'Dates'..       
-00006530: 2020 2020 2064 6174 6166 7261 6d65 2e69       dataframe.i
-00006540: 6e64 6578 203d 2064 6174 6573 5f63 6f6e  ndex = dates_con
-00006550: 7665 7274 6564 0d0a 2020 2020 2020 2020  verted..        
-00006560: 656c 6966 2028 6c65 6e28 6461 7465 735f  elif (len(dates_
-00006570: 636f 6e76 6572 7465 6429 203d 3d20 3129  converted) == 1)
-00006580: 3a0d 0a20 2020 2020 2020 2020 2020 2064  :..            d
-00006590: 6174 6166 7261 6d65 5b27 4461 7465 7327  ataframe['Dates'
-000065a0: 5d20 3d20 6461 7465 735f 636f 6e76 6572  ] = dates_conver
-000065b0: 7465 645b 305d 0d0a 2020 2020 2020 2020  ted[0]..        
-000065c0: 2020 2020 6966 2028 6c65 6e28 6461 7461      if (len(data
-000065d0: 6672 616d 652e 696e 6465 7829 203e 206c  frame.index) > l
-000065e0: 656e 2864 6174 6573 5f63 6f6e 7665 7274  en(dates_convert
-000065f0: 6564 2929 3a0d 0a20 2020 2020 2020 2020  ed)):..         
-00006600: 2020 2020 2020 2064 6174 6166 7261 6d65         dataframe
-00006610: 2e69 6e64 6578 203d 2064 6174 6166 7261  .index = datafra
-00006620: 6d65 5b27 4461 7465 7327 5d0d 0a20 2020  me['Dates']..   
-00006630: 2020 2020 2020 2020 2020 2020 2064 6174               dat
-00006640: 6166 7261 6d65 203d 2064 6174 6166 7261  aframe = datafra
-00006650: 6d65 2e64 726f 7028 636f 6c75 6d6e 733d  me.drop(columns=
-00006660: 2744 6174 6573 272c 2061 7869 7320 3d20  'Dates', axis = 
-00006670: 3129 0d0a 2020 2020 2020 2020 0d0a 2020  1)..        ..  
-00006680: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
-00006690: 2020 2020 0d0a 2020 2020 2020 2020 2320      ..        # 
-000066a0: 2020 2069 6620 286c 656e 2864 6174 6573     if (len(dates
-000066b0: 5f63 6f6e 7665 7274 6564 2920 3e20 3129  _converted) > 1)
-000066c0: 3a0d 0a20 2020 2020 2020 2023 2020 2020  :..        #    
-000066d0: 2020 2020 2364 6174 6166 7261 6d65 2e69      #dataframe.i
-000066e0: 6e73 6572 7428 6c6f 6320 3d20 302c 2063  nsert(loc = 0, c
-000066f0: 6f6c 756d 6e20 3d20 2744 6174 6573 272c  olumn = 'Dates',
-00006700: 2076 616c 7565 203d 2064 6174 6573 5f63   value = dates_c
-00006710: 6f6e 7665 7274 6564 290d 0a20 2020 2020  onverted)..     
-00006720: 2020 2023 2020 2020 2020 2020 6461 7461     #        data
-00006730: 6672 616d 652e 696e 6465 7820 3d20 6461  frame.index = da
-00006740: 7465 735f 636f 6e76 6572 7465 640d 0a20  tes_converted.. 
-00006750: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00006760: 6461 7461 6672 616d 652e 696e 6465 782e  dataframe.index.
-00006770: 6e61 6d65 203d 2027 4461 7465 7327 0d0a  name = 'Dates'..
-00006780: 2020 2020 2020 2020 2365 6c69 6620 286c          #elif (l
-00006790: 656e 2864 6174 6573 5f63 6f6e 7665 7274  en(dates_convert
-000067a0: 6564 2920 3d3d 2031 293a 0d0a 2020 2020  ed) == 1):..    
-000067b0: 2020 2020 2320 2020 2064 6174 6166 7261      #    datafra
-000067c0: 6d65 5b27 4461 7465 7327 5d20 3d20 6461  me['Dates'] = da
-000067d0: 7465 735f 636f 6e76 6572 7465 645b 305d  tes_converted[0]
-000067e0: 0d0a 2020 2020 2020 2020 0d0a 2020 2020  ..        ..    
-000067f0: 2020 2020 7265 7475 726e 2064 6174 6166      return dataf
-00006800: 7261 6d65 0d0a 0d0a 2020 2020 6465 6620  rame....    def 
-00006810: 5f66 6f72 6d61 745f 6275 6e64 6c65 5f72  _format_bundle_r
-00006820: 6573 706f 6e73 6528 7365 6c66 2c72 6573  esponse(self,res
-00006830: 706f 6e73 655f 6a73 6f6e 293a 0d0a 2020  ponse_json):..  
-00006840: 2020 2020 2020 666f 726d 6174 7465 6452        formattedR
-00006850: 6573 7020 3d20 5b5d 0d0a 2020 2020 2020  esp = []..      
-00006860: 2020 666f 7220 6561 6368 4461 7461 5265    for eachDataRe
-00006870: 7370 6f6e 7365 2069 6e20 7265 7370 6f6e  sponse in respon
-00006880: 7365 5f6a 736f 6e5b 2744 6174 6152 6573  se_json['DataRes
-00006890: 706f 6e73 6573 275d 3a0d 0a20 2020 2020  ponses']:..     
-000068a0: 2020 2020 2020 2064 6620 3d20 7365 6c66         df = self
-000068b0: 2e5f 666f 726d 6174 5f52 6573 706f 6e73  ._format_Respons
-000068c0: 6528 6561 6368 4461 7461 5265 7370 6f6e  e(eachDataRespon
-000068d0: 7365 290d 0a20 2020 2020 2020 2020 2020  se)..           
-000068e0: 2066 6f72 6d61 7474 6564 5265 7370 2e61   formattedResp.a
-000068f0: 7070 656e 6428 6466 2920 2020 2020 200d  ppend(df)      .
-00006900: 0a20 2020 2020 2020 2020 2020 0d0a 2020  .           ..  
-00006910: 2020 2020 2020 7265 7475 726e 2066 6f72        return for
-00006920: 6d61 7474 6564 5265 7370 0d0a 2020 200d  mattedResp..   .
-00006930: 0a20 2020 2020 2020 0d0a 2020 2020 6465  .       ..    de
-00006940: 6620 5f67 6574 5f6d 6574 6164 6174 6128  f _get_metadata(
-00006950: 7365 6c66 2c20 6a73 6f6e 5265 7370 293a  self, jsonResp):
-00006960: 0d0a 2020 2020 2020 2020 6e61 6d65 7320  ..        names 
-00006970: 3d20 7b7d 0d0a 2020 2020 2020 2020 6966  = {}..        if
-00006980: 206a 736f 6e52 6573 705b 2753 796d 626f   jsonResp['Symbo
-00006990: 6c4e 616d 6573 275d 3a0d 0a20 2020 2020  lNames']:..     
-000069a0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-000069b0: 6a73 6f6e 5265 7370 5b27 5379 6d62 6f6c  jsonResp['Symbol
-000069c0: 4e61 6d65 7327 5d3a 0d0a 2020 2020 2020  Names']:..      
-000069d0: 2020 2020 2020 2020 2020 6e61 6d65 732e            names.
-000069e0: 7570 6461 7465 287b 695b 274b 6579 275d  update({i['Key']
-000069f0: 3a20 695b 2756 616c 7565 275d 7d29 0d0a  : i['Value']})..
-00006a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006a10: 0d0a 2020 2020 2020 2020 6966 206a 736f  ..        if jso
-00006a20: 6e52 6573 705b 2744 6174 6154 7970 654e  nResp['DataTypeN
-00006a30: 616d 6573 275d 3a0d 0a20 2020 2020 2020  ames']:..       
-00006a40: 2020 2020 2066 6f72 2069 2069 6e20 6a73       for i in js
-00006a50: 6f6e 5265 7370 5b27 4461 7461 5479 7065  onResp['DataType
-00006a60: 4e61 6d65 7327 5d3a 0d0a 2020 2020 2020  Names']:..      
-00006a70: 2020 2020 2020 2020 2020 6e61 6d65 732e            names.
-00006a80: 7570 6461 7465 287b 695b 274b 6579 275d  update({i['Key']
-00006a90: 3a20 695b 2756 616c 7565 275d 7d29 0d0a  : i['Value']})..
-00006aa0: 2020 2020 2020 2020 7072 696e 7428 6e61          print(na
-00006ab0: 6d65 7329 0d0a 2020 2020 2020 2020 0d0a  mes)..        ..
-00006ac0: 0d0a 2020 2020 6465 6620 5f67 6574 5f6d  ..    def _get_m
-00006ad0: 6574 6164 6174 615f 6275 6e64 6c65 2873  etadata_bundle(s
-00006ae0: 656c 662c 206a 736f 6e52 6573 7029 3a0d  elf, jsonResp):.
-00006af0: 0a20 2020 2020 2020 2066 6f72 2065 6163  .        for eac
-00006b00: 6844 6174 6152 6573 706f 6e73 6520 696e  hDataResponse in
-00006b10: 206a 736f 6e52 6573 703a 0d0a 2020 2020   jsonResp:..    
-00006b20: 2020 2020 2020 2020 7365 6c66 2e5f 6765          self._ge
-00006b30: 745f 6d65 7461 6461 7461 2865 6163 6844  t_metadata(eachD
-00006b40: 6174 6152 6573 706f 6e73 6529 0d0a 232d  ataResponse)..#-
-00006b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000039d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000039e0: 2d2d 2d2d 0d0a 2020 2020 6465 6620 5f67  ----..    def _g
+000039f0: 6574 5f52 6573 706f 6e73 6528 7365 6c66  et_Response(self
+00003a00: 2c20 7265 7155 726c 2c20 7261 775f 7265  , reqUrl, raw_re
+00003a10: 7175 6573 7429 3a0d 0a20 2020 2020 2020  quest):..       
+00003a20: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00003a30: 2020 2023 636f 6e76 6572 7420 7261 7720     #convert raw 
+00003a40: 7265 7175 6573 7420 746f 206a 736f 6e20  request to json 
+00003a50: 666f 726d 6174 2062 6566 6f72 6520 706f  format before po
+00003a60: 7374 0d0a 2020 2020 2020 2020 2020 2020  st..            
+00003a70: 6a73 6f6e 5265 7175 6573 7420 3d20 7365  jsonRequest = se
+00003a80: 6c66 2e5f 6a73 6f6e 5f52 6571 7565 7374  lf._json_Request
+00003a90: 2872 6177 5f72 6571 7565 7374 290d 0a20  (raw_request).. 
+00003aa0: 2020 2020 2020 2020 2020 200d 0a20 2020             ..   
+00003ab0: 2020 2020 2020 2020 2068 7474 705f 5265           http_Re
+00003ac0: 7370 6f6e 7365 203d 2073 656c 662e 5f72  sponse = self._r
+00003ad0: 6571 5365 7373 696f 6e2e 706f 7374 2872  eqSession.post(r
+00003ae0: 6571 5572 6c2c 206a 736f 6e3d 6a73 6f6e  eqUrl, json=json
+00003af0: 5265 7175 6573 742c 2020 7072 6f78 6965  Request,  proxie
+00003b00: 733d 7365 6c66 2e5f 7072 6f78 6965 732c  s=self._proxies,
+00003b10: 2076 6572 6966 7920 3d20 7365 6c66 2e5f   verify = self._
+00003b20: 6365 7274 6669 6c65 732c 2063 6572 7420  certfiles, cert 
+00003b30: 3d20 7365 6c66 2e5f 7373 6c43 6572 742c  = self._sslCert,
+00003b40: 2074 696d 656f 7574 3d20 7365 6c66 2e5f   timeout= self._
+00003b50: 7469 6d65 6f75 7429 0d0a 2020 2020 2020  timeout)..      
+00003b60: 2020 2020 2020 7265 7475 726e 2068 7474        return htt
+00003b70: 705f 5265 7370 6f6e 7365 0d0a 2020 2020  p_Response..    
+00003b80: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+00003b90: 7469 6f6e 2061 7320 6578 703a 0d0a 2020  tion as exp:..  
+00003ba0: 2020 2020 2020 2020 2020 4453 5573 6572            DSUser
+00003bb0: 4f62 6a65 6374 4c6f 6746 756e 6373 2e4c  ObjectLogFuncs.L
+00003bc0: 6f67 4578 6365 7074 696f 6e28 2744 6174  ogException('Dat
+00003bd0: 6173 7472 6561 6d50 7927 2c20 2744 5352  astreamPy', 'DSR
+00003be0: 6573 706f 6e73 652e 6765 745f 5265 7370  esponse.get_Resp
+00003bf0: 6f6e 7365 272c 2027 4578 6365 7074 696f  onse', 'Exceptio
+00003c00: 6e20 6f63 6375 7265 643a 272c 2065 7870  n occured:', exp
+00003c10: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+00003c20: 6169 7365 2065 7870 0d0a 0d0a 2020 2020  aise exp....    
+00003c30: 2020 2020 0d0a 2020 2020 6465 6620 5f67      ..    def _g
+00003c40: 6574 5f6a 736f 6e5f 5265 7370 6f6e 7365  et_json_Response
+00003c50: 2873 656c 662c 2072 6571 5572 6c2c 2072  (self, reqUrl, r
+00003c60: 6177 5f72 6571 7565 7374 293a 0d0a 2020  aw_request):..  
+00003c70: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00003c80: 2020 2020 2020 6874 7470 5265 7370 6f6e        httpRespon
+00003c90: 7365 203d 2073 656c 662e 5f67 6574 5f52  se = self._get_R
+00003ca0: 6573 706f 6e73 6528 7265 7155 726c 2c20  esponse(reqUrl, 
+00003cb0: 7261 775f 7265 7175 6573 7429 0d0a 2020  raw_request)..  
+00003cc0: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
+00003cd0: 7468 6520 7265 7370 6f6e 7365 0d0a 2020  the response..  
+00003ce0: 2020 2020 2020 2020 6966 2068 7474 7052          if httpR
+00003cf0: 6573 706f 6e73 652e 6f6b 3a0d 0a20 2020  esponse.ok:..   
+00003d00: 2020 2020 2020 2020 2020 206a 736f 6e5f             json_
+00003d10: 5265 7370 6f6e 7365 203d 2064 6963 7428  Response = dict(
+00003d20: 6874 7470 5265 7370 6f6e 7365 2e6a 736f  httpResponse.jso
+00003d30: 6e28 2929 0d0a 2020 2020 2020 2020 2020  n())..          
+00003d40: 2020 2020 7265 7475 726e 206a 736f 6e5f      return json_
+00003d50: 5265 7370 6f6e 7365 0d0a 2020 2020 2020  Response..      
+00003d60: 2020 2020 656c 6966 2068 7474 7052 6573      elif httpRes
+00003d70: 706f 6e73 652e 7374 6174 7573 5f63 6f64  ponse.status_cod
+00003d80: 6520 3d3d 2034 3030 206f 7220 6874 7470  e == 400 or http
+00003d90: 5265 7370 6f6e 7365 2e73 7461 7475 735f  Response.status_
+00003da0: 636f 6465 203d 3d20 3430 333a 0d0a 2020  code == 403:..  
+00003db0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00003dc0: 706f 7373 6962 6c65 2044 5346 6175 6c74  possible DSFault
+00003dd0: 2065 7863 6570 7469 6f6e 2072 6574 7572   exception retur
+00003de0: 6e65 6420 6475 6520 746f 2070 6572 6d69  ned due to permi
+00003df0: 7373 696f 6e73 2c20 6574 630d 0a20 2020  ssions, etc..   
+00003e00: 2020 2020 2020 2020 2020 2020 2074 7279               try
+00003e10: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00003e20: 2020 2020 2020 2074 7279 4a73 6f6e 203d         tryJson =
+00003e30: 206a 736f 6e2e 6c6f 6164 7328 6874 7470   json.loads(http
+00003e40: 5265 7370 6f6e 7365 2e74 6578 7429 0d0a  Response.text)..
+00003e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003e60: 2020 2020 6966 2027 4d65 7373 6167 6527      if 'Message'
+00003e70: 2069 6e20 7472 794a 736f 6e2e 6b65 7973   in tryJson.keys
+00003e80: 2829 2061 6e64 2027 436f 6465 2720 696e  () and 'Code' in
+00003e90: 2074 7279 4a73 6f6e 2e6b 6579 7328 293a   tryJson.keys():
+00003ea0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00003eb0: 2020 2020 2020 2020 2020 6661 756c 7444            faultD
+00003ec0: 6963 7420 3d20 6469 6374 2874 7279 4a73  ict = dict(tryJs
+00003ed0: 6f6e 290d 0a20 2020 2020 2020 2020 2020  on)..           
+00003ee0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00003ef0: 7365 2044 5355 7365 724f 626a 6563 7446  se DSUserObjectF
+00003f00: 6175 6c74 2866 6175 6c74 4469 6374 290d  ault(faultDict).
+00003f10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003f20: 2065 7863 6570 7420 6a73 6f6e 2e4a 534f   except json.JSO
+00003f30: 4e44 6563 6f64 6545 7272 6f72 2061 7320  NDecodeError as 
+00003f40: 6a64 6563 6f64 6565 7272 3a0d 0a20 2020  jdecodeerr:..   
+00003f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f60: 2070 6173 730d 0a20 2020 2020 2020 2020   pass..         
+00003f70: 2023 2075 6e65 7870 6563 7465 6420 7265   # unexpected re
+00003f80: 7370 6f6e 7365 2073 6f20 7261 6973 6520  sponse so raise 
+00003f90: 6173 2061 6e20 6572 726f 720d 0a20 2020  as an error..   
+00003fa0: 2020 2020 2020 2068 7474 7052 6573 706f         httpRespo
+00003fb0: 6e73 652e 7261 6973 655f 666f 725f 7374  nse.raise_for_st
+00003fc0: 6174 7573 2829 0d0a 2020 2020 2020 2020  atus()..        
+00003fd0: 6578 6365 7074 206a 736f 6e2e 4a53 4f4e  except json.JSON
+00003fe0: 4465 636f 6465 4572 726f 7220 6173 206a  DecodeError as j
+00003ff0: 6465 636f 6465 6572 723a 0d0a 2020 2020  decodeerr:..    
+00004000: 2020 2020 2020 2020 4453 5573 6572 4f62          DSUserOb
+00004010: 6a65 6374 4c6f 6746 756e 6373 2e4c 6f67  jectLogFuncs.Log
+00004020: 4578 6365 7074 696f 6e28 2744 6174 6173  Exception('Datas
+00004030: 7472 6561 6d50 7927 2c20 2744 5352 6573  treamPy', 'DSRes
+00004040: 706f 6e73 652e 6765 745f 6a73 6f6e 5f52  ponse.get_json_R
+00004050: 6573 706f 6e73 6527 2c20 274a 534f 4e20  esponse', 'JSON 
+00004060: 6465 636f 6465 7220 4578 6365 7074 696f  decoder Exceptio
+00004070: 6e20 6f63 6375 7265 643a 272c 206a 6465  n occured:', jde
+00004080: 636f 6465 6572 7229 0d0a 2020 2020 2020  codeerr)..      
+00004090: 2020 2020 2020 7261 6973 650d 0a20 2020        raise..   
+000040a0: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+000040b0: 7074 696f 6e20 6173 2065 7870 3a0d 0a20  ption as exp:.. 
+000040c0: 2020 2020 2020 2020 2020 2044 5355 7365             DSUse
+000040d0: 724f 626a 6563 744c 6f67 4675 6e63 732e  rObjectLogFuncs.
+000040e0: 4c6f 6745 7863 6570 7469 6f6e 2827 4461  LogException('Da
+000040f0: 7461 7374 7265 616d 5079 272c 2027 4453  tastreamPy', 'DS
+00004100: 5265 7370 6f6e 7365 2e67 6574 5f6a 736f  Response.get_jso
+00004110: 6e5f 5265 7370 6f6e 7365 272c 2027 4578  n_Response', 'Ex
+00004120: 6365 7074 696f 6e20 6f63 6375 7265 643a  ception occured:
+00004130: 272c 2065 7870 290d 0a20 2020 2020 2020  ', exp)..       
+00004140: 2020 2020 2072 6169 7365 0d0a 2020 2020       raise..    
+00004150: 0d0a 2020 2020 6465 6620 5f67 6574 5f74  ..    def _get_t
+00004160: 6f6b 656e 2873 656c 662c 2069 7350 726f  oken(self, isPro
+00004170: 7879 3d46 616c 7365 293a 0d0a 2020 2020  xy=False):..    
+00004180: 2020 2020 746f 6b65 6e5f 7572 6c20 3d20      token_url = 
+00004190: 7365 6c66 2e75 726c 202b 2022 4765 7454  self.url + "GetT
+000041a0: 6f6b 656e 220d 0a20 2020 2020 2020 2074  oken"..        t
+000041b0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+000041c0: 2070 726f 7074 6965 7320 3d20 5b5d 0d0a   propties = []..
+000041d0: 2020 2020 2020 2020 2020 2020 7072 6f70              prop
+000041e0: 7469 6573 2e61 7070 656e 6428 5072 6f70  ties.append(Prop
+000041f0: 6572 7469 6573 2822 5f5f 4170 7049 6422  erties("__AppId"
+00004200: 2c20 4453 5061 636b 6167 6549 6e66 6f2e  , DSPackageInfo.
+00004210: 6170 7049 6429 290d 0a20 2020 2020 2020  appId))..       
+00004220: 2020 2020 2070 726f 7074 6965 732e 6170       propties.ap
+00004230: 7065 6e64 2850 726f 7065 7274 6965 7328  pend(Properties(
+00004240: 2252 6574 7572 6e4f 7074 696f 6e73 222c  "ReturnOptions",
+00004250: 2022 4e61 7669 6761 746f 7253 6572 6965   "NavigatorSerie
+00004260: 732c 4e61 7669 6761 746f 7244 6174 6174  s,NavigatorDatat
+00004270: 7970 6573 2229 290d 0a0d 0a20 2020 2020  ypes"))....     
+00004280: 2020 2020 2020 2074 6f6b 656e 5265 7120         tokenReq 
+00004290: 3d20 546f 6b65 6e52 6571 7565 7374 2873  = TokenRequest(s
+000042a0: 656c 662e 7573 6572 6e61 6d65 2c20 7365  elf.username, se
+000042b0: 6c66 2e70 6173 7377 6f72 642c 2070 726f  lf.password, pro
+000042c0: 7074 6965 7329 0d0a 2020 2020 2020 2020  pties)..        
+000042d0: 2020 2020 7261 775f 746f 6b65 6e52 6571      raw_tokenReq
+000042e0: 203d 2074 6f6b 656e 5265 712e 6765 745f   = tokenReq.get_
+000042f0: 546f 6b65 6e52 6571 7565 7374 2829 0d0a  TokenRequest()..
+00004300: 2020 2020 2020 2020 2020 2020 0d0a 2020              ..  
+00004310: 2020 2020 2020 2020 2020 2350 6f73 7420            #Post 
+00004320: 7468 6520 746f 6b65 6e20 7265 7175 6573  the token reques
+00004330: 7420 746f 2067 6574 2072 6573 706f 6e73  t to get respons
+00004340: 6520 696e 206a 736f 6e20 666f 726d 6174  e in json format
+00004350: 0d0a 2020 2020 2020 2020 2020 2020 6a73  ..            js
+00004360: 6f6e 5f52 6573 706f 6e73 6520 3d20 7365  on_Response = se
+00004370: 6c66 2e5f 6765 745f 6a73 6f6e 5f52 6573  lf._get_json_Res
+00004380: 706f 6e73 6528 746f 6b65 6e5f 7572 6c2c  ponse(token_url,
+00004390: 2072 6177 5f74 6f6b 656e 5265 7129 0d0a   raw_tokenReq)..
+000043a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000043b0: 2e74 6f6b 656e 4578 7069 7279 203d 2073  .tokenExpiry = s
+000043c0: 656c 662e 6a73 6f6e 4461 7465 5469 6d65  elf.jsonDateTime
+000043d0: 5f74 6f5f 6461 7465 7469 6d65 286a 736f  _to_datetime(jso
+000043e0: 6e5f 5265 7370 6f6e 7365 5b27 546f 6b65  n_Response['Toke
+000043f0: 6e45 7870 6972 7927 5d29 0d0a 2020 2020  nExpiry'])..    
+00004400: 2020 2020 2020 2020 7365 6c66 2e74 6f6b          self.tok
+00004410: 656e 203d 206a 736f 6e5f 5265 7370 6f6e  en = json_Respon
+00004420: 7365 5b27 546f 6b65 6e56 616c 7565 275d  se['TokenValue']
+00004430: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00004440: 2320 4368 6563 6b20 7468 6520 5072 6f70  # Check the Prop
+00004450: 6572 7469 6573 2063 6f6c 6c65 6374 696f  erties collectio
+00004460: 6e20 666f 7220 7468 6520 7572 6c73 2074  n for the urls t
+00004470: 6861 7420 7370 6563 6966 7920 7768 6572  hat specify wher
+00004480: 6520 746f 2062 726f 7773 6520 666f 7220  e to browse for 
+00004490: 4461 7461 7374 7265 616d 204e 6176 6967  Datastream Navig
+000044a0: 6174 6f72 0d0a 2020 2020 2020 2020 2020  ator..          
+000044b0: 2020 6966 206a 736f 6e5f 5265 7370 6f6e    if json_Respon
+000044c0: 7365 5b27 5072 6f70 6572 7469 6573 275d  se['Properties']
+000044d0: 2061 6e64 206c 656e 286a 736f 6e5f 5265   and len(json_Re
+000044e0: 7370 6f6e 7365 5b27 5072 6f70 6572 7469  sponse['Properti
+000044f0: 6573 275d 2920 3e20 303a 0d0a 2020 2020  es']) > 0:..    
+00004500: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00004510: 7072 6f70 2069 6e20 6a73 6f6e 5f52 6573  prop in json_Res
+00004520: 706f 6e73 655b 2750 726f 7065 7274 6965  ponse['Propertie
+00004530: 7327 5d3a 0d0a 2020 2020 2020 2020 2020  s']:..          
+00004540: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00004550: 6e73 7461 6e63 6528 7072 6f70 5b27 4b65  nstance(prop['Ke
+00004560: 7927 5d2c 2073 7472 2920 616e 6420 7072  y'], str) and pr
+00004570: 6f70 5b27 4b65 7927 5d2e 6c6f 7765 7228  op['Key'].lower(
+00004580: 2920 3d3d 2027 6e61 7669 6761 746f 7273  ) == 'navigators
+00004590: 6572 6965 7327 3a0d 0a20 2020 2020 2020  eries':..       
+000045a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000045b0: 2073 656c 662e 6e61 7669 6761 746f 7253   self.navigatorS
+000045c0: 6572 6965 7355 726c 203d 2070 726f 705b  eriesUrl = prop[
+000045d0: 2756 616c 7565 275d 2023 2054 6865 2075  'Value'] # The u
+000045e0: 726c 2074 6f20 6272 6f77 7365 2061 6e64  rl to browse and
+000045f0: 2073 6561 7263 6820 4461 7461 7374 7265   search Datastre
+00004600: 616d 204e 6176 6967 6174 6f72 2066 6f72  am Navigator for
+00004610: 2073 7065 6369 6669 6320 696e 7374 7275   specific instru
+00004620: 6d65 6e74 730d 0a20 2020 2020 2020 2020  ments..         
+00004630: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00004640: 6973 696e 7374 616e 6365 2870 726f 705b  isinstance(prop[
+00004650: 274b 6579 275d 2c20 7374 7229 2061 6e64  'Key'], str) and
+00004660: 2070 726f 705b 274b 6579 275d 2e6c 6f77   prop['Key'].low
+00004670: 6572 2829 203d 3d20 276e 6176 6967 6174  er() == 'navigat
+00004680: 6f72 6461 7461 7479 7065 7327 3a0d 0a20  ordatatypes':.. 
+00004690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000046a0: 2020 2020 2020 2073 656c 662e 6e61 7669         self.navi
+000046b0: 6761 746f 7244 6174 6174 7970 6573 5572  gatorDatatypesUr
+000046c0: 6c20 3d20 7072 6f70 5b27 5661 6c75 6527  l = prop['Value'
+000046d0: 5d20 2320 5468 6520 7572 6c20 746f 2062  ] # The url to b
+000046e0: 726f 7773 6520 616e 6420 7365 6172 6368  rowse and search
+000046f0: 2044 6174 6173 7472 6561 6d20 4e61 7669   Datastream Navi
+00004700: 6761 746f 7220 666f 7220 7370 6563 6966  gator for specif
+00004710: 6963 2064 6174 6174 7970 6573 0d0a 2020  ic datatypes..  
+00004720: 2020 2020 2020 2020 2020 0d0a 2020 2020            ..    
+00004730: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+00004740: 7469 6f6e 2061 7320 6578 703a 0d0a 2020  tion as exp:..  
+00004750: 2020 2020 2020 2020 2020 4453 5573 6572            DSUser
+00004760: 4f62 6a65 6374 4c6f 6746 756e 6373 2e4c  ObjectLogFuncs.L
+00004770: 6f67 4578 6365 7074 696f 6e28 2744 6174  ogException('Dat
+00004780: 6173 7472 6561 6d50 7927 2c20 2744 5352  astreamPy', 'DSR
+00004790: 6573 706f 6e73 652e 6765 745f 746f 6b65  esponse.get_toke
+000047a0: 6e27 2c20 2745 7863 6570 7469 6f6e 206f  n', 'Exception o
+000047b0: 6363 7572 6564 3a27 2c20 6578 7029 0d0a  ccured:', exp)..
+000047c0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+000047d0: 6520 6578 700d 0a0d 0a20 2020 2064 6566  e exp....    def
+000047e0: 2049 7356 616c 6964 2873 656c 6629 3a0d   IsValid(self):.
+000047f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00004800: 6973 696e 7374 616e 6365 2873 656c 662e  isinstance(self.
+00004810: 746f 6b65 6e2c 2073 7472 2920 616e 6420  token, str) and 
+00004820: 6c65 6e28 7365 6c66 2e74 6f6b 656e 2920  len(self.token) 
+00004830: 3e20 3020 616e 6420 6973 696e 7374 616e  > 0 and isinstan
+00004840: 6365 2873 656c 662e 746f 6b65 6e45 7870  ce(self.tokenExp
+00004850: 6972 792c 2064 6174 6574 696d 6529 0d0a  iry, datetime)..
+00004860: 0d0a 2020 2020 6465 6620 4368 6563 6b5f  ..    def Check_
+00004870: 546f 6b65 6e28 7365 6c66 293a 0d0a 2020  Token(self):..  
+00004880: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
+00004890: 662e 4973 5661 6c69 6428 293a 0d0a 2020  f.IsValid():..  
+000048a0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000048b0: 4578 6365 7074 696f 6e28 2259 6f75 2061  Exception("You a
+000048c0: 7265 206e 6f74 206c 6f67 6765 6420 6f6e  re not logged on
+000048d0: 2e20 506c 6561 7365 2072 6563 7265 6174  . Please recreat
+000048e0: 6520 7468 6973 2063 6c69 656e 7420 6f62  e this client ob
+000048f0: 6a65 6374 2073 7570 706c 7969 6e67 2076  ject supplying v
+00004900: 616c 6964 2075 7365 7220 6372 6564 656e  alid user creden
+00004910: 7469 616c 732e 2229 0d0a 2020 2020 2020  tials.")..      
+00004920: 2020 2320 4120 6675 6e63 7469 6f6e 2063    # A function c
+00004930: 616c 6c65 6420 6265 666f 7265 2065 7665  alled before eve
+00004940: 7279 2071 7565 7279 2074 6f20 6368 6563  ry query to chec
+00004950: 6b20 616e 6420 7265 6e65 7720 7468 6520  k and renew the 
+00004960: 746f 6b65 6e20 6966 2077 6974 6869 6e20  token if within 
+00004970: 3135 206d 696e 7574 6573 206f 6620 6578  15 minutes of ex
+00004980: 7069 7279 2074 696d 6520 6f72 206c 6174  piry time or lat
+00004990: 6572 0d0a 2020 2020 2020 2020 7469 6d65  er..        time
+000049a0: 5265 6e65 7720 3d20 6461 7465 7469 6d65  Renew = datetime
+000049b0: 2e75 7463 6e6f 7728 2920 2b20 7469 6d65  .utcnow() + time
+000049c0: 6465 6c74 6128 6d69 6e75 7465 7320 3d20  delta(minutes = 
+000049d0: 3135 2920 2320 6375 7269 6f75 736c 7920  15) # curiously 
+000049e0: 7574 636e 6f77 2829 206d 6574 686f 6420  utcnow() method 
+000049f0: 646f 6573 6e27 7420 7365 7420 7468 6520  doesn't set the 
+00004a00: 7469 6d65 207a 6f6e 6520 746f 2075 7463  time zone to utc
+00004a10: 2e20 5765 206e 6565 6420 746f 2064 6f20  . We need to do 
+00004a20: 736f 2074 6f20 636f 6d70 6172 6520 7769  so to compare wi
+00004a30: 7468 2074 6f6b 656e 2e0d 0a20 2020 2020  th token...     
+00004a40: 2020 2074 696d 6552 656e 6577 203d 2064     timeRenew = d
+00004a50: 6174 6574 696d 6528 7469 6d65 5265 6e65  atetime(timeRene
+00004a60: 772e 7965 6172 2c20 7469 6d65 5265 6e65  w.year, timeRene
+00004a70: 772e 6d6f 6e74 682c 2074 696d 6552 656e  w.month, timeRen
+00004a80: 6577 2e64 6179 2c20 7469 6d65 5265 6e65  ew.day, timeRene
+00004a90: 772e 686f 7572 2c20 7469 6d65 5265 6e65  w.hour, timeRene
+00004aa0: 772e 6d69 6e75 7465 2c20 7469 6d65 5265  w.minute, timeRe
+00004ab0: 6e65 772e 7365 636f 6e64 2c20 302c 2074  new.second, 0, t
+00004ac0: 7a69 6e66 6f3d 7079 747a 2e75 7463 290d  zinfo=pytz.utc).
+00004ad0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00004ae0: 2e74 6f6b 656e 4578 7069 7279 203c 3d20  .tokenExpiry <= 
+00004af0: 7469 6d65 5265 6e65 7720 3a0d 0a20 2020  timeRenew :..   
+00004b00: 2020 2020 2020 2020 2073 656c 662e 5f67           self._g
+00004b10: 6574 5f74 6f6b 656e 2829 0d0a 0d0a 2020  et_token()....  
+00004b20: 2020 0d0a 2020 2020 6465 6620 5f6a 736f    ..    def _jso
+00004b30: 6e5f 5265 7175 6573 7428 7365 6c66 2c20  n_Request(self, 
+00004b40: 7261 775f 7465 7874 293a 0d0a 2020 2020  raw_text):..    
+00004b50: 2020 2020 2363 6f6e 7665 7274 2074 6865      #convert the
+00004b60: 2064 6963 7469 6f6e 6172 7920 2872 6177   dictionary (raw
+00004b70: 2074 6578 7429 2074 6f20 6a73 6f6e 2074   text) to json t
+00004b80: 6578 7420 6669 7273 740d 0a20 2020 2020  ext first..     
+00004b90: 2020 206a 736f 6e54 6578 7420 3d20 6a73     jsonText = js
+00004ba0: 6f6e 2e64 756d 7073 2872 6177 5f74 6578  on.dumps(raw_tex
+00004bb0: 7429 0d0a 2020 2020 2020 2020 6279 7465  t)..        byte
+00004bc0: 5465 6d70 203d 2062 7974 6573 286a 736f  Temp = bytes(jso
+00004bd0: 6e54 6578 742c 2775 7466 2d38 2729 0d0a  nText,'utf-8')..
+00004be0: 2020 2020 2020 2020 6279 7465 5465 6d70          byteTemp
+00004bf0: 203d 206a 736f 6e54 6578 742e 656e 636f   = jsonText.enco
+00004c00: 6465 2827 7574 662d 3827 290d 0a20 2020  de('utf-8')..   
+00004c10: 2020 2020 2023 636f 6e76 6572 7420 7468       #convert th
+00004c20: 6520 6a73 6f6e 2054 6578 7420 746f 206a  e json Text to j
+00004c30: 736f 6e20 666f 726d 6174 7465 6420 5265  son formatted Re
+00004c40: 7175 6573 740d 0a20 2020 2020 2020 206a  quest..        j
+00004c50: 736f 6e52 6571 7565 7374 203d 206a 736f  sonRequest = jso
+00004c60: 6e2e 6c6f 6164 7328 6279 7465 5465 6d70  n.loads(byteTemp
+00004c70: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00004c80: 6e20 6a73 6f6e 5265 7175 6573 740d 0a0d  n jsonRequest...
+00004c90: 0a20 2020 2064 6566 206a 736f 6e44 6174  .    def jsonDat
+00004ca0: 6554 696d 655f 746f 5f64 6174 6574 696d  eTime_to_datetim
+00004cb0: 6528 7365 6c66 2c20 6a73 6f6e 4461 7465  e(self, jsonDate
+00004cc0: 293a 0d0a 2020 2020 2020 2020 2320 436f  ):..        # Co
+00004cd0: 6e76 6572 7420 6120 4a53 4f4e 202f 4461  nvert a JSON /Da
+00004ce0: 7465 2829 2073 7472 696e 6720 746f 2061  te() string to a
+00004cf0: 2064 6174 6574 696d 6520 6f62 6a65 6374   datetime object
+00004d00: 0d0a 2020 2020 2020 2020 6966 206a 736f  ..        if jso
+00004d10: 6e44 6174 6520 6973 204e 6f6e 653a 0d0a  nDate is None:..
+00004d20: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00004d30: 726e 204e 6f6e 650d 0a20 2020 2020 2020  rn None..       
+00004d40: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00004d50: 2020 206d 6174 6368 203d 2072 652e 6d61     match = re.ma
+00004d60: 7463 6828 7222 5e28 2f44 6174 655c 2829  tch(r"^(/Date\()
+00004d70: 282d 3f5c 642a 2928 5c29 2f29 222c 206a  (-?\d*)(\)/)", j
+00004d80: 736f 6e44 6174 6529 0d0a 2020 2020 2020  sonDate)..      
+00004d90: 2020 2020 2020 6966 206d 6174 6368 203d        if match =
+00004da0: 3d20 4e6f 6e65 3a0d 0a20 2020 2020 2020  = None:..       
+00004db0: 2020 2020 2020 2020 206d 6174 6368 203d           match =
+00004dc0: 2072 652e 6d61 7463 6828 7222 5e28 2f44   re.match(r"^(/D
+00004dd0: 6174 655c 2829 282d 3f5c 642a 2928 5b2b  ate\()(-?\d*)([+
+00004de0: 2d5d 2928 2e2e 2928 2e2e 2928 5c29 2f29  -])(..)(..)(\)/)
+00004df0: 222c 206a 736f 6e44 6174 6529 0d0a 2020  ", jsonDate)..  
+00004e00: 2020 2020 2020 2020 2020 6966 206d 6174            if mat
+00004e10: 6368 3a0d 0a20 2020 2020 2020 2020 2020  ch:..           
+00004e20: 2020 2020 2072 6574 7572 6e20 6461 7465       return date
+00004e30: 7469 6d65 2831 3937 302c 2031 2c20 312c  time(1970, 1, 1,
+00004e40: 2074 7a69 6e66 6f3d 7079 747a 2e75 7463   tzinfo=pytz.utc
+00004e50: 2920 2b20 7469 6d65 6465 6c74 6128 7365  ) + timedelta(se
+00004e60: 636f 6e64 733d 666c 6f61 7428 6d61 7463  conds=float(matc
+00004e70: 682e 6772 6f75 7028 3229 292f 3130 3030  h.group(2))/1000
+00004e80: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
+00004e90: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00004ea0: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
+00004eb0: 7074 696f 6e28 2249 6e76 616c 6964 204a  ption("Invalid J
+00004ec0: 534f 4e20 4461 7465 3a20 2220 2b20 6a73  SON Date: " + js
+00004ed0: 6f6e 4461 7465 290d 0a20 2020 2020 2020  onDate)..       
+00004ee0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00004ef0: 6e20 6173 2065 7870 3a0d 0a20 2020 2020  n as exp:..     
+00004f00: 2020 2020 2020 2044 5355 7365 724f 626a         DSUserObj
+00004f10: 6563 744c 6f67 4675 6e63 732e 4c6f 6745  ectLogFuncs.LogE
+00004f20: 7863 6570 7469 6f6e 2827 4461 7461 7374  xception('Datast
+00004f30: 7265 616d 5079 272c 2027 4453 5265 7370  reamPy', 'DSResp
+00004f40: 6f6e 7365 2e6a 736f 6e44 6174 6554 696d  onse.jsonDateTim
+00004f50: 655f 746f 5f64 6174 6574 696d 6527 2c20  e_to_datetime', 
+00004f60: 2745 7863 6570 7469 6f6e 206f 6363 7572  'Exception occur
+00004f70: 6564 3a27 2c20 6578 7029 0d0a 2020 2020  ed:', exp)..    
+00004f80: 2020 2020 2020 2020 7261 6973 6520 6578          raise ex
+00004f90: 700d 0a20 2020 2020 2020 2020 2020 200d  p..            .
+00004fa0: 0a20 2020 2064 6566 205f 6765 745f 4461  .    def _get_Da
+00004fb0: 7465 2873 656c 662c 206a 736f 6e44 6174  te(self, jsonDat
+00004fc0: 6529 3a0d 0a20 2020 2020 2020 2074 7279  e):..        try
+00004fd0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00004fe0: 6d61 7463 6820 3d20 7265 2e6d 6174 6368  match = re.match
+00004ff0: 2822 5e2f 4461 7465 5b28 5d5b 302d 395d  ("^/Date[(][0-9]
+00005000: 7b31 337d 5b2b 5d5b 302d 395d 7b34 7d5b  {13}[+][0-9]{4}[
+00005010: 295d 2f22 2c20 6a73 6f6e 4461 7465 290d  )]/", jsonDate).
+00005020: 0a20 2020 2020 2020 2020 2020 206d 6174  .            mat
+00005030: 6368 203d 2072 652e 6d61 7463 6828 7222  ch = re.match(r"
+00005040: 5e28 2f44 6174 655c 2829 282d 3f5c 642a  ^(/Date\()(-?\d*
+00005050: 2928 5b2b 2d5d 2928 2e2e 2928 2e2e 2928  )([+-])(..)(..)(
+00005060: 5c29 2f29 222c 206a 736f 6e44 6174 6529  \)/)", jsonDate)
+00005070: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00005080: 206d 6174 6368 3a0d 0a20 2020 2020 2020   match:..       
+00005090: 2020 2020 2020 2020 2023 6420 3d20 7265           #d = re
+000050a0: 2e73 6561 7263 6828 275b 302d 395d 7b31  .search('[0-9]{1
+000050b0: 337d 272c 206a 736f 6e44 6174 6529 0d0a  3}', jsonDate)..
+000050c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000050d0: 6420 3d20 666c 6f61 7428 6d61 7463 682e  d = float(match.
+000050e0: 6772 6f75 7028 3229 290d 0a20 2020 2020  group(2))..     
+000050f0: 2020 2020 2020 2020 2020 206e 6461 7465             ndate
+00005100: 203d 2064 6174 6574 696d 6528 3139 3730   = datetime(1970
+00005110: 2c31 2c31 2920 2b20 7469 6d65 6465 6c74  ,1,1) + timedelt
+00005120: 6128 7365 636f 6e64 733d 666c 6f61 7428  a(seconds=float(
+00005130: 6429 2f31 3030 3029 0d0a 2020 2020 2020  d)/1000)..      
+00005140: 2020 2020 2020 2020 2020 7574 6364 6174            utcdat
+00005150: 6520 3d20 7079 747a 2e55 5443 2e66 726f  e = pytz.UTC.fro
+00005160: 6d75 7463 286e 6461 7465 292e 7374 7266  mutc(ndate).strf
+00005170: 7469 6d65 2827 2559 2d25 6d2d 2564 2729  time('%Y-%m-%d')
+00005180: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005190: 2020 7265 7475 726e 2075 7463 6461 7465    return utcdate
+000051a0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+000051b0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+000051c0: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
+000051d0: 7469 6f6e 2822 496e 7661 6c69 6420 4a53  tion("Invalid JS
+000051e0: 4f4e 2044 6174 6522 290d 0a20 2020 2020  ON Date")..     
+000051f0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00005200: 696f 6e20 6173 2065 7870 3a0d 0a20 2020  ion as exp:..   
+00005210: 2020 2020 2020 2020 2044 5355 7365 724f           DSUserO
+00005220: 626a 6563 744c 6f67 4675 6e63 732e 4c6f  bjectLogFuncs.Lo
+00005230: 6745 7863 6570 7469 6f6e 2827 4461 7461  gException('Data
+00005240: 7374 7265 616d 5079 272c 2027 4453 5265  streamPy', 'DSRe
+00005250: 7370 6f6e 7365 2e67 6574 5f44 6174 6527  sponse.get_Date'
+00005260: 2c20 2745 7863 6570 7469 6f6e 206f 6363  , 'Exception occ
+00005270: 7572 6564 3a27 2c20 6578 7029 0d0a 2020  ured:', exp)..  
+00005280: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00005290: 6578 700d 0a20 2020 2020 2020 2020 2020  exp..           
+000052a0: 200d 0a20 2020 2020 2020 2020 2020 200d   ..            .
+000052b0: 0a20 2020 200d 0a20 2020 2064 6566 205f  .    ..    def _
+000052c0: 6765 745f 4461 7461 7479 7065 5661 6c75  get_DatatypeValu
+000052d0: 6573 2873 656c 662c 206a 736f 6e52 6573  es(self, jsonRes
+000052e0: 7029 3a0d 0a20 2020 2020 2020 206d 756c  p):..        mul
+000052f0: 7469 496e 6465 7820 3d20 4661 6c73 650d  tiIndex = False.
+00005300: 0a20 2020 2020 2020 2064 6620 3d20 7064  .        df = pd
+00005310: 2e44 6174 6146 7261 6d65 2829 0d0a 2020  .DataFrame()..  
+00005320: 2020 2020 2020 7661 6c44 6963 7420 3d20        valDict = 
+00005330: 7b22 496e 7374 7275 6d65 6e74 223a 5b5d  {"Instrument":[]
+00005340: 2c22 4461 7461 7479 7065 223a 5b5d 2c22  ,"Datatype":[],"
+00005350: 5661 6c75 6522 3a5b 5d2c 2243 7572 7265  Value":[],"Curre
+00005360: 6e63 7922 3a5b 5d7d 0d0a 0d0a 2020 2020  ncy":[]}....    
+00005370: 2020 2020 666f 7220 6974 656d 2069 6e20      for item in 
+00005380: 6a73 6f6e 5265 7370 5b27 4461 7461 5479  jsonResp['DataTy
+00005390: 7065 5661 6c75 6573 275d 3a20 0d0a 2020  peValues']: ..  
+000053a0: 2020 2020 2020 2020 2020 6461 7461 7479            dataty
+000053b0: 7065 203d 2069 7465 6d5b 2744 6174 6154  pe = item['DataT
+000053c0: 7970 6527 5d0d 0a20 2020 2020 2020 2020  ype']..         
+000053d0: 2020 200d 0a20 2020 2020 2020 2020 2020     ..           
+000053e0: 2066 6f72 2069 2069 6e20 6974 656d 5b27   for i in item['
+000053f0: 5379 6d62 6f6c 5661 6c75 6573 275d 3a0d  SymbolValues']:.
+00005400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005410: 696e 7374 7275 6d65 6e74 203d 2069 5b27  instrument = i['
+00005420: 5379 6d62 6f6c 275d 0d0a 2020 2020 2020  Symbol']..      
+00005430: 2020 2020 2020 2020 2063 7572 7265 6e63           currenc
+00005440: 7920 3d20 4e6f 6e65 0d0a 2020 2020 2020  y = None..      
+00005450: 2020 2020 2020 2020 2069 6620 2743 7572           if 'Cur
+00005460: 7265 6e63 7927 2069 6e20 693a 0d0a 2020  rency' in i:..  
+00005470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005480: 2063 7572 7265 6e63 7920 3d20 695b 2743   currency = i['C
+00005490: 7572 7265 6e63 7927 5d20 6966 2069 5b27  urrency'] if i['
+000054a0: 4375 7272 656e 6379 275d 2065 6c73 6520  Currency'] else 
+000054b0: 274e 4127 0d0a 0d0a 2020 2020 2020 2020  'NA'....        
+000054c0: 2020 2020 2020 2076 616c 4469 6374 5b22         valDict["
+000054d0: 4461 7461 7479 7065 225d 2e61 7070 656e  Datatype"].appen
+000054e0: 6428 6461 7461 7479 7065 290d 0a20 2020  d(datatype)..   
+000054f0: 2020 2020 2020 2020 2020 2020 7661 6c44              valD
+00005500: 6963 745b 2249 6e73 7472 756d 656e 7422  ict["Instrument"
+00005510: 5d2e 6170 7065 6e64 2869 6e73 7472 756d  ].append(instrum
+00005520: 656e 7429 0d0a 2020 2020 2020 2020 2020  ent)..          
+00005530: 2020 2020 2069 6620 6375 7272 656e 6379       if currency
+00005540: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00005550: 2020 2020 2020 7661 6c44 6963 745b 2743        valDict['C
+00005560: 7572 7265 6e63 7927 5d2e 6170 7065 6e64  urrency'].append
+00005570: 2863 7572 7265 6e63 7929 0d0a 2020 2020  (currency)..    
+00005580: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00005590: 6f6c 4e61 6d65 7320 3d20 2869 6e73 7472  olNames = (instr
+000055a0: 756d 656e 742c 2064 6174 6174 7970 652c  ument, datatype,
+000055b0: 2063 7572 7265 6e63 7929 0d0a 2020 2020   currency)..    
+000055c0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000055d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000055e0: 2020 2020 2063 6f6c 4e61 6d65 7320 3d20       colNames = 
+000055f0: 2869 6e73 7472 756d 656e 742c 2064 6174  (instrument, dat
+00005600: 6174 7970 6529 0d0a 0d0a 2020 2020 2020  atype)....      
+00005610: 2020 2020 2020 2020 2076 616c 7565 7320           values 
+00005620: 3d20 695b 2756 616c 7565 275d 0d0a 2020  = i['Value']..  
+00005630: 2020 2020 2020 2020 2020 2020 2076 616c               val
+00005640: 5479 7065 203d 2069 5b27 5479 7065 275d  Type = i['Type']
+00005650: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00005660: 2020 2023 4861 6e64 6c69 6e67 2061 6c6c     #Handling all
+00005670: 2070 6f73 7369 626c 6520 7479 7065 7320   possible types 
+00005680: 6f66 2064 6174 6120 6173 2070 6572 2044  of data as per D
+00005690: 5353 796d 626f 6c52 6573 706f 6e73 6556  SSymbolResponseV
+000056a0: 616c 7565 5479 7065 0d0a 0d0a 2020 2020  alueType....    
+000056b0: 2020 2020 2020 2020 2020 2023 5468 6573             #Thes
+000056c0: 6520 7661 6c75 6520 7479 7065 7320 7265  e value types re
+000056d0: 7475 726e 2061 6e20 6172 7261 790d 0a20  turn an array.. 
+000056e0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000056f0: 2076 616c 5479 7065 2069 6e20 5b44 5353   valType in [DSS
+00005700: 796d 626f 6c52 6573 706f 6e73 6556 616c  ymbolResponseVal
+00005710: 7565 5479 7065 2e42 6f6f 6c41 7272 6179  ueType.BoolArray
+00005720: 2c20 0d0a 2020 2020 2020 2020 2020 2020  , ..            
+00005730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005740: 2020 4453 5379 6d62 6f6c 5265 7370 6f6e    DSSymbolRespon
+00005750: 7365 5661 6c75 6554 7970 652e 496e 7441  seValueType.IntA
+00005760: 7272 6179 2c20 0d0a 2020 2020 2020 2020  rray, ..        
+00005770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005780: 2020 2020 2020 4453 5379 6d62 6f6c 5265        DSSymbolRe
+00005790: 7370 6f6e 7365 5661 6c75 6554 7970 652e  sponseValueType.
+000057a0: 4461 7465 5469 6d65 4172 7261 792c 0d0a  DateTimeArray,..
+000057b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000057c0: 2020 2020 2020 2020 2020 2020 2020 4453                DS
+000057d0: 5379 6d62 6f6c 5265 7370 6f6e 7365 5661  SymbolResponseVa
+000057e0: 6c75 6554 7970 652e 446f 7562 6c65 4172  lueType.DoubleAr
+000057f0: 7261 792c 0d0a 2020 2020 2020 2020 2020  ray,..          
+00005800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005810: 2020 2020 4453 5379 6d62 6f6c 5265 7370      DSSymbolResp
+00005820: 6f6e 7365 5661 6c75 6554 7970 652e 5374  onseValueType.St
+00005830: 7269 6e67 4172 7261 792c 0d0a 2020 2020  ringArray,..    
+00005840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005850: 2020 2020 2020 2020 2020 4453 5379 6d62            DSSymb
+00005860: 6f6c 5265 7370 6f6e 7365 5661 6c75 6554  olResponseValueT
+00005870: 7970 652e 4f62 6a65 6374 4172 7261 792c  ype.ObjectArray,
+00005880: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000058a0: 4453 5379 6d62 6f6c 5265 7370 6f6e 7365  DSSymbolResponse
+000058b0: 5661 6c75 6554 7970 652e 4e75 6c6c 6162  ValueType.Nullab
+000058c0: 6c65 426f 6f6c 4172 7261 792c 0d0a 2020  leBoolArray,..  
+000058d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000058e0: 2020 2020 2020 2020 2020 2020 4453 5379              DSSy
+000058f0: 6d62 6f6c 5265 7370 6f6e 7365 5661 6c75  mbolResponseValu
+00005900: 6554 7970 652e 4e75 6c6c 6162 6c65 496e  eType.NullableIn
+00005910: 7441 7272 6179 2c0d 0a20 2020 2020 2020  tArray,..       
+00005920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005930: 2020 2020 2020 2044 5353 796d 626f 6c52         DSSymbolR
+00005940: 6573 706f 6e73 6556 616c 7565 5479 7065  esponseValueType
+00005950: 2e4e 756c 6c61 626c 6544 6174 6554 696d  .NullableDateTim
+00005960: 6541 7272 6179 2c0d 0a20 2020 2020 2020  eArray,..       
+00005970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005980: 2020 2020 2020 2044 5353 796d 626f 6c52         DSSymbolR
+00005990: 6573 706f 6e73 6556 616c 7565 5479 7065  esponseValueType
+000059a0: 2e4e 756c 6c61 626c 6544 6f75 626c 6541  .NullableDoubleA
+000059b0: 7272 6179 5d3a 0d0a 2020 2020 2020 2020  rray]:..        
+000059c0: 2020 2020 2020 2020 2020 2020 2354 6865              #The
+000059d0: 2061 7272 6179 2063 616e 2062 6520 6f66   array can be of
+000059e0: 2062 6f6f 6c2c 2064 6f75 626c 652c 2069   bool, double, i
+000059f0: 6e74 2c20 7374 7269 6e67 2c20 6461 7465  nt, string, date
+00005a00: 7320 6f72 204f 626a 6563 740d 0a0d 0a20  s or Object.... 
+00005a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a20: 2020 2023 4368 6563 6b20 6966 2074 6865     #Check if the
+00005a30: 2061 7272 6179 206f 6620 6861 7320 4a53   array of has JS
+00005a40: 4f4e 2064 6174 6520 7374 7269 6e67 2061  ON date string a
+00005a50: 6e64 2063 6f6e 7665 7274 2065 6163 6820  nd convert each 
+00005a60: 746f 2044 6174 6574 696d 650d 0a20 2020  to Datetime..   
+00005a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a80: 2074 656d 7020 3d20 5b73 656c 662e 5f67   temp = [self._g
+00005a90: 6574 5f44 6174 6528 7829 2069 6620 6973  et_Date(x) if is
+00005aa0: 696e 7374 616e 6365 2878 2c20 7374 7229  instance(x, str)
+00005ab0: 2061 6e64 2078 2e73 7461 7274 7377 6974   and x.startswit
+00005ac0: 6828 272f 4461 7465 2827 2920 656c 7365  h('/Date(') else
+00005ad0: 2078 2066 6f72 2078 2069 6e20 7661 6c75   x for x in valu
+00005ae0: 6573 5d0d 0a20 2020 2020 2020 2020 2020  es]..           
+00005af0: 2020 2020 2020 2020 2064 665b 636f 6c4e           df[colN
+00005b00: 616d 6573 5d20 3d20 7465 6d70 0d0a 2020  ames] = temp..  
+00005b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b20: 2020 0d0a 2020 2020 2020 2020 2020 2020    ..            
+00005b30: 2020 2020 2020 2020 6966 206c 656e 2876          if len(v
+00005b40: 616c 7565 7329 203e 2031 3a0d 0a20 2020  alues) > 1:..   
+00005b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b60: 2020 2020 206d 756c 7469 496e 6465 7820       multiIndex 
+00005b70: 3d20 5472 7565 0d0a 2020 2020 2020 2020  = True..        
+00005b80: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00005b90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00005ba0: 2020 2020 2020 2020 2020 206d 756c 7469             multi
+00005bb0: 496e 6465 7820 3d20 4661 6c73 650d 0a20  Index = False.. 
+00005bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005bd0: 2020 2020 2020 2076 616c 4469 6374 5b22         valDict["
+00005be0: 5661 6c75 6522 5d2e 6170 7065 6e64 2876  Value"].append(v
+00005bf0: 616c 7565 735b 305d 2920 200d 0a0d 0a20  alues[0])  .... 
+00005c00: 2020 2020 2020 2020 2020 2020 2020 2354                #T
+00005c10: 6865 7365 2076 616c 7565 2074 7970 6573  hese value types
+00005c20: 2072 6574 7572 6e20 7369 6e67 6c65 2076   return single v
+00005c30: 616c 7565 0d0a 2020 2020 2020 2020 2020  alue..          
+00005c40: 2020 2020 2065 6c69 6620 7661 6c54 7970       elif valTyp
+00005c50: 6520 696e 205b 4453 5379 6d62 6f6c 5265  e in [DSSymbolRe
+00005c60: 7370 6f6e 7365 5661 6c75 6554 7970 652e  sponseValueType.
+00005c70: 456d 7074 792c 0d0a 2020 2020 2020 2020  Empty,..        
+00005c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005c90: 2020 2020 2020 2020 4453 5379 6d62 6f6c          DSSymbol
+00005ca0: 5265 7370 6f6e 7365 5661 6c75 6554 7970  ResponseValueTyp
+00005cb0: 652e 426f 6f6c 2c0d 0a20 2020 2020 2020  e.Bool,..       
+00005cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005cd0: 2020 2020 2020 2020 2044 5353 796d 626f           DSSymbo
+00005ce0: 6c52 6573 706f 6e73 6556 616c 7565 5479  lResponseValueTy
+00005cf0: 7065 2e49 6e74 2c0d 0a20 2020 2020 2020  pe.Int,..       
+00005d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005d10: 2020 2020 2020 2020 2044 5353 796d 626f           DSSymbo
+00005d20: 6c52 6573 706f 6e73 6556 616c 7565 5479  lResponseValueTy
+00005d30: 7065 2e44 6174 6554 696d 652c 0d0a 2020  pe.DateTime,..  
+00005d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005d50: 2020 2020 2020 2020 2020 2020 2020 4453                DS
+00005d60: 5379 6d62 6f6c 5265 7370 6f6e 7365 5661  SymbolResponseVa
+00005d70: 6c75 6554 7970 652e 446f 7562 6c65 2c0d  lueType.Double,.
+00005d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005da0: 2044 5353 796d 626f 6c52 6573 706f 6e73   DSSymbolRespons
+00005db0: 6556 616c 7565 5479 7065 2e53 7472 696e  eValueType.Strin
+00005dc0: 675d 3a0d 0a20 2020 2020 2020 2020 2020  g]:..           
+00005dd0: 2020 2020 2020 2020 7465 6d70 203d 2073          temp = s
+00005de0: 656c 662e 5f67 6574 5f44 6174 6528 7661  elf._get_Date(va
+00005df0: 6c75 6573 2920 6966 2069 7369 6e73 7461  lues) if isinsta
+00005e00: 6e63 6528 7661 6c75 6573 2c20 7374 7229  nce(values, str)
+00005e10: 2061 6e64 2076 616c 7565 732e 7374 6172   and values.star
+00005e20: 7473 7769 7468 2827 2f44 6174 6528 2729  tswith('/Date(')
+00005e30: 2065 6c73 6520 7661 6c75 6573 200d 0a20   else values .. 
+00005e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005e50: 2020 7661 6c44 6963 745b 2256 616c 7565    valDict["Value
+00005e60: 225d 2e61 7070 656e 6428 7465 6d70 290d  "].append(temp).
+00005e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005e80: 656c 6966 2076 616c 5479 7065 203d 3d20  elif valType == 
+00005e90: 4453 5379 6d62 6f6c 5265 7370 6f6e 7365  DSSymbolResponse
+00005ea0: 5661 6c75 6554 7970 652e 4572 726f 723a  ValueType.Error:
+00005eb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005ec0: 2020 2020 2020 2023 4572 726f 7220 5265         #Error Re
+00005ed0: 7475 726e 6564 0d0a 2020 2020 2020 2020  turned..        
+00005ee0: 2020 2020 2020 2020 2020 2020 2076 616c               val
+00005ef0: 4469 6374 5b22 5661 6c75 6522 5d2e 6170  Dict["Value"].ap
+00005f00: 7065 6e64 2876 616c 7565 7329 0d0a 0d0a  pend(values)....
+00005f10: 2020 2020 2020 2020 6966 206d 756c 7469          if multi
+00005f20: 496e 6465 783a 0d0a 2020 2020 2020 2020  Index:..        
+00005f30: 2020 2020 6966 2063 7572 7265 6e63 793a      if currency:
+00005f40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005f50: 2020 2064 662e 636f 6c75 6d6e 7320 3d20     df.columns = 
+00005f60: 7064 2e4d 756c 7469 496e 6465 782e 6672  pd.MultiIndex.fr
+00005f70: 6f6d 5f74 7570 6c65 7328 6466 2e63 6f6c  om_tuples(df.col
+00005f80: 756d 6e73 2c20 6e61 6d65 733d 5b27 496e  umns, names=['In
+00005f90: 7374 7275 6d65 6e74 272c 2746 6965 6c64  strument','Field
+00005fa0: 272c 2743 7572 7265 6e63 7927 5d29 0d0a  ','Currency'])..
+00005fb0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00005fc0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00005fd0: 2020 2020 6466 2e63 6f6c 756d 6e73 203d      df.columns =
+00005fe0: 2070 642e 4d75 6c74 6949 6e64 6578 2e66   pd.MultiIndex.f
+00005ff0: 726f 6d5f 7475 706c 6573 2864 662e 636f  rom_tuples(df.co
+00006000: 6c75 6d6e 732c 206e 616d 6573 3d5b 2749  lumns, names=['I
+00006010: 6e73 7472 756d 656e 7427 2c27 4669 656c  nstrument','Fiel
+00006020: 6427 5d29 0d0a 2020 2020 2020 2020 2020  d'])..          
+00006030: 2020 2020 2020 2020 200d 0a20 2020 2020           ..     
+00006040: 2020 2069 6620 6e6f 7420 6d75 6c74 6949     if not multiI
+00006050: 6e64 6578 3a0d 0a20 2020 2020 2020 2020  ndex:..         
+00006060: 2020 2069 6e64 6578 4c65 6e20 3d20 7261     indexLen = ra
+00006070: 6e67 6528 6c65 6e28 7661 6c44 6963 745b  nge(len(valDict[
+00006080: 2749 6e73 7472 756d 656e 7427 5d29 290d  'Instrument'])).
+00006090: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000060a0: 7661 6c44 6963 745b 2743 7572 7265 6e63  valDict['Currenc
+000060b0: 7927 5d3a 0d0a 2020 2020 2020 2020 2020  y']:..          
+000060c0: 2020 2020 2020 6e65 7764 6620 3d20 7064        newdf = pd
+000060d0: 2e44 6174 6146 7261 6d65 2864 6174 613d  .DataFrame(data=
+000060e0: 7661 6c44 6963 742c 636f 6c75 6d6e 733d  valDict,columns=
+000060f0: 5b22 496e 7374 7275 6d65 6e74 222c 2022  ["Instrument", "
+00006100: 4461 7461 7479 7065 222c 2022 5661 6c75  Datatype", "Valu
+00006110: 6522 2c20 2243 7572 7265 6e63 7922 5d2c  e", "Currency"],
+00006120: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006140: 2020 2069 6e64 6578 3d69 6e64 6578 4c65     index=indexLe
+00006150: 6e29 0d0a 2020 2020 2020 2020 2020 2020  n)..            
+00006160: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00006170: 2020 2020 2020 206e 6577 6466 203d 2070         newdf = p
+00006180: 642e 4461 7461 4672 616d 6528 6461 7461  d.DataFrame(data
+00006190: 3d76 616c 4469 6374 2c63 6f6c 756d 6e73  =valDict,columns
+000061a0: 3d5b 2249 6e73 7472 756d 656e 7422 2c20  =["Instrument", 
+000061b0: 2244 6174 6174 7970 6522 2c20 2256 616c  "Datatype", "Val
+000061c0: 7565 225d 2c0d 0a20 2020 2020 2020 2020  ue"],..         
+000061d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000061e0: 2020 2020 2020 2020 696e 6465 783d 696e          index=in
+000061f0: 6465 784c 656e 290d 0a20 2020 2020 2020  dexLen)..       
+00006200: 2020 2020 2072 6574 7572 6e20 6e65 7764       return newd
+00006210: 660d 0a20 2020 2020 2020 2072 6574 7572  f..        retur
+00006220: 6e20 6466 200d 0a20 2020 2020 2020 2020  n df ..         
+00006230: 2020 200d 0a20 2020 2064 6566 205f 666f     ..    def _fo
+00006240: 726d 6174 5f52 6573 706f 6e73 6528 7365  rmat_Response(se
+00006250: 6c66 2c20 7265 7370 6f6e 7365 5f6a 736f  lf, response_jso
+00006260: 6e29 3a0d 0a20 2020 2020 2020 2023 2049  n):..        # I
+00006270: 6620 6461 7465 7320 6973 206e 6f74 2061  f dates is not a
+00006280: 7661 696c 6162 6c65 2c20 7468 6520 7265  vailable, the re
+00006290: 7175 6573 7420 6973 206e 6f74 2063 6f6e  quest is not con
+000062a0: 7374 7275 6374 6564 2063 6f72 7265 6374  structed correct
+000062b0: 6c79 0d0a 2020 2020 2020 2020 7265 7370  ly..        resp
+000062c0: 6f6e 7365 5f6a 736f 6e20 3d20 6469 6374  onse_json = dict
+000062d0: 2872 6573 706f 6e73 655f 6a73 6f6e 290d  (response_json).
+000062e0: 0a20 2020 2020 2020 2069 6620 2744 6174  .        if 'Dat
+000062f0: 6573 2720 696e 2072 6573 706f 6e73 655f  es' in response_
+00006300: 6a73 6f6e 3a0d 0a20 2020 2020 2020 2020  json:..         
+00006310: 2020 2064 6174 6573 5f63 6f6e 7665 7274     dates_convert
+00006320: 6564 203d 205b 5d0d 0a20 2020 2020 2020  ed = []..       
+00006330: 2020 2020 2069 6620 7265 7370 6f6e 7365       if response
+00006340: 5f6a 736f 6e5b 2744 6174 6573 275d 2021  _json['Dates'] !
+00006350: 3d20 4e6f 6e65 3a0d 0a20 2020 2020 2020  = None:..       
+00006360: 2020 2020 2020 2020 2064 6174 6573 203d           dates =
+00006370: 2072 6573 706f 6e73 655f 6a73 6f6e 5b27   response_json['
+00006380: 4461 7465 7327 5d0d 0a20 2020 2020 2020  Dates']..       
+00006390: 2020 2020 2020 2020 2066 6f72 2064 2069           for d i
+000063a0: 6e20 6461 7465 733a 0d0a 2020 2020 2020  n dates:..      
+000063b0: 2020 2020 2020 2020 2020 2020 2020 6461                da
+000063c0: 7465 735f 636f 6e76 6572 7465 642e 6170  tes_converted.ap
+000063d0: 7065 6e64 2873 656c 662e 5f67 6574 5f44  pend(self._get_D
+000063e0: 6174 6528 6429 290d 0a20 2020 2020 2020  ate(d))..       
+000063f0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00006400: 2020 2020 7265 7475 726e 2027 4572 726f      return 'Erro
+00006410: 7220 2d20 706c 6561 7365 2063 6865 636b  r - please check
+00006420: 2069 6e73 7472 756d 656e 7473 2061 6e64   instruments and
+00006430: 2070 6172 616d 6574 6572 7320 2874 696d   parameters (tim
+00006440: 6520 7365 7269 6573 206f 7220 7374 6174  e series or stat
+00006450: 6963 2927 0d0a 2020 2020 2020 2020 0d0a  ic)'..        ..
+00006460: 2020 2020 2020 2020 2320 4c6f 6f70 2074          # Loop t
+00006470: 6872 6f75 6768 2074 6865 2076 616c 7565  hrough the value
+00006480: 7320 696e 2074 6865 2072 6573 706f 6e73  s in the respons
+00006490: 650d 0a20 2020 2020 2020 2064 6174 6166  e..        dataf
+000064a0: 7261 6d65 203d 2073 656c 662e 5f67 6574  rame = self._get
+000064b0: 5f44 6174 6174 7970 6556 616c 7565 7328  _DatatypeValues(
+000064c0: 7265 7370 6f6e 7365 5f6a 736f 6e29 0d0a  response_json)..
+000064d0: 2020 2020 2020 2020 6966 2028 6c65 6e28          if (len(
+000064e0: 6461 7465 735f 636f 6e76 6572 7465 6429  dates_converted)
+000064f0: 203d 3d20 6c65 6e28 6461 7461 6672 616d   == len(datafram
+00006500: 652e 696e 6465 7829 293a 0d0a 2020 2020  e.index)):..    
+00006510: 2020 2020 2020 2020 6461 7461 6672 616d          datafram
+00006520: 652e 696e 6465 782e 6e61 6d65 203d 2027  e.index.name = '
+00006530: 4461 7465 7327 0d0a 2020 2020 2020 2020  Dates'..        
+00006540: 2020 2020 6461 7461 6672 616d 652e 696e      dataframe.in
+00006550: 6465 7820 3d20 6461 7465 735f 636f 6e76  dex = dates_conv
+00006560: 6572 7465 640d 0a20 2020 2020 2020 2065  erted..        e
+00006570: 6c69 6620 286c 656e 2864 6174 6573 5f63  lif (len(dates_c
+00006580: 6f6e 7665 7274 6564 2920 3d3d 2031 293a  onverted) == 1):
+00006590: 0d0a 2020 2020 2020 2020 2020 2020 6461  ..            da
+000065a0: 7461 6672 616d 655b 2744 6174 6573 275d  taframe['Dates']
+000065b0: 203d 2064 6174 6573 5f63 6f6e 7665 7274   = dates_convert
+000065c0: 6564 5b30 5d0d 0a20 2020 2020 2020 2020  ed[0]..         
+000065d0: 2020 2069 6620 286c 656e 2864 6174 6166     if (len(dataf
+000065e0: 7261 6d65 2e69 6e64 6578 2920 3e20 6c65  rame.index) > le
+000065f0: 6e28 6461 7465 735f 636f 6e76 6572 7465  n(dates_converte
+00006600: 6429 293a 0d0a 2020 2020 2020 2020 2020  d)):..          
+00006610: 2020 2020 2020 6461 7461 6672 616d 652e        dataframe.
+00006620: 696e 6465 7820 3d20 6461 7461 6672 616d  index = datafram
+00006630: 655b 2744 6174 6573 275d 0d0a 2020 2020  e['Dates']..    
+00006640: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00006650: 6672 616d 6520 3d20 6461 7461 6672 616d  frame = datafram
+00006660: 652e 6472 6f70 2863 6f6c 756d 6e73 3d27  e.drop(columns='
+00006670: 4461 7465 7327 2c20 6178 6973 203d 2031  Dates', axis = 1
+00006680: 290d 0a20 2020 2020 2020 200d 0a20 2020  )..        ..   
+00006690: 2020 2020 200d 0a20 2020 2020 2020 2020       ..         
+000066a0: 2020 200d 0a20 2020 2020 2020 2023 2020     ..        #  
+000066b0: 2020 6966 2028 6c65 6e28 6461 7465 735f    if (len(dates_
+000066c0: 636f 6e76 6572 7465 6429 203e 2031 293a  converted) > 1):
+000066d0: 0d0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
+000066e0: 2020 2023 6461 7461 6672 616d 652e 696e     #dataframe.in
+000066f0: 7365 7274 286c 6f63 203d 2030 2c20 636f  sert(loc = 0, co
+00006700: 6c75 6d6e 203d 2027 4461 7465 7327 2c20  lumn = 'Dates', 
+00006710: 7661 6c75 6520 3d20 6461 7465 735f 636f  value = dates_co
+00006720: 6e76 6572 7465 6429 0d0a 2020 2020 2020  nverted)..      
+00006730: 2020 2320 2020 2020 2020 2064 6174 6166    #        dataf
+00006740: 7261 6d65 2e69 6e64 6578 203d 2064 6174  rame.index = dat
+00006750: 6573 5f63 6f6e 7665 7274 6564 0d0a 2020  es_converted..  
+00006760: 2020 2020 2020 2320 2020 2020 2020 2064        #        d
+00006770: 6174 6166 7261 6d65 2e69 6e64 6578 2e6e  ataframe.index.n
+00006780: 616d 6520 3d20 2744 6174 6573 270d 0a20  ame = 'Dates'.. 
+00006790: 2020 2020 2020 2023 656c 6966 2028 6c65         #elif (le
+000067a0: 6e28 6461 7465 735f 636f 6e76 6572 7465  n(dates_converte
+000067b0: 6429 203d 3d20 3129 3a0d 0a20 2020 2020  d) == 1):..     
+000067c0: 2020 2023 2020 2020 6461 7461 6672 616d     #    datafram
+000067d0: 655b 2744 6174 6573 275d 203d 2064 6174  e['Dates'] = dat
+000067e0: 6573 5f63 6f6e 7665 7274 6564 5b30 5d0d  es_converted[0].
+000067f0: 0a20 2020 2020 2020 200d 0a20 2020 2020  .        ..     
+00006800: 2020 2072 6574 7572 6e20 6461 7461 6672     return datafr
+00006810: 616d 650d 0a0d 0a20 2020 2064 6566 205f  ame....    def _
+00006820: 666f 726d 6174 5f62 756e 646c 655f 7265  format_bundle_re
+00006830: 7370 6f6e 7365 2873 656c 662c 7265 7370  sponse(self,resp
+00006840: 6f6e 7365 5f6a 736f 6e29 3a0d 0a20 2020  onse_json):..   
+00006850: 2020 2020 2066 6f72 6d61 7474 6564 5265       formattedRe
+00006860: 7370 203d 205b 5d0d 0a20 2020 2020 2020  sp = []..       
+00006870: 2066 6f72 2065 6163 6844 6174 6152 6573   for eachDataRes
+00006880: 706f 6e73 6520 696e 2072 6573 706f 6e73  ponse in respons
+00006890: 655f 6a73 6f6e 5b27 4461 7461 5265 7370  e_json['DataResp
+000068a0: 6f6e 7365 7327 5d3a 0d0a 2020 2020 2020  onses']:..      
+000068b0: 2020 2020 2020 6466 203d 2073 656c 662e        df = self.
+000068c0: 5f66 6f72 6d61 745f 5265 7370 6f6e 7365  _format_Response
+000068d0: 2865 6163 6844 6174 6152 6573 706f 6e73  (eachDataRespons
+000068e0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+000068f0: 666f 726d 6174 7465 6452 6573 702e 6170  formattedResp.ap
+00006900: 7065 6e64 2864 6629 2020 2020 2020 0d0a  pend(df)      ..
+00006910: 2020 2020 2020 2020 2020 200d 0a20 2020             ..   
+00006920: 2020 2020 2072 6574 7572 6e20 666f 726d       return form
+00006930: 6174 7465 6452 6573 700d 0a20 2020 0d0a  attedResp..   ..
+00006940: 2020 2020 2020 200d 0a20 2020 2064 6566         ..    def
+00006950: 205f 6765 745f 6d65 7461 6461 7461 2873   _get_metadata(s
+00006960: 656c 662c 206a 736f 6e52 6573 7029 3a0d  elf, jsonResp):.
+00006970: 0a20 2020 2020 2020 206e 616d 6573 203d  .        names =
+00006980: 207b 7d0d 0a20 2020 2020 2020 2069 6620   {}..        if 
+00006990: 6a73 6f6e 5265 7370 5b27 5379 6d62 6f6c  jsonResp['Symbol
+000069a0: 4e61 6d65 7327 5d3a 0d0a 2020 2020 2020  Names']:..      
+000069b0: 2020 2020 2020 666f 7220 6920 696e 206a        for i in j
+000069c0: 736f 6e52 6573 705b 2753 796d 626f 6c4e  sonResp['SymbolN
+000069d0: 616d 6573 275d 3a0d 0a20 2020 2020 2020  ames']:..       
+000069e0: 2020 2020 2020 2020 206e 616d 6573 2e75           names.u
+000069f0: 7064 6174 6528 7b69 5b27 4b65 7927 5d3a  pdate({i['Key']:
+00006a00: 2069 5b27 5661 6c75 6527 5d7d 290d 0a20   i['Value']}).. 
+00006a10: 2020 2020 2020 2020 2020 2020 2020 200d                 .
+00006a20: 0a20 2020 2020 2020 2069 6620 6a73 6f6e  .        if json
+00006a30: 5265 7370 5b27 4461 7461 5479 7065 4e61  Resp['DataTypeNa
+00006a40: 6d65 7327 5d3a 0d0a 2020 2020 2020 2020  mes']:..        
+00006a50: 2020 2020 666f 7220 6920 696e 206a 736f      for i in jso
+00006a60: 6e52 6573 705b 2744 6174 6154 7970 654e  nResp['DataTypeN
+00006a70: 616d 6573 275d 3a0d 0a20 2020 2020 2020  ames']:..       
+00006a80: 2020 2020 2020 2020 206e 616d 6573 2e75           names.u
+00006a90: 7064 6174 6528 7b69 5b27 4b65 7927 5d3a  pdate({i['Key']:
+00006aa0: 2069 5b27 5661 6c75 6527 5d7d 290d 0a20   i['Value']}).. 
+00006ab0: 2020 2020 2020 2070 7269 6e74 286e 616d         print(nam
+00006ac0: 6573 290d 0a20 2020 2020 2020 200d 0a0d  es)..        ...
+00006ad0: 0a20 2020 2064 6566 205f 6765 745f 6d65  .    def _get_me
+00006ae0: 7461 6461 7461 5f62 756e 646c 6528 7365  tadata_bundle(se
+00006af0: 6c66 2c20 6a73 6f6e 5265 7370 293a 0d0a  lf, jsonResp):..
+00006b00: 2020 2020 2020 2020 666f 7220 6561 6368          for each
+00006b10: 4461 7461 5265 7370 6f6e 7365 2069 6e20  DataResponse in 
+00006b20: 6a73 6f6e 5265 7370 3a0d 0a20 2020 2020  jsonResp:..     
+00006b30: 2020 2020 2020 2073 656c 662e 5f67 6574         self._get
+00006b40: 5f6d 6574 6164 6174 6128 6561 6368 4461  _metadata(eachDa
+00006b50: 7461 5265 7370 6f6e 7365 290d 0a23 2d2d  taResponse)..#--
 00006b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006ba0: 2d2d 2d2d 0d0a 0d0a                      ----....
+00006ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006bb0: 2d2d 2d0d 0a0d 0a                        ---....
```

## Comparing `DatastreamPy-2.0.25.dist-info/METADATA` & `DatastreamPy-2.0.26.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: DatastreamPy
-Version: 2.0.25
+Version: 2.0.26
 Summary: Python package for Datastream Web Services API
 Author: LSEG
 Author-email: datastreamapi@lseg.com
 License: Apache Software License (http://www.apache.org/licenses/LICENSE-2.0)
 Requires-Python: >=3
 Description-Content-Type: text/markdown
 Requires-Dist: pandas
```

## Comparing `DatastreamPy-2.0.25.dist-info/RECORD` & `DatastreamPy-2.0.26.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 DatastreamPy/DSConnect.py,sha256=fyKii7eJU95M3Xsm-SB-2GgvJg_2_NHOVZ3sFmQ_0ik,16190
-DatastreamPy/DSUserDataObjectBase.py,sha256=N0BCQ8LI8O3UW0GD3MYBwuXe47UREIug_kc0xzXCW5U,22949
+DatastreamPy/DSUserDataObjectBase.py,sha256=raqx67DuIA5cHM9idAPzQI01vP0qC4O7wuYYRSGwYvA,22949
 DatastreamPy/DS_Requests.py,sha256=uPFJe8C54guWFSZS8tvQNsn00hnUF7ipVNX8JtAAzxo,5633
-DatastreamPy/DS_Response.py,sha256=i4ea2RYq6gs-oKTknv-fq2RZUxszqRnbSIrHuqfts5A,27560
+DatastreamPy/DS_Response.py,sha256=0A_dCctKfyq4a65Uz4nV5EF6eu8lCD3b3mF1UO70p78,27575
 DatastreamPy/DatastreamEconomicFilters.py,sha256=73gTd_naqDrTW6DH2QXQ2tc5C_uTEvwSZi8w-CpHPdY,60200
 DatastreamPy/DatastreamUserCreated_TimeSeries.py,sha256=nVgv0IhgMu5_FiSrA3lpcE3248gNasdWIl0-iMJ71zo,52895
 DatastreamPy/__init__.py,sha256=EoZTqqEHz9OQbUFrGYtT-80Nw8WV5BYGUgxsvKvIV2U,1041
-DatastreamPy-2.0.25.dist-info/METADATA,sha256=W-tpafc5mVrz4DB24ueiHyhWY_yc2OR60me1DuijUyg,27395
-DatastreamPy-2.0.25.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
-DatastreamPy-2.0.25.dist-info/top_level.txt,sha256=B3hGJALzw6vwaMsJGwuxz537PgGsGd3KUkSh0OvQcAc,13
-DatastreamPy-2.0.25.dist-info/RECORD,,
+DatastreamPy-2.0.26.dist-info/METADATA,sha256=aVpL6f6SgTKH9dD5TOezfw30cCNvpNzYkx7Ub7RHeF0,27395
+DatastreamPy-2.0.26.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
+DatastreamPy-2.0.26.dist-info/top_level.txt,sha256=B3hGJALzw6vwaMsJGwuxz537PgGsGd3KUkSh0OvQcAc,13
+DatastreamPy-2.0.26.dist-info/RECORD,,
```

