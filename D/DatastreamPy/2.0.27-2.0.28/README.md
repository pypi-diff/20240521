# Comparing `tmp/DatastreamPy-2.0.27-py3-none-any.whl.zip` & `tmp/DatastreamPy-2.0.28-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,13 +1,13 @@
 Zip file size: 51262 bytes, number of entries: 11
 -rw-rw-rw-  2.0 fat    16190 b- defN 24-May-02 11:26 DatastreamPy/DSConnect.py
--rw-rw-rw-  2.0 fat    22949 b- defN 24-May-21 09:28 DatastreamPy/DSUserDataObjectBase.py
+-rw-rw-rw-  2.0 fat    22949 b- defN 24-May-21 09:47 DatastreamPy/DSUserDataObjectBase.py
 -rw-rw-rw-  2.0 fat     5633 b- defN 24-May-02 11:26 DatastreamPy/DS_Requests.py
--rw-rw-rw-  2.0 fat    27566 b- defN 24-May-21 09:26 DatastreamPy/DS_Response.py
+-rw-rw-rw-  2.0 fat    27581 b- defN 24-May-21 09:43 DatastreamPy/DS_Response.py
 -rw-rw-rw-  2.0 fat    60200 b- defN 24-May-02 11:26 DatastreamPy/DatastreamEconomicFilters.py
 -rw-rw-rw-  2.0 fat    52895 b- defN 24-May-02 11:26 DatastreamPy/DatastreamUserCreated_TimeSeries.py
 -rw-rw-rw-  2.0 fat     1041 b- defN 24-May-02 11:26 DatastreamPy/__init__.py
--rw-rw-rw-  2.0 fat    27395 b- defN 24-May-21 09:29 DatastreamPy-2.0.27.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 24-May-21 09:29 DatastreamPy-2.0.27.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       13 b- defN 24-May-21 09:29 DatastreamPy-2.0.27.dist-info/top_level.txt
--rw-rw-r--  2.0 fat      955 b- defN 24-May-21 09:29 DatastreamPy-2.0.27.dist-info/RECORD
-11 files, 214929 bytes uncompressed, 49644 bytes compressed:  76.9%
+-rw-rw-rw-  2.0 fat    27395 b- defN 24-May-21 09:47 DatastreamPy-2.0.28.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-May-21 09:47 DatastreamPy-2.0.28.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       13 b- defN 24-May-21 09:47 DatastreamPy-2.0.28.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat      955 b- defN 24-May-21 09:47 DatastreamPy-2.0.28.dist-info/RECORD
+11 files, 214944 bytes uncompressed, 49644 bytes compressed:  76.9%
```

## zipnote {}

```diff
@@ -15,20 +15,20 @@
 
 Filename: DatastreamPy/DatastreamUserCreated_TimeSeries.py
 Comment: 
 
 Filename: DatastreamPy/__init__.py
 Comment: 
 
-Filename: DatastreamPy-2.0.27.dist-info/METADATA
+Filename: DatastreamPy-2.0.28.dist-info/METADATA
 Comment: 
 
-Filename: DatastreamPy-2.0.27.dist-info/WHEEL
+Filename: DatastreamPy-2.0.28.dist-info/WHEEL
 Comment: 
 
-Filename: DatastreamPy-2.0.27.dist-info/top_level.txt
+Filename: DatastreamPy-2.0.28.dist-info/top_level.txt
 Comment: 
 
-Filename: DatastreamPy-2.0.27.dist-info/RECORD
+Filename: DatastreamPy-2.0.28.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## DatastreamPy/DSUserDataObjectBase.py

```diff
@@ -20,15 +20,15 @@
 from enum import IntEnum
 import pytz
 import json
 import re
 from datetime import datetime, timedelta, date
 
 class DSPackageInfo:
-    buildVer = '2.0.27'
+    buildVer = '2.0.28'
     appId = 'DatastreamPy-' + buildVer
     UserAgent = ' DatastreamPy/' + buildVer
 
 class DSUserObjectFault(Exception):
     """
     DSUserObjectFault exception is a representation of the DSFault error returned from the API server.
     DSFaults are returned for the following reasons:
```

## DatastreamPy/DS_Response.py

```diff
@@ -538,1186 +538,1187 @@
 00002190: 2020 2020 2020 206b 696e 643a 2069 6e74         kind: int
 000021a0: 2c20 6465 6661 756c 7420 312c 2069 6e64  , default 1, ind
 000021b0: 6963 6174 6573 2054 696d 6573 6572 6965  icates Timeserie
 000021c0: 7320 6173 206f 7574 7075 740d 0a0d 0a20  s as output.... 
 000021d0: 2020 2020 2020 2020 2052 6574 7572 6e73           Returns
 000021e0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
 000021f0: 2020 2020 2044 6963 7469 6f6e 6172 7922       Dictionary"
-00002200: 2222 0d0a 0d0a 2020 2020 2020 2020 2020  ""....          
-00002210: 2020 0d0a 2020 2020 2020 2020 6966 2066    ..        if f
-00002220: 6965 6c64 7320 3d3d 204e 6f6e 653a 0d0a  ields == None:..
-00002230: 2020 2020 2020 2020 2020 2020 6669 656c              fiel
-00002240: 6473 3d5b 5d0d 0a20 2020 2020 2020 200d  ds=[]..        .
-00002250: 0a20 2020 2020 2020 2069 6e64 6578 203d  .        index =
-00002260: 2074 6963 6b65 7273 2e72 6669 6e64 2827   tickers.rfind('
-00002270: 7c27 290d 0a20 2020 2020 2020 2070 726f  |')..        pro
-00002280: 704c 6973 7420 3d20 5b5d 0d0a 2020 2020  pList = []..    
-00002290: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-000022a0: 2020 2020 2020 6966 2069 6e64 6578 203d        if index =
-000022b0: 3d20 2d31 3a0d 0a20 2020 2020 2020 2020  = -1:..         
-000022c0: 2020 2020 2020 2069 6e73 7472 756d 656e         instrumen
-000022d0: 7420 3d20 496e 7374 7275 6d65 6e74 2874  t = Instrument(t
-000022e0: 6963 6b65 7273 2c20 4e6f 6e65 290d 0a20  ickers, None).. 
-000022f0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00002300: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00002310: 2020 2347 6574 2061 6c6c 2074 6865 2070    #Get all the p
-00002320: 726f 7065 7274 6965 7320 6f66 2074 6865  roperties of the
-00002330: 2069 6e73 7472 756d 656e 740d 0a20 2020   instrument..   
-00002340: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
-00002350: 7470 726f 7073 203d 205b 5d0d 0a20 2020  tprops = []..   
-00002360: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00002370: 7469 636b 6572 735b 696e 6465 782b 313a  tickers[index+1:
-00002380: 5d2e 7266 696e 6428 272c 2729 2021 3d20  ].rfind(',') != 
-00002390: 2d31 3a0d 0a20 2020 2020 2020 2020 2020  -1:..           
-000023a0: 2020 2020 2020 2020 2070 726f 704c 6973           propLis
-000023b0: 7420 3d20 7469 636b 6572 735b 696e 6465  t = tickers[inde
-000023c0: 782b 313a 5d2e 7370 6c69 7428 272c 2729  x+1:].split(',')
-000023d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000023e0: 2020 2020 2020 666f 7220 6561 6368 5072        for eachPr
-000023f0: 6f70 2069 6e20 7072 6f70 4c69 7374 3a0d  op in propList:.
-00002400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002410: 2020 2020 2020 2020 2069 6e73 7470 726f           instpro
-00002420: 7073 2e61 7070 656e 6428 5072 6f70 6572  ps.append(Proper
-00002430: 7469 6573 2865 6163 6850 726f 702c 2054  ties(eachProp, T
-00002440: 7275 6529 290d 0a20 2020 2020 2020 2020  rue))..         
-00002450: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00002460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002470: 2020 7072 6f70 4c69 7374 2e61 7070 656e    propList.appen
-00002480: 6428 7469 636b 6572 735b 696e 6465 782b  d(tickers[index+
-00002490: 313a 5d29 0d0a 2020 2020 2020 2020 2020  1:])..          
-000024a0: 2020 2020 2020 2020 2020 696e 7374 7072            instpr
-000024b0: 6f70 732e 6170 7065 6e64 2850 726f 7065  ops.append(Prope
-000024c0: 7274 6965 7328 7469 636b 6572 735b 696e  rties(tickers[in
-000024d0: 6465 782b 313a 5d2c 2054 7275 6529 290d  dex+1:], True)).
-000024e0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000024f0: 2020 2069 6e73 7472 756d 656e 7420 3d20     instrument = 
-00002500: 496e 7374 7275 6d65 6e74 2874 6963 6b65  Instrument(ticke
-00002510: 7273 5b30 3a69 6e64 6578 5d2c 2069 6e73  rs[0:index], ins
-00002520: 7470 726f 7073 290d 0a20 2020 2020 2020  tprops)..       
-00002530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002540: 200d 0a20 2020 2020 2020 2020 2020 2064   ..            d
-00002550: 6174 7970 6573 3d5b 5d0d 0a20 2020 2020  atypes=[]..     
-00002560: 2020 2020 2020 2069 6620 274e 2720 696e         if 'N' in
-00002570: 2070 726f 704c 6973 743a 0d0a 2020 2020   propList:..    
-00002580: 2020 2020 2020 2020 2020 2020 7072 6f70              prop
-00002590: 203d 205b 7b27 4b65 7927 3a27 5265 7475   = [{'Key':'Retu
-000025a0: 726e 4e61 6d65 272c 2027 5661 6c75 6527  rnName', 'Value'
-000025b0: 3a54 7275 657d 5d20 0d0a 2020 2020 2020  :True}] ..      
-000025c0: 2020 2020 2020 2020 2020 7265 744e 616d            retNam
-000025d0: 6520 3d20 5472 7565 0d0a 2020 2020 2020  e = True..      
-000025e0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-000025f0: 2020 2020 2020 2020 2020 2020 2070 726f               pro
-00002600: 7020 3d20 4e6f 6e65 0d0a 0d0a 2020 2020  p = None....    
-00002610: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
-00002620: 2020 2020 2020 6966 206c 656e 2866 6965        if len(fie
-00002630: 6c64 7329 203e 2030 3a0d 0a20 2020 2020  lds) > 0:..     
-00002640: 2020 2020 2020 2020 2020 2066 6f72 2065             for e
-00002650: 6163 6844 7479 7065 2069 6e20 6669 656c  achDtype in fiel
-00002660: 6473 3a0d 0a20 2020 2020 2020 2020 2020  ds:..           
-00002670: 2020 2020 2020 2020 2064 6174 7970 6573           datypes
-00002680: 2e61 7070 656e 6428 4461 7461 5479 7065  .append(DataType
-00002690: 2865 6163 6844 7479 7065 2c20 7072 6f70  (eachDtype, prop
-000026a0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-000026b0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-000026c0: 2020 2020 2020 2064 6174 7970 6573 2e61         datypes.a
-000026d0: 7070 656e 6428 4461 7461 5479 7065 2866  ppend(DataType(f
-000026e0: 6965 6c64 732c 2070 726f 7029 290d 0a20  ields, prop)).. 
-000026f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002700: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
-00002710: 2020 2020 2064 6174 6520 3d20 4461 7465       date = Date
-00002720: 2873 7461 7274 2c20 6672 6571 2c20 656e  (start, freq, en
-00002730: 642c 206b 696e 6429 0d0a 2020 2020 2020  d, kind)..      
-00002740: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00002750: 7b22 496e 7374 7275 6d65 6e74 223a 696e  {"Instrument":in
-00002760: 7374 7275 6d65 6e74 2c22 4461 7461 5479  strument,"DataTy
-00002770: 7065 7322 3a64 6174 7970 6573 2c22 4461  pes":datypes,"Da
-00002780: 7465 223a 6461 7465 7d0d 0a20 2020 2020  te":date}..     
-00002790: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-000027a0: 7175 6573 742c 2072 6574 4e61 6d65 0d0a  quest, retName..
-000027b0: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-000027c0: 7863 6570 7469 6f6e 2061 7320 6578 703a  xception as exp:
-000027d0: 0d0a 2020 2020 2020 2020 2020 2020 4453  ..            DS
-000027e0: 5573 6572 4f62 6a65 6374 4c6f 6746 756e  UserObjectLogFun
-000027f0: 6373 2e4c 6f67 4578 6365 7074 696f 6e28  cs.LogException(
-00002800: 2744 6174 6173 7472 6561 6d50 7927 2c20  'DatastreamPy', 
-00002810: 2744 5352 6573 706f 6e73 652e 706f 7374  'DSResponse.post
-00002820: 5f75 7365 725f 7265 7175 6573 7427 2c20  _user_request', 
-00002830: 2745 7863 6570 7469 6f6e 206f 6363 7572  'Exception occur
-00002840: 6564 3a27 2c20 6578 7029 0d0a 2020 2020  ed:', exp)..    
-00002850: 2020 2020 2020 2020 7261 6973 6520 6578          raise ex
-00002860: 700d 0a20 2020 2020 2020 2020 2020 200d  p..            .
-00002870: 0a20 2020 2064 6566 2067 6574 5f64 6174  .    def get_dat
-00002880: 6128 7365 6c66 2c20 7469 636b 6572 732c  a(self, tickers,
-00002890: 2066 6965 6c64 733d 4e6f 6e65 2c20 7374   fields=None, st
-000028a0: 6172 743d 2727 2c20 656e 643d 2727 2c20  art='', end='', 
-000028b0: 6672 6571 3d27 272c 206b 696e 643d 3129  freq='', kind=1)
-000028c0: 3a0d 0a20 2020 2020 2020 2022 2222 5468  :..        """Th
-000028d0: 6973 2046 756e 6374 696f 6e20 7072 6f63  is Function proc
-000028e0: 6573 7365 7320 6120 7369 6e67 6c65 204a  esses a single J
-000028f0: 534f 4e20 666f 726d 6174 2072 6571 7565  SON format reque
-00002900: 7374 2074 6f20 7072 6f76 6964 650d 0a20  st to provide.. 
-00002910: 2020 2020 2020 2020 2020 6461 7461 2072            data r
-00002920: 6573 706f 6e73 6520 6672 6f6d 2044 5357  esponse from DSW
-00002930: 5320 7765 6220 696e 2074 6865 2066 6f72  S web in the for
-00002940: 6d20 6f66 2070 7974 686f 6e20 4461 7461  m of python Data
-00002950: 6672 616d 650d 0a20 2020 2020 2020 2020  frame..         
-00002960: 2020 0d0a 2020 2020 2020 2020 2020 2041    ..           A
-00002970: 7267 733a 0d0a 2020 2020 2020 2020 2020  rgs:..          
-00002980: 2020 2020 2074 6963 6b65 7273 3a20 7374       tickers: st
-00002990: 7269 6e67 2c20 4461 7461 7970 6573 200d  ring, Dataypes .
-000029a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000029b0: 6669 656c 6473 3a20 4c69 7374 2c20 6465  fields: List, de
-000029c0: 6661 756c 7420 4e6f 6e65 0d0a 2020 2020  fault None..    
-000029d0: 2020 2020 2020 2020 2020 2073 7461 7274             start
-000029e0: 3a20 7374 7269 6e67 2c20 6465 6661 756c  : string, defaul
-000029f0: 7420 2727 0d0a 2020 2020 2020 2020 2020  t ''..          
-00002a00: 2020 2020 2065 6e64 203a 2073 7472 696e       end : strin
-00002a10: 672c 2064 6566 6175 6c74 2027 270d 0a20  g, default ''.. 
-00002a20: 2020 2020 2020 2020 2020 2020 2020 6672                fr
-00002a30: 6571 203a 2073 7472 696e 672c 2064 6566  eq : string, def
-00002a40: 6175 6c74 2027 272c 2042 7920 6465 6166  ault '', By deaf
-00002a50: 756c 7420 4453 5753 2074 7265 6174 7320  ult DSWS treats 
-00002a60: 6173 2044 6169 6c79 2066 7265 710d 0a20  as Daily freq.. 
-00002a70: 2020 2020 2020 2020 2020 2020 2020 6b69                ki
-00002a80: 6e64 3a20 696e 742c 2064 6566 6175 6c74  nd: int, default
-00002a90: 2031 2c20 696e 6469 6361 7465 7320 5469   1, indicates Ti
-00002aa0: 6d65 7365 7269 6573 2061 7320 6f75 7470  meseries as outp
-00002ab0: 7574 0d0a 2020 2020 2020 2020 2020 2020  ut..            
-00002ac0: 2020 2072 6574 4e61 6d65 3a20 626f 6f6c     retName: bool
-00002ad0: 2c20 6465 6661 756c 7420 4661 6c73 652c  , default False,
-00002ae0: 2074 6f20 6265 2073 6574 2074 6f20 5472   to be set to Tr
-00002af0: 7565 2069 6620 7468 6520 496e 7374 7275  ue if the Instru
-00002b00: 6d65 6e74 0d0a 2020 2020 2020 2020 2020  ment..          
-00002b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002b20: 206e 616d 6573 2061 6e64 2044 6174 6174   names and Datat
-00002b30: 7970 6520 6e61 6d65 7320 6172 6520 746f  ype names are to
-00002b40: 2062 6520 7265 7475 726e 6564 0d0a 0d0a   be returned....
-00002b50: 2020 2020 2020 2020 2020 5265 7475 726e            Return
-00002b60: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-00002b70: 2020 2020 2020 4461 7461 4672 616d 652e        DataFrame.
-00002b80: 2222 220d 0a20 2020 2020 2020 2020 2020  """..           
-00002b90: 2020 2020 2020 0d0a 0d0a 2020 2020 2020        ....      
-00002ba0: 2020 6765 7444 6174 615f 7572 6c20 3d20    getData_url = 
-00002bb0: 7365 6c66 2e75 726c 202b 2022 4765 7444  self.url + "GetD
-00002bc0: 6174 6122 0d0a 2020 2020 2020 2020 7261  ata"..        ra
-00002bd0: 775f 6461 7461 5265 7175 6573 7420 3d20  w_dataRequest = 
-00002be0: 2222 0d0a 2020 2020 2020 2020 6a73 6f6e  ""..        json
-00002bf0: 5f64 6174 6152 6571 7565 7374 203d 2022  _dataRequest = "
-00002c00: 220d 0a20 2020 2020 2020 206a 736f 6e5f  "..        json_
-00002c10: 5265 7370 6f6e 7365 203d 2022 220d 0a20  Response = "".. 
-00002c20: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
-00002c30: 2069 6620 6669 656c 6473 203d 3d20 4e6f   if fields == No
-00002c40: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00002c50: 2066 6965 6c64 7320 3d20 5b5d 0d0a 2020   fields = []..  
-00002c60: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
-00002c70: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-00002c80: 2020 7265 744e 616d 6520 3d20 4661 6c73    retName = Fals
-00002c90: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
-00002ca0: 6571 2c20 7265 744e 616d 6520 3d20 7365  eq, retName = se
-00002cb0: 6c66 2e70 6f73 745f 7573 6572 5f72 6571  lf.post_user_req
-00002cc0: 7565 7374 2874 6963 6b65 7273 2c20 6669  uest(tickers, fi
-00002cd0: 656c 6473 2c20 7374 6172 742c 2065 6e64  elds, start, end
-00002ce0: 2c20 6672 6571 2c20 6b69 6e64 290d 0a20  , freq, kind).. 
-00002cf0: 2020 2020 2020 2020 2020 2064 6174 6172             datar
-00002d00: 6571 7565 7374 203d 2044 6174 6152 6571  equest = DataReq
-00002d10: 7565 7374 2829 0d0a 2020 2020 2020 2020  uest()..        
-00002d20: 2020 2020 7365 6c66 2e43 6865 636b 5f54      self.Check_T
-00002d30: 6f6b 656e 2829 2023 2063 6865 636b 2061  oken() # check a
-00002d40: 6e64 2072 656e 6577 2074 6f6b 656e 2069  nd renew token i
-00002d50: 6620 7769 7468 696e 2031 3520 6d69 6e75  f within 15 minu
-00002d60: 7465 7320 6f66 2065 7870 6972 790d 0a20  tes of expiry.. 
-00002d70: 2020 2020 2020 2020 2020 2072 6177 5f64             raw_d
-00002d80: 6174 6152 6571 7565 7374 203d 2064 6174  ataRequest = dat
-00002d90: 6172 6571 7565 7374 2e67 6574 5f52 6571  arequest.get_Req
-00002da0: 7565 7374 2872 6571 2c20 7365 6c66 2e74  uest(req, self.t
-00002db0: 6f6b 656e 290d 0a20 2020 2020 2020 2020  oken)..         
-00002dc0: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
-00002dd0: 2020 2020 6966 2028 7261 775f 6461 7461      if (raw_data
-00002de0: 5265 7175 6573 7420 213d 2022 2229 3a0d  Request != ""):.
-00002df0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002e00: 206a 736f 6e5f 5265 7370 6f6e 7365 203d   json_Response =
-00002e10: 2073 656c 662e 5f67 6574 5f6a 736f 6e5f   self._get_json_
-00002e20: 5265 7370 6f6e 7365 2867 6574 4461 7461  Response(getData
-00002e30: 5f75 726c 2c20 7261 775f 6461 7461 5265  _url, raw_dataRe
-00002e40: 7175 6573 7429 0d0a 2020 2020 2020 2020  quest)..        
-00002e50: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
-00002e60: 2020 2020 2020 2020 2020 2366 6f72 6d61            #forma
-00002e70: 7420 7468 6520 4a53 4f4e 2072 6573 706f  t the JSON respo
-00002e80: 6e73 6520 696e 746f 2072 6561 6461 626c  nse into readabl
-00002e90: 6520 7461 626c 650d 0a20 2020 2020 2020  e table..       
-00002ea0: 2020 2020 2020 2020 2069 6620 2744 6174           if 'Dat
-00002eb0: 6152 6573 706f 6e73 6527 2069 6e20 6a73  aResponse' in js
-00002ec0: 6f6e 5f52 6573 706f 6e73 653a 0d0a 2020  on_Response:..  
-00002ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002ee0: 2020 6966 2072 6574 4e61 6d65 3a0d 0a20    if retName:.. 
-00002ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002f00: 2020 2020 2020 2073 656c 662e 5f67 6574         self._get
-00002f10: 5f6d 6574 6164 6174 6128 6a73 6f6e 5f52  _metadata(json_R
-00002f20: 6573 706f 6e73 655b 2744 6174 6152 6573  esponse['DataRes
-00002f30: 706f 6e73 6527 5d29 0d0a 2020 2020 2020  ponse'])..      
-00002f40: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00002f50: 7370 6f6e 7365 5f64 6174 6166 7261 6d65  sponse_dataframe
-00002f60: 203d 2073 656c 662e 5f66 6f72 6d61 745f   = self._format_
-00002f70: 5265 7370 6f6e 7365 286a 736f 6e5f 5265  Response(json_Re
-00002f80: 7370 6f6e 7365 5b27 4461 7461 5265 7370  sponse['DataResp
-00002f90: 6f6e 7365 275d 290d 0a20 2020 2020 2020  onse'])..       
-00002fa0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00002fb0: 7572 6e20 7265 7370 6f6e 7365 5f64 6174  urn response_dat
-00002fc0: 6166 7261 6d65 0d0a 2020 2020 2020 2020  aframe..        
-00002fd0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00002fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002ff0: 2020 2069 6620 274d 6573 7361 6765 2720     if 'Message' 
-00003000: 696e 206a 736f 6e5f 5265 7370 6f6e 7365  in json_Response
-00003010: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00003020: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00003030: 2045 7863 6570 7469 6f6e 286a 736f 6e5f   Exception(json_
-00003040: 5265 7370 6f6e 7365 5b27 4d65 7373 6167  Response['Messag
-00003050: 6527 5d29 0d0a 2020 2020 2020 2020 2020  e'])..          
-00003060: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00003070: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
-00003080: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00003090: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000030a0: 204e 6f6e 650d 0a20 2020 2020 2020 2065   None..        e
-000030b0: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-000030c0: 6173 2065 7870 3a0d 0a20 2020 2020 2020  as exp:..       
-000030d0: 2020 2020 2044 5355 7365 724f 626a 6563       DSUserObjec
-000030e0: 744c 6f67 4675 6e63 732e 4c6f 6745 7863  tLogFuncs.LogExc
-000030f0: 6570 7469 6f6e 2827 4461 7461 7374 7265  eption('Datastre
-00003100: 616d 5079 272c 2027 4453 5265 7370 6f6e  amPy', 'DSRespon
-00003110: 7365 2e67 6574 5f64 6174 6127 2c20 2745  se.get_data', 'E
-00003120: 7863 6570 7469 6f6e 206f 6363 7572 6564  xception occured
-00003130: 3a27 2c20 6578 7029 0d0a 2020 2020 2020  :', exp)..      
-00003140: 2020 2020 2020 7261 6973 6520 6578 700d        raise exp.
-00003150: 0a20 2020 200d 0a20 2020 2064 6566 2067  .    ..    def g
-00003160: 6574 5f62 756e 646c 655f 6461 7461 2873  et_bundle_data(s
-00003170: 656c 662c 2062 756e 646c 6552 6571 7565  elf, bundleReque
-00003180: 7374 3d4e 6f6e 652c 2072 6574 4e61 6d65  st=None, retName
-00003190: 3d46 616c 7365 293a 0d0a 2020 2020 2020  =False):..      
-000031a0: 2020 2222 2254 6869 7320 4675 6e63 7469    """This Functi
-000031b0: 6f6e 2070 726f 6365 7373 6573 2061 206d  on processes a m
-000031c0: 756c 7469 706c 6520 4a53 4f4e 2066 6f72  ultiple JSON for
-000031d0: 6d61 7420 6461 7461 2072 6571 7565 7374  mat data request
-000031e0: 7320 746f 2070 726f 7669 6465 0d0a 2020  s to provide..  
-000031f0: 2020 2020 2020 2020 2064 6174 6120 7265           data re
-00003200: 7370 6f6e 7365 2066 726f 6d20 4453 5753  sponse from DSWS
-00003210: 2077 6562 2069 6e20 7468 6520 666f 726d   web in the form
-00003220: 206f 6620 7079 7468 6f6e 2044 6174 6166   of python Dataf
-00003230: 7261 6d65 2e0d 0a20 2020 2020 2020 2020  rame...         
-00003240: 2020 5573 6520 706f 7374 5f75 7365 725f    Use post_user_
-00003250: 7265 7175 6573 7420 746f 2066 6f72 6d20  request to form 
-00003260: 6561 6368 204a 534f 4e20 6461 7461 2072  each JSON data r
-00003270: 6571 7565 7374 2061 6e64 2061 7070 656e  equest and appen
-00003280: 6420 746f 2061 204c 6973 740d 0a20 2020  d to a List..   
-00003290: 2020 2020 2020 2020 746f 2070 6173 7320          to pass 
-000032a0: 7468 6520 6275 6e64 6c65 5265 7175 7365  the bundleRequse
-000032b0: 742e 0d0a 2020 2020 2020 2020 2020 200d  t...           .
-000032c0: 0a20 2020 2020 2020 2020 2020 2041 7267  .            Arg
-000032d0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-000032e0: 2020 2062 756e 646c 6552 6571 7565 7374     bundleRequest
-000032f0: 3a20 4c69 7374 2c20 6578 7065 6374 7320  : List, expects 
-00003300: 6c69 7374 206f 6620 4461 7461 7265 7175  list of Datarequ
-00003310: 6573 7473 200d 0a20 2020 2020 2020 2020  ests ..         
-00003320: 2020 2020 2020 7265 744e 616d 653a 2062        retName: b
-00003330: 6f6f 6c2c 2064 6566 6175 6c74 2046 616c  ool, default Fal
-00003340: 7365 2c20 746f 2062 6520 7365 7420 746f  se, to be set to
-00003350: 2054 7275 6520 6966 2074 6865 2049 6e73   True if the Ins
-00003360: 7472 756d 656e 740d 0a20 2020 2020 2020  trument..       
-00003370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003380: 2020 2020 6e61 6d65 7320 616e 6420 4461      names and Da
-00003390: 7461 7479 7065 206e 616d 6573 2061 7265  tatype names are
-000033a0: 2074 6f20 6265 2072 6574 7572 6e65 640d   to be returned.
-000033b0: 0a0d 0a20 2020 2020 2020 2020 2020 2052  ...            R
-000033c0: 6574 7572 6e73 3a0d 0a20 2020 2020 2020  eturns:..       
-000033d0: 2020 2020 2020 2020 2020 2044 6174 6146             DataF
-000033e0: 7261 6d65 2e22 2222 0d0a 0d0a 2020 2020  rame."""....    
-000033f0: 2020 2020 6765 7444 6174 6142 756e 646c      getDataBundl
-00003400: 655f 7572 6c20 3d20 7365 6c66 2e75 726c  e_url = self.url
-00003410: 202b 2022 4765 7444 6174 6142 756e 646c   + "GetDataBundl
-00003420: 6522 0d0a 2020 2020 2020 2020 7261 775f  e"..        raw_
-00003430: 6461 7461 5265 7175 6573 7420 3d20 2222  dataRequest = ""
-00003440: 0d0a 2020 2020 2020 2020 6a73 6f6e 5f64  ..        json_d
-00003450: 6174 6152 6571 7565 7374 203d 2022 220d  ataRequest = "".
-00003460: 0a20 2020 2020 2020 206a 736f 6e5f 5265  .        json_Re
-00003470: 7370 6f6e 7365 203d 2022 220d 0a20 2020  sponse = ""..   
-00003480: 2020 2020 0d0a 2020 2020 2020 2020 6966      ..        if
-00003490: 2062 756e 646c 6552 6571 7565 7374 203d   bundleRequest =
-000034a0: 3d20 4e6f 6e65 3a0d 0a20 2020 2020 2020  = None:..       
-000034b0: 2020 2020 2062 756e 646c 6552 6571 7565       bundleReque
-000034c0: 7374 203d 205b 5d0d 0a20 2020 2020 2020  st = []..       
-000034d0: 200d 0a20 2020 2020 2020 2074 7279 3a0d   ..        try:.
-000034e0: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-000034f0: 6172 6571 7565 7374 203d 2044 6174 6152  arequest = DataR
-00003500: 6571 7565 7374 2829 0d0a 2020 2020 2020  equest()..      
-00003510: 2020 2020 2020 7365 6c66 2e43 6865 636b        self.Check
-00003520: 5f54 6f6b 656e 2829 2023 2063 6865 636b  _Token() # check
-00003530: 2061 6e64 2072 656e 6577 2074 6f6b 656e   and renew token
-00003540: 2069 6620 7769 7468 696e 2031 3520 6d69   if within 15 mi
-00003550: 6e75 7465 7320 6f66 2065 7870 6972 790d  nutes of expiry.
-00003560: 0a20 2020 2020 2020 2020 2020 2072 6177  .            raw
-00003570: 5f64 6174 6152 6571 7565 7374 203d 2064  _dataRequest = d
-00003580: 6174 6172 6571 7565 7374 2e67 6574 5f62  atarequest.get_b
-00003590: 756e 646c 655f 5265 7175 6573 7428 6275  undle_Request(bu
-000035a0: 6e64 6c65 5265 7175 6573 742c 2073 656c  ndleRequest, sel
-000035b0: 662e 746f 6b65 6e29 0d0a 0d0a 2020 2020  f.token)....    
-000035c0: 2020 2020 2020 2020 6966 2028 7261 775f          if (raw_
-000035d0: 6461 7461 5265 7175 6573 7420 213d 2022  dataRequest != "
-000035e0: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-000035f0: 2020 2020 2020 6a73 6f6e 5f52 6573 706f        json_Respo
-00003600: 6e73 6520 3d20 7365 6c66 2e5f 6765 745f  nse = self._get_
-00003610: 6a73 6f6e 5f52 6573 706f 6e73 6528 6765  json_Response(ge
-00003620: 7444 6174 6142 756e 646c 655f 7572 6c2c  tDataBundle_url,
-00003630: 2072 6177 5f64 6174 6152 6571 7565 7374   raw_dataRequest
-00003640: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00003650: 2020 2020 6966 2027 4461 7461 5265 7370      if 'DataResp
-00003660: 6f6e 7365 7327 2069 6e20 6a73 6f6e 5f52  onses' in json_R
-00003670: 6573 706f 6e73 653a 0d0a 2020 2020 2020  esponse:..      
-00003680: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00003690: 6620 7265 744e 616d 653a 0d0a 2020 2020  f retName:..    
-000036a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000036b0: 2020 2020 2073 656c 662e 5f67 6574 5f6d       self._get_m
-000036c0: 6574 6164 6174 615f 6275 6e64 6c65 286a  etadata_bundle(j
-000036d0: 736f 6e5f 5265 7370 6f6e 7365 5b27 4461  son_Response['Da
-000036e0: 7461 5265 7370 6f6e 7365 7327 5d29 0d0a  taResponses'])..
-000036f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003700: 2020 2020 2072 6573 706f 6e73 655f 6461       response_da
-00003710: 7461 6672 616d 6520 3d20 7365 6c66 2e5f  taframe = self._
-00003720: 666f 726d 6174 5f62 756e 646c 655f 7265  format_bundle_re
-00003730: 7370 6f6e 7365 286a 736f 6e5f 5265 7370  sponse(json_Resp
-00003740: 6f6e 7365 290d 0a20 2020 2020 2020 2020  onse)..         
-00003750: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00003760: 726e 2072 6573 706f 6e73 655f 6461 7461  rn response_data
-00003770: 6672 616d 650d 0a20 2020 2020 2020 2020  frame..         
-00003780: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00003790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000037a0: 2020 2069 6620 274d 6573 7361 6765 2720     if 'Message' 
-000037b0: 696e 206a 736f 6e5f 5265 7370 6f6e 7365  in json_Response
-000037c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000037d0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-000037e0: 2045 7863 6570 7469 6f6e 286a 736f 6e5f   Exception(json_
-000037f0: 5265 7370 6f6e 7365 5b27 4d65 7373 6167  Response['Messag
-00003800: 6527 5d29 0d0a 2020 2020 2020 2020 2020  e'])..          
-00003810: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00003820: 204e 6f6e 650d 0a20 2020 2020 2020 2020   None..         
-00003830: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00003840: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00003850: 204e 6f6e 650d 0a20 2020 2020 2020 2065   None..        e
-00003860: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-00003870: 6173 2065 7870 3a0d 0a20 2020 2020 2020  as exp:..       
-00003880: 2020 2020 2044 5355 7365 724f 626a 6563       DSUserObjec
-00003890: 744c 6f67 4675 6e63 732e 4c6f 6745 7863  tLogFuncs.LogExc
-000038a0: 6570 7469 6f6e 2827 4461 7461 7374 7265  eption('Datastre
-000038b0: 616d 5079 272c 2027 4453 5265 7370 6f6e  amPy', 'DSRespon
-000038c0: 7365 2e67 6574 5f62 756e 646c 655f 6461  se.get_bundle_da
-000038d0: 7461 272c 2027 4578 6365 7074 696f 6e20  ta', 'Exception 
-000038e0: 6f63 6375 7265 643a 272c 2065 7870 290d  occured:', exp).
-000038f0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00003900: 7365 2065 7870 0d0a 2020 2020 0d0a 232d  se exp..    ..#-
-00003910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00002200: 2222 0d0a 0d0a 2020 2020 2020 2020 7265  ""....        re
+00002210: 744e 616d 6520 3d20 4661 6c73 6520 2020  tName = False   
+00002220: 200d 0a20 2020 2020 2020 2069 6620 6669   ..        if fi
+00002230: 656c 6473 203d 3d20 4e6f 6e65 3a0d 0a20  elds == None:.. 
+00002240: 2020 2020 2020 2020 2020 2066 6965 6c64             field
+00002250: 733d 5b5d 0d0a 2020 2020 2020 2020 0d0a  s=[]..        ..
+00002260: 2020 2020 2020 2020 696e 6465 7820 3d20          index = 
+00002270: 7469 636b 6572 732e 7266 696e 6428 277c  tickers.rfind('|
+00002280: 2729 0d0a 2020 2020 2020 2020 7072 6f70  ')..        prop
+00002290: 4c69 7374 203d 205b 5d0d 0a20 2020 2020  List = []..     
+000022a0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+000022b0: 2020 2020 2069 6620 696e 6465 7820 3d3d       if index ==
+000022c0: 202d 313a 0d0a 2020 2020 2020 2020 2020   -1:..          
+000022d0: 2020 2020 2020 696e 7374 7275 6d65 6e74        instrument
+000022e0: 203d 2049 6e73 7472 756d 656e 7428 7469   = Instrument(ti
+000022f0: 636b 6572 732c 204e 6f6e 6529 0d0a 2020  ckers, None)..  
+00002300: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+00002310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002320: 2023 4765 7420 616c 6c20 7468 6520 7072   #Get all the pr
+00002330: 6f70 6572 7469 6573 206f 6620 7468 6520  operties of the 
+00002340: 696e 7374 7275 6d65 6e74 0d0a 2020 2020  instrument..    
+00002350: 2020 2020 2020 2020 2020 2020 696e 7374              inst
+00002360: 7072 6f70 7320 3d20 5b5d 0d0a 2020 2020  props = []..    
+00002370: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+00002380: 6963 6b65 7273 5b69 6e64 6578 2b31 3a5d  ickers[index+1:]
+00002390: 2e72 6669 6e64 2827 2c27 2920 213d 202d  .rfind(',') != -
+000023a0: 313a 0d0a 2020 2020 2020 2020 2020 2020  1:..            
+000023b0: 2020 2020 2020 2020 7072 6f70 4c69 7374          propList
+000023c0: 203d 2074 6963 6b65 7273 5b69 6e64 6578   = tickers[index
+000023d0: 2b31 3a5d 2e73 706c 6974 2827 2c27 290d  +1:].split(',').
+000023e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000023f0: 2020 2020 2066 6f72 2065 6163 6850 726f       for eachPro
+00002400: 7020 696e 2070 726f 704c 6973 743a 0d0a  p in propList:..
+00002410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002420: 2020 2020 2020 2020 696e 7374 7072 6f70          instprop
+00002430: 732e 6170 7065 6e64 2850 726f 7065 7274  s.append(Propert
+00002440: 6965 7328 6561 6368 5072 6f70 2c20 5472  ies(eachProp, Tr
+00002450: 7565 2929 0d0a 2020 2020 2020 2020 2020  ue))..          
+00002460: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00002470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002480: 2070 726f 704c 6973 742e 6170 7065 6e64   propList.append
+00002490: 2874 6963 6b65 7273 5b69 6e64 6578 2b31  (tickers[index+1
+000024a0: 3a5d 290d 0a20 2020 2020 2020 2020 2020  :])..           
+000024b0: 2020 2020 2020 2020 2069 6e73 7470 726f           instpro
+000024c0: 7073 2e61 7070 656e 6428 5072 6f70 6572  ps.append(Proper
+000024d0: 7469 6573 2874 6963 6b65 7273 5b69 6e64  ties(tickers[ind
+000024e0: 6578 2b31 3a5d 2c20 5472 7565 2929 0d0a  ex+1:], True))..
+000024f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00002500: 2020 696e 7374 7275 6d65 6e74 203d 2049    instrument = I
+00002510: 6e73 7472 756d 656e 7428 7469 636b 6572  nstrument(ticker
+00002520: 735b 303a 696e 6465 785d 2c20 696e 7374  s[0:index], inst
+00002530: 7072 6f70 7329 0d0a 2020 2020 2020 2020  props)..        
+00002540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002550: 0d0a 2020 2020 2020 2020 2020 2020 6461  ..            da
+00002560: 7479 7065 733d 5b5d 0d0a 2020 2020 2020  types=[]..      
+00002570: 2020 2020 2020 6966 2027 4e27 2069 6e20        if 'N' in 
+00002580: 7072 6f70 4c69 7374 3a0d 0a20 2020 2020  propList:..     
+00002590: 2020 2020 2020 2020 2020 2070 726f 7020             prop 
+000025a0: 3d20 5b7b 274b 6579 273a 2752 6574 7572  = [{'Key':'Retur
+000025b0: 6e4e 616d 6527 2c20 2756 616c 7565 273a  nName', 'Value':
+000025c0: 5472 7565 7d5d 200d 0a20 2020 2020 2020  True}] ..       
+000025d0: 2020 2020 2020 2020 2072 6574 4e61 6d65           retName
+000025e0: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
+000025f0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00002600: 2020 2020 2020 2020 2020 2020 7072 6f70              prop
+00002610: 203d 204e 6f6e 650d 0a0d 0a20 2020 2020   = None....     
+00002620: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
+00002630: 2020 2020 2069 6620 6c65 6e28 6669 656c       if len(fiel
+00002640: 6473 2920 3e20 303a 0d0a 2020 2020 2020  ds) > 0:..      
+00002650: 2020 2020 2020 2020 2020 666f 7220 6561            for ea
+00002660: 6368 4474 7970 6520 696e 2066 6965 6c64  chDtype in field
+00002670: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+00002680: 2020 2020 2020 2020 6461 7479 7065 732e          datypes.
+00002690: 6170 7065 6e64 2844 6174 6154 7970 6528  append(DataType(
+000026a0: 6561 6368 4474 7970 652c 2070 726f 7029  eachDtype, prop)
+000026b0: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
+000026c0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+000026d0: 2020 2020 2020 6461 7479 7065 732e 6170        datypes.ap
+000026e0: 7065 6e64 2844 6174 6154 7970 6528 6669  pend(DataType(fi
+000026f0: 656c 6473 2c20 7072 6f70 2929 0d0a 2020  elds, prop))..  
+00002700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002710: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
+00002720: 2020 2020 6461 7465 203d 2044 6174 6528      date = Date(
+00002730: 7374 6172 742c 2066 7265 712c 2065 6e64  start, freq, end
+00002740: 2c20 6b69 6e64 290d 0a20 2020 2020 2020  , kind)..       
+00002750: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+00002760: 2249 6e73 7472 756d 656e 7422 3a69 6e73  "Instrument":ins
+00002770: 7472 756d 656e 742c 2244 6174 6154 7970  trument,"DataTyp
+00002780: 6573 223a 6461 7479 7065 732c 2244 6174  es":datypes,"Dat
+00002790: 6522 3a64 6174 657d 0d0a 2020 2020 2020  e":date}..      
+000027a0: 2020 2020 2020 7265 7475 726e 2072 6571        return req
+000027b0: 7565 7374 2c20 7265 744e 616d 650d 0a20  uest, retName.. 
+000027c0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+000027d0: 6365 7074 696f 6e20 6173 2065 7870 3a0d  ception as exp:.
+000027e0: 0a20 2020 2020 2020 2020 2020 2044 5355  .            DSU
+000027f0: 7365 724f 626a 6563 744c 6f67 4675 6e63  serObjectLogFunc
+00002800: 732e 4c6f 6745 7863 6570 7469 6f6e 2827  s.LogException('
+00002810: 4461 7461 7374 7265 616d 5079 272c 2027  DatastreamPy', '
+00002820: 4453 5265 7370 6f6e 7365 2e70 6f73 745f  DSResponse.post_
+00002830: 7573 6572 5f72 6571 7565 7374 272c 2027  user_request', '
+00002840: 4578 6365 7074 696f 6e20 6f63 6375 7265  Exception occure
+00002850: 643a 272c 2065 7870 290d 0a20 2020 2020  d:', exp)..     
+00002860: 2020 2020 2020 2072 6169 7365 2065 7870         raise exp
+00002870: 0d0a 2020 2020 2020 2020 2020 2020 0d0a  ..            ..
+00002880: 2020 2020 6465 6620 6765 745f 6461 7461      def get_data
+00002890: 2873 656c 662c 2074 6963 6b65 7273 2c20  (self, tickers, 
+000028a0: 6669 656c 6473 3d4e 6f6e 652c 2073 7461  fields=None, sta
+000028b0: 7274 3d27 272c 2065 6e64 3d27 272c 2066  rt='', end='', f
+000028c0: 7265 713d 2727 2c20 6b69 6e64 3d31 293a  req='', kind=1):
+000028d0: 0d0a 2020 2020 2020 2020 2222 2254 6869  ..        """Thi
+000028e0: 7320 4675 6e63 7469 6f6e 2070 726f 6365  s Function proce
+000028f0: 7373 6573 2061 2073 696e 676c 6520 4a53  sses a single JS
+00002900: 4f4e 2066 6f72 6d61 7420 7265 7175 6573  ON format reques
+00002910: 7420 746f 2070 726f 7669 6465 0d0a 2020  t to provide..  
+00002920: 2020 2020 2020 2020 2064 6174 6120 7265           data re
+00002930: 7370 6f6e 7365 2066 726f 6d20 4453 5753  sponse from DSWS
+00002940: 2077 6562 2069 6e20 7468 6520 666f 726d   web in the form
+00002950: 206f 6620 7079 7468 6f6e 2044 6174 6166   of python Dataf
+00002960: 7261 6d65 0d0a 2020 2020 2020 2020 2020  rame..          
+00002970: 200d 0a20 2020 2020 2020 2020 2020 4172   ..           Ar
+00002980: 6773 3a0d 0a20 2020 2020 2020 2020 2020  gs:..           
+00002990: 2020 2020 7469 636b 6572 733a 2073 7472      tickers: str
+000029a0: 696e 672c 2044 6174 6179 7065 7320 0d0a  ing, Dataypes ..
+000029b0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000029c0: 6965 6c64 733a 204c 6973 742c 2064 6566  ields: List, def
+000029d0: 6175 6c74 204e 6f6e 650d 0a20 2020 2020  ault None..     
+000029e0: 2020 2020 2020 2020 2020 7374 6172 743a            start:
+000029f0: 2073 7472 696e 672c 2064 6566 6175 6c74   string, default
+00002a00: 2027 270d 0a20 2020 2020 2020 2020 2020   ''..           
+00002a10: 2020 2020 656e 6420 3a20 7374 7269 6e67      end : string
+00002a20: 2c20 6465 6661 756c 7420 2727 0d0a 2020  , default ''..  
+00002a30: 2020 2020 2020 2020 2020 2020 2066 7265               fre
+00002a40: 7120 3a20 7374 7269 6e67 2c20 6465 6661  q : string, defa
+00002a50: 756c 7420 2727 2c20 4279 2064 6561 6675  ult '', By deafu
+00002a60: 6c74 2044 5357 5320 7472 6561 7473 2061  lt DSWS treats a
+00002a70: 7320 4461 696c 7920 6672 6571 0d0a 2020  s Daily freq..  
+00002a80: 2020 2020 2020 2020 2020 2020 206b 696e               kin
+00002a90: 643a 2069 6e74 2c20 6465 6661 756c 7420  d: int, default 
+00002aa0: 312c 2069 6e64 6963 6174 6573 2054 696d  1, indicates Tim
+00002ab0: 6573 6572 6965 7320 6173 206f 7574 7075  eseries as outpu
+00002ac0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
+00002ad0: 2020 7265 744e 616d 653a 2062 6f6f 6c2c    retName: bool,
+00002ae0: 2064 6566 6175 6c74 2046 616c 7365 2c20   default False, 
+00002af0: 746f 2062 6520 7365 7420 746f 2054 7275  to be set to Tru
+00002b00: 6520 6966 2074 6865 2049 6e73 7472 756d  e if the Instrum
+00002b10: 656e 740d 0a20 2020 2020 2020 2020 2020  ent..           
+00002b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b30: 6e61 6d65 7320 616e 6420 4461 7461 7479  names and Dataty
+00002b40: 7065 206e 616d 6573 2061 7265 2074 6f20  pe names are to 
+00002b50: 6265 2072 6574 7572 6e65 640d 0a0d 0a20  be returned.... 
+00002b60: 2020 2020 2020 2020 2052 6574 7572 6e73           Returns
+00002b70: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00002b80: 2020 2020 2044 6174 6146 7261 6d65 2e22       DataFrame."
+00002b90: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
+00002ba0: 2020 2020 200d 0a0d 0a20 2020 2020 2020       ....       
+00002bb0: 2067 6574 4461 7461 5f75 726c 203d 2073   getData_url = s
+00002bc0: 656c 662e 7572 6c20 2b20 2247 6574 4461  elf.url + "GetDa
+00002bd0: 7461 220d 0a20 2020 2020 2020 2072 6177  ta"..        raw
+00002be0: 5f64 6174 6152 6571 7565 7374 203d 2022  _dataRequest = "
+00002bf0: 220d 0a20 2020 2020 2020 206a 736f 6e5f  "..        json_
+00002c00: 6461 7461 5265 7175 6573 7420 3d20 2222  dataRequest = ""
+00002c10: 0d0a 2020 2020 2020 2020 6a73 6f6e 5f52  ..        json_R
+00002c20: 6573 706f 6e73 6520 3d20 2222 0d0a 2020  esponse = ""..  
+00002c30: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
+00002c40: 6966 2066 6965 6c64 7320 3d3d 204e 6f6e  if fields == Non
+00002c50: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00002c60: 6669 656c 6473 203d 205b 5d0d 0a20 2020  fields = []..   
+00002c70: 2020 2020 200d 0a20 2020 2020 2020 2074       ..        t
+00002c80: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+00002c90: 2072 6574 4e61 6d65 203d 2046 616c 7365   retName = False
+00002ca0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00002cb0: 712c 2072 6574 4e61 6d65 203d 2073 656c  q, retName = sel
+00002cc0: 662e 706f 7374 5f75 7365 725f 7265 7175  f.post_user_requ
+00002cd0: 6573 7428 7469 636b 6572 732c 2066 6965  est(tickers, fie
+00002ce0: 6c64 732c 2073 7461 7274 2c20 656e 642c  lds, start, end,
+00002cf0: 2066 7265 712c 206b 696e 6429 0d0a 2020   freq, kind)..  
+00002d00: 2020 2020 2020 2020 2020 6461 7461 7265            datare
+00002d10: 7175 6573 7420 3d20 4461 7461 5265 7175  quest = DataRequ
+00002d20: 6573 7428 290d 0a20 2020 2020 2020 2020  est()..         
+00002d30: 2020 2073 656c 662e 4368 6563 6b5f 546f     self.Check_To
+00002d40: 6b65 6e28 2920 2320 6368 6563 6b20 616e  ken() # check an
+00002d50: 6420 7265 6e65 7720 746f 6b65 6e20 6966  d renew token if
+00002d60: 2077 6974 6869 6e20 3135 206d 696e 7574   within 15 minut
+00002d70: 6573 206f 6620 6578 7069 7279 0d0a 2020  es of expiry..  
+00002d80: 2020 2020 2020 2020 2020 7261 775f 6461            raw_da
+00002d90: 7461 5265 7175 6573 7420 3d20 6461 7461  taRequest = data
+00002da0: 7265 7175 6573 742e 6765 745f 5265 7175  request.get_Requ
+00002db0: 6573 7428 7265 712c 2073 656c 662e 746f  est(req, self.to
+00002dc0: 6b65 6e29 0d0a 2020 2020 2020 2020 2020  ken)..          
+00002dd0: 2020 2020 200d 0a20 2020 2020 2020 2020       ..         
+00002de0: 2020 2069 6620 2872 6177 5f64 6174 6152     if (raw_dataR
+00002df0: 6571 7565 7374 2021 3d20 2222 293a 0d0a  equest != ""):..
+00002e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002e10: 6a73 6f6e 5f52 6573 706f 6e73 6520 3d20  json_Response = 
+00002e20: 7365 6c66 2e5f 6765 745f 6a73 6f6e 5f52  self._get_json_R
+00002e30: 6573 706f 6e73 6528 6765 7444 6174 615f  esponse(getData_
+00002e40: 7572 6c2c 2072 6177 5f64 6174 6152 6571  url, raw_dataReq
+00002e50: 7565 7374 290d 0a20 2020 2020 2020 2020  uest)..         
+00002e60: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
+00002e70: 2020 2020 2020 2020 2023 666f 726d 6174           #format
+00002e80: 2074 6865 204a 534f 4e20 7265 7370 6f6e   the JSON respon
+00002e90: 7365 2069 6e74 6f20 7265 6164 6162 6c65  se into readable
+00002ea0: 2074 6162 6c65 0d0a 2020 2020 2020 2020   table..        
+00002eb0: 2020 2020 2020 2020 6966 2027 4461 7461          if 'Data
+00002ec0: 5265 7370 6f6e 7365 2720 696e 206a 736f  Response' in jso
+00002ed0: 6e5f 5265 7370 6f6e 7365 3a0d 0a20 2020  n_Response:..   
+00002ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ef0: 2069 6620 7265 744e 616d 653a 0d0a 2020   if retName:..  
+00002f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002f10: 2020 2020 2020 7365 6c66 2e5f 6765 745f        self._get_
+00002f20: 6d65 7461 6461 7461 286a 736f 6e5f 5265  metadata(json_Re
+00002f30: 7370 6f6e 7365 5b27 4461 7461 5265 7370  sponse['DataResp
+00002f40: 6f6e 7365 275d 290d 0a20 2020 2020 2020  onse'])..       
+00002f50: 2020 2020 2020 2020 2020 2020 2072 6573               res
+00002f60: 706f 6e73 655f 6461 7461 6672 616d 6520  ponse_dataframe 
+00002f70: 3d20 7365 6c66 2e5f 666f 726d 6174 5f52  = self._format_R
+00002f80: 6573 706f 6e73 6528 6a73 6f6e 5f52 6573  esponse(json_Res
+00002f90: 706f 6e73 655b 2744 6174 6152 6573 706f  ponse['DataRespo
+00002fa0: 6e73 6527 5d29 0d0a 2020 2020 2020 2020  nse'])..        
+00002fb0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00002fc0: 726e 2072 6573 706f 6e73 655f 6461 7461  rn response_data
+00002fd0: 6672 616d 650d 0a20 2020 2020 2020 2020  frame..         
+00002fe0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00002ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003000: 2020 6966 2027 4d65 7373 6167 6527 2069    if 'Message' i
+00003010: 6e20 6a73 6f6e 5f52 6573 706f 6e73 653a  n json_Response:
+00003020: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00003030: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00003040: 4578 6365 7074 696f 6e28 6a73 6f6e 5f52  Exception(json_R
+00003050: 6573 706f 6e73 655b 274d 6573 7361 6765  esponse['Message
+00003060: 275d 290d 0a20 2020 2020 2020 2020 2020  '])..           
+00003070: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00003080: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
+00003090: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+000030a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000030b0: 4e6f 6e65 0d0a 2020 2020 2020 2020 6578  None..        ex
+000030c0: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+000030d0: 7320 6578 703a 0d0a 2020 2020 2020 2020  s exp:..        
+000030e0: 2020 2020 4453 5573 6572 4f62 6a65 6374      DSUserObject
+000030f0: 4c6f 6746 756e 6373 2e4c 6f67 4578 6365  LogFuncs.LogExce
+00003100: 7074 696f 6e28 2744 6174 6173 7472 6561  ption('Datastrea
+00003110: 6d50 7927 2c20 2744 5352 6573 706f 6e73  mPy', 'DSRespons
+00003120: 652e 6765 745f 6461 7461 272c 2027 4578  e.get_data', 'Ex
+00003130: 6365 7074 696f 6e20 6f63 6375 7265 643a  ception occured:
+00003140: 272c 2065 7870 290d 0a20 2020 2020 2020  ', exp)..       
+00003150: 2020 2020 2072 6169 7365 2065 7870 0d0a       raise exp..
+00003160: 2020 2020 0d0a 2020 2020 6465 6620 6765      ..    def ge
+00003170: 745f 6275 6e64 6c65 5f64 6174 6128 7365  t_bundle_data(se
+00003180: 6c66 2c20 6275 6e64 6c65 5265 7175 6573  lf, bundleReques
+00003190: 743d 4e6f 6e65 2c20 7265 744e 616d 653d  t=None, retName=
+000031a0: 4661 6c73 6529 3a0d 0a20 2020 2020 2020  False):..       
+000031b0: 2022 2222 5468 6973 2046 756e 6374 696f   """This Functio
+000031c0: 6e20 7072 6f63 6573 7365 7320 6120 6d75  n processes a mu
+000031d0: 6c74 6970 6c65 204a 534f 4e20 666f 726d  ltiple JSON form
+000031e0: 6174 2064 6174 6120 7265 7175 6573 7473  at data requests
+000031f0: 2074 6f20 7072 6f76 6964 650d 0a20 2020   to provide..   
+00003200: 2020 2020 2020 2020 6461 7461 2072 6573          data res
+00003210: 706f 6e73 6520 6672 6f6d 2044 5357 5320  ponse from DSWS 
+00003220: 7765 6220 696e 2074 6865 2066 6f72 6d20  web in the form 
+00003230: 6f66 2070 7974 686f 6e20 4461 7461 6672  of python Datafr
+00003240: 616d 652e 0d0a 2020 2020 2020 2020 2020  ame...          
+00003250: 2055 7365 2070 6f73 745f 7573 6572 5f72   Use post_user_r
+00003260: 6571 7565 7374 2074 6f20 666f 726d 2065  equest to form e
+00003270: 6163 6820 4a53 4f4e 2064 6174 6120 7265  ach JSON data re
+00003280: 7175 6573 7420 616e 6420 6170 7065 6e64  quest and append
+00003290: 2074 6f20 6120 4c69 7374 0d0a 2020 2020   to a List..    
+000032a0: 2020 2020 2020 2074 6f20 7061 7373 2074         to pass t
+000032b0: 6865 2062 756e 646c 6552 6571 7573 6574  he bundleRequset
+000032c0: 2e0d 0a20 2020 2020 2020 2020 2020 0d0a  ...           ..
+000032d0: 2020 2020 2020 2020 2020 2020 4172 6773              Args
+000032e0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000032f0: 2020 6275 6e64 6c65 5265 7175 6573 743a    bundleRequest:
+00003300: 204c 6973 742c 2065 7870 6563 7473 206c   List, expects l
+00003310: 6973 7420 6f66 2044 6174 6172 6571 7565  ist of Datareque
+00003320: 7374 7320 0d0a 2020 2020 2020 2020 2020  sts ..          
+00003330: 2020 2020 2072 6574 4e61 6d65 3a20 626f       retName: bo
+00003340: 6f6c 2c20 6465 6661 756c 7420 4661 6c73  ol, default Fals
+00003350: 652c 2074 6f20 6265 2073 6574 2074 6f20  e, to be set to 
+00003360: 5472 7565 2069 6620 7468 6520 496e 7374  True if the Inst
+00003370: 7275 6d65 6e74 0d0a 2020 2020 2020 2020  rument..        
+00003380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003390: 2020 206e 616d 6573 2061 6e64 2044 6174     names and Dat
+000033a0: 6174 7970 6520 6e61 6d65 7320 6172 6520  atype names are 
+000033b0: 746f 2062 6520 7265 7475 726e 6564 0d0a  to be returned..
+000033c0: 0d0a 2020 2020 2020 2020 2020 2020 5265  ..            Re
+000033d0: 7475 726e 733a 0d0a 2020 2020 2020 2020  turns:..        
+000033e0: 2020 2020 2020 2020 2020 4461 7461 4672            DataFr
+000033f0: 616d 652e 2222 220d 0a0d 0a20 2020 2020  ame."""....     
+00003400: 2020 2067 6574 4461 7461 4275 6e64 6c65     getDataBundle
+00003410: 5f75 726c 203d 2073 656c 662e 7572 6c20  _url = self.url 
+00003420: 2b20 2247 6574 4461 7461 4275 6e64 6c65  + "GetDataBundle
+00003430: 220d 0a20 2020 2020 2020 2072 6177 5f64  "..        raw_d
+00003440: 6174 6152 6571 7565 7374 203d 2022 220d  ataRequest = "".
+00003450: 0a20 2020 2020 2020 206a 736f 6e5f 6461  .        json_da
+00003460: 7461 5265 7175 6573 7420 3d20 2222 0d0a  taRequest = ""..
+00003470: 2020 2020 2020 2020 6a73 6f6e 5f52 6573          json_Res
+00003480: 706f 6e73 6520 3d20 2222 0d0a 2020 2020  ponse = ""..    
+00003490: 2020 200d 0a20 2020 2020 2020 2069 6620     ..        if 
+000034a0: 6275 6e64 6c65 5265 7175 6573 7420 3d3d  bundleRequest ==
+000034b0: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
+000034c0: 2020 2020 6275 6e64 6c65 5265 7175 6573      bundleReques
+000034d0: 7420 3d20 5b5d 0d0a 2020 2020 2020 2020  t = []..        
+000034e0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
+000034f0: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00003500: 7265 7175 6573 7420 3d20 4461 7461 5265  request = DataRe
+00003510: 7175 6573 7428 290d 0a20 2020 2020 2020  quest()..       
+00003520: 2020 2020 2073 656c 662e 4368 6563 6b5f       self.Check_
+00003530: 546f 6b65 6e28 2920 2320 6368 6563 6b20  Token() # check 
+00003540: 616e 6420 7265 6e65 7720 746f 6b65 6e20  and renew token 
+00003550: 6966 2077 6974 6869 6e20 3135 206d 696e  if within 15 min
+00003560: 7574 6573 206f 6620 6578 7069 7279 0d0a  utes of expiry..
+00003570: 2020 2020 2020 2020 2020 2020 7261 775f              raw_
+00003580: 6461 7461 5265 7175 6573 7420 3d20 6461  dataRequest = da
+00003590: 7461 7265 7175 6573 742e 6765 745f 6275  tarequest.get_bu
+000035a0: 6e64 6c65 5f52 6571 7565 7374 2862 756e  ndle_Request(bun
+000035b0: 646c 6552 6571 7565 7374 2c20 7365 6c66  dleRequest, self
+000035c0: 2e74 6f6b 656e 290d 0a0d 0a20 2020 2020  .token)....     
+000035d0: 2020 2020 2020 2069 6620 2872 6177 5f64         if (raw_d
+000035e0: 6174 6152 6571 7565 7374 2021 3d20 2222  ataRequest != ""
+000035f0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00003600: 2020 2020 206a 736f 6e5f 5265 7370 6f6e       json_Respon
+00003610: 7365 203d 2073 656c 662e 5f67 6574 5f6a  se = self._get_j
+00003620: 736f 6e5f 5265 7370 6f6e 7365 2867 6574  son_Response(get
+00003630: 4461 7461 4275 6e64 6c65 5f75 726c 2c20  DataBundle_url, 
+00003640: 7261 775f 6461 7461 5265 7175 6573 7429  raw_dataRequest)
+00003650: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00003660: 2020 2069 6620 2744 6174 6152 6573 706f     if 'DataRespo
+00003670: 6e73 6573 2720 696e 206a 736f 6e5f 5265  nses' in json_Re
+00003680: 7370 6f6e 7365 3a0d 0a20 2020 2020 2020  sponse:..       
+00003690: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000036a0: 2072 6574 4e61 6d65 3a0d 0a20 2020 2020   retName:..     
+000036b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000036c0: 2020 2020 7365 6c66 2e5f 6765 745f 6d65      self._get_me
+000036d0: 7461 6461 7461 5f62 756e 646c 6528 6a73  tadata_bundle(js
+000036e0: 6f6e 5f52 6573 706f 6e73 655b 2744 6174  on_Response['Dat
+000036f0: 6152 6573 706f 6e73 6573 275d 290d 0a20  aResponses']).. 
+00003700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003710: 2020 2020 7265 7370 6f6e 7365 5f64 6174      response_dat
+00003720: 6166 7261 6d65 203d 2073 656c 662e 5f66  aframe = self._f
+00003730: 6f72 6d61 745f 6275 6e64 6c65 5f72 6573  ormat_bundle_res
+00003740: 706f 6e73 6528 6a73 6f6e 5f52 6573 706f  ponse(json_Respo
+00003750: 6e73 6529 0d0a 2020 2020 2020 2020 2020  nse)..          
+00003760: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00003770: 6e20 7265 7370 6f6e 7365 5f64 6174 6166  n response_dataf
+00003780: 7261 6d65 0d0a 2020 2020 2020 2020 2020  rame..          
+00003790: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+000037a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000037b0: 2020 6966 2027 4d65 7373 6167 6527 2069    if 'Message' i
+000037c0: 6e20 6a73 6f6e 5f52 6573 706f 6e73 653a  n json_Response:
+000037d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000037e0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000037f0: 4578 6365 7074 696f 6e28 6a73 6f6e 5f52  Exception(json_R
+00003800: 6573 706f 6e73 655b 274d 6573 7361 6765  esponse['Message
+00003810: 275d 290d 0a20 2020 2020 2020 2020 2020  '])..           
+00003820: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00003830: 4e6f 6e65 0d0a 2020 2020 2020 2020 2020  None..          
+00003840: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00003850: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00003860: 4e6f 6e65 0d0a 2020 2020 2020 2020 6578  None..        ex
+00003870: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+00003880: 7320 6578 703a 0d0a 2020 2020 2020 2020  s exp:..        
+00003890: 2020 2020 4453 5573 6572 4f62 6a65 6374      DSUserObject
+000038a0: 4c6f 6746 756e 6373 2e4c 6f67 4578 6365  LogFuncs.LogExce
+000038b0: 7074 696f 6e28 2744 6174 6173 7472 6561  ption('Datastrea
+000038c0: 6d50 7927 2c20 2744 5352 6573 706f 6e73  mPy', 'DSRespons
+000038d0: 652e 6765 745f 6275 6e64 6c65 5f64 6174  e.get_bundle_dat
+000038e0: 6127 2c20 2745 7863 6570 7469 6f6e 206f  a', 'Exception o
+000038f0: 6363 7572 6564 3a27 2c20 6578 7029 0d0a  ccured:', exp)..
+00003900: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00003910: 6520 6578 700d 0a20 2020 200d 0a23 2d2d  e exp..    ..#--
 00003920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00003930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003940: 2d2d 2d2d 2d2d 200d 0a23 2d2d 2d2d 2d2d  ------ ..#------
-00003950: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003950: 2d2d 2d2d 2d20 0d0a 232d 2d2d 2d2d 2d2d  ----- ..#-------
 00003960: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00003970: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003980: 2d20 2020 2020 2020 2020 2020 2020 0d0a  -             ..
-00003990: 232d 2d2d 2d2d 2d2d 4865 6c70 6572 2046  #-------Helper F
-000039a0: 756e 6374 696f 6e73 2d2d 2d2d 2d2d 2d2d  unctions--------
-000039b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003980: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00003990: 2020 2020 2020 2020 2020 2020 200d 0a23               ..#
+000039a0: 2d2d 2d2d 2d2d 2d48 656c 7065 7220 4675  -------Helper Fu
+000039b0: 6e63 7469 6f6e 732d 2d2d 2d2d 2d2d 2d2d  nctions---------
 000039c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000039d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a20 2020  -----------..   
-000039e0: 2064 6566 205f 6765 745f 5265 7370 6f6e   def _get_Respon
-000039f0: 7365 2873 656c 662c 2072 6571 5572 6c2c  se(self, reqUrl,
-00003a00: 2072 6177 5f72 6571 7565 7374 293a 0d0a   raw_request):..
-00003a10: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00003a20: 2020 2020 2020 2020 2020 2363 6f6e 7665            #conve
-00003a30: 7274 2072 6177 2072 6571 7565 7374 2074  rt raw request t
-00003a40: 6f20 6a73 6f6e 2066 6f72 6d61 7420 6265  o json format be
-00003a50: 666f 7265 2070 6f73 740d 0a20 2020 2020  fore post..     
-00003a60: 2020 2020 2020 206a 736f 6e52 6571 7565         jsonReque
-00003a70: 7374 203d 2073 656c 662e 5f6a 736f 6e5f  st = self._json_
-00003a80: 5265 7175 6573 7428 7261 775f 7265 7175  Request(raw_requ
-00003a90: 6573 7429 0d0a 2020 2020 2020 2020 2020  est)..          
-00003aa0: 2020 0d0a 2020 2020 2020 2020 2020 2020    ..            
-00003ab0: 6874 7470 5f52 6573 706f 6e73 6520 3d20  http_Response = 
-00003ac0: 7365 6c66 2e5f 7265 7153 6573 7369 6f6e  self._reqSession
-00003ad0: 2e70 6f73 7428 7265 7155 726c 2c20 6a73  .post(reqUrl, js
-00003ae0: 6f6e 3d6a 736f 6e52 6571 7565 7374 2c20  on=jsonRequest, 
-00003af0: 2070 726f 7869 6573 3d73 656c 662e 5f70   proxies=self._p
-00003b00: 726f 7869 6573 2c20 7665 7269 6679 203d  roxies, verify =
-00003b10: 2073 656c 662e 5f63 6572 7466 696c 6573   self._certfiles
-00003b20: 2c20 6365 7274 203d 2073 656c 662e 5f73  , cert = self._s
-00003b30: 736c 4365 7274 2c20 7469 6d65 6f75 743d  slCert, timeout=
-00003b40: 2073 656c 662e 5f74 696d 656f 7574 290d   self._timeout).
-00003b50: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00003b60: 7572 6e20 6874 7470 5f52 6573 706f 6e73  urn http_Respons
-00003b70: 650d 0a20 2020 2020 2020 2065 7863 6570  e..        excep
-00003b80: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-00003b90: 7870 3a0d 0a20 2020 2020 2020 2020 2020  xp:..           
-00003ba0: 2044 5355 7365 724f 626a 6563 744c 6f67   DSUserObjectLog
-00003bb0: 4675 6e63 732e 4c6f 6745 7863 6570 7469  Funcs.LogExcepti
-00003bc0: 6f6e 2827 4461 7461 7374 7265 616d 5079  on('DatastreamPy
-00003bd0: 272c 2027 4453 5265 7370 6f6e 7365 2e67  ', 'DSResponse.g
-00003be0: 6574 5f52 6573 706f 6e73 6527 2c20 2745  et_Response', 'E
-00003bf0: 7863 6570 7469 6f6e 206f 6363 7572 6564  xception occured
-00003c00: 3a27 2c20 6578 7029 0d0a 2020 2020 2020  :', exp)..      
-00003c10: 2020 2020 2020 7261 6973 6520 6578 700d        raise exp.
-00003c20: 0a0d 0a20 2020 2020 2020 200d 0a20 2020  ...        ..   
-00003c30: 2064 6566 205f 6765 745f 6a73 6f6e 5f52   def _get_json_R
-00003c40: 6573 706f 6e73 6528 7365 6c66 2c20 7265  esponse(self, re
-00003c50: 7155 726c 2c20 7261 775f 7265 7175 6573  qUrl, raw_reques
-00003c60: 7429 3a0d 0a20 2020 2020 2020 2074 7279  t):..        try
-00003c70: 3a0d 0a20 2020 2020 2020 2020 2068 7474  :..          htt
-00003c80: 7052 6573 706f 6e73 6520 3d20 7365 6c66  pResponse = self
-00003c90: 2e5f 6765 745f 5265 7370 6f6e 7365 2872  ._get_Response(r
-00003ca0: 6571 5572 6c2c 2072 6177 5f72 6571 7565  eqUrl, raw_reque
-00003cb0: 7374 290d 0a20 2020 2020 2020 2020 2023  st)..          #
-00003cc0: 2063 6865 636b 2074 6865 2072 6573 706f   check the respo
-00003cd0: 6e73 650d 0a20 2020 2020 2020 2020 2069  nse..          i
-00003ce0: 6620 6874 7470 5265 7370 6f6e 7365 2e6f  f httpResponse.o
-00003cf0: 6b3a 0d0a 2020 2020 2020 2020 2020 2020  k:..            
-00003d00: 2020 6a73 6f6e 5f52 6573 706f 6e73 6520    json_Response 
-00003d10: 3d20 6469 6374 2868 7474 7052 6573 706f  = dict(httpRespo
-00003d20: 6e73 652e 6a73 6f6e 2829 290d 0a20 2020  nse.json())..   
-00003d30: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00003d40: 6e20 6a73 6f6e 5f52 6573 706f 6e73 650d  n json_Response.
-00003d50: 0a20 2020 2020 2020 2020 2065 6c69 6620  .          elif 
-00003d60: 6874 7470 5265 7370 6f6e 7365 2e73 7461  httpResponse.sta
-00003d70: 7475 735f 636f 6465 203d 3d20 3430 3020  tus_code == 400 
-00003d80: 6f72 2068 7474 7052 6573 706f 6e73 652e  or httpResponse.
-00003d90: 7374 6174 7573 5f63 6f64 6520 3d3d 2034  status_code == 4
-00003da0: 3033 3a0d 0a20 2020 2020 2020 2020 2020  03:..           
-00003db0: 2020 2020 2023 2070 6f73 7369 626c 6520       # possible 
-00003dc0: 4453 4661 756c 7420 6578 6365 7074 696f  DSFault exceptio
-00003dd0: 6e20 7265 7475 726e 6564 2064 7565 2074  n returned due t
-00003de0: 6f20 7065 726d 6973 7369 6f6e 732c 2065  o permissions, e
-00003df0: 7463 0d0a 2020 2020 2020 2020 2020 2020  tc..            
-00003e00: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00003e10: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00003e20: 794a 736f 6e20 3d20 6a73 6f6e 2e6c 6f61  yJson = json.loa
-00003e30: 6473 2868 7474 7052 6573 706f 6e73 652e  ds(httpResponse.
-00003e40: 7465 7874 290d 0a20 2020 2020 2020 2020  text)..         
-00003e50: 2020 2020 2020 2020 2020 2069 6620 274d             if 'M
-00003e60: 6573 7361 6765 2720 696e 2074 7279 4a73  essage' in tryJs
-00003e70: 6f6e 2e6b 6579 7328 2920 616e 6420 2743  on.keys() and 'C
-00003e80: 6f64 6527 2069 6e20 7472 794a 736f 6e2e  ode' in tryJson.
-00003e90: 6b65 7973 2829 3a0d 0a20 2020 2020 2020  keys():..       
-00003ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003eb0: 2066 6175 6c74 4469 6374 203d 2064 6963   faultDict = dic
-00003ec0: 7428 7472 794a 736f 6e29 0d0a 2020 2020  t(tryJson)..    
-00003ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ee0: 2020 2020 7261 6973 6520 4453 5573 6572      raise DSUser
-00003ef0: 4f62 6a65 6374 4661 756c 7428 6661 756c  ObjectFault(faul
-00003f00: 7444 6963 7429 0d0a 2020 2020 2020 2020  tDict)..        
-00003f10: 2020 2020 2020 2020 6578 6365 7074 206a          except j
-00003f20: 736f 6e2e 4a53 4f4e 4465 636f 6465 4572  son.JSONDecodeEr
-00003f30: 726f 7220 6173 206a 6465 636f 6465 6572  ror as jdecodeer
-00003f40: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
-00003f50: 2020 2020 2020 2020 7061 7373 0d0a 2020          pass..  
-00003f60: 2020 2020 2020 2020 2320 756e 6578 7065          # unexpe
-00003f70: 6374 6564 2072 6573 706f 6e73 6520 736f  cted response so
-00003f80: 2072 6169 7365 2061 7320 616e 2065 7272   raise as an err
-00003f90: 6f72 0d0a 2020 2020 2020 2020 2020 6874  or..          ht
-00003fa0: 7470 5265 7370 6f6e 7365 2e72 6169 7365  tpResponse.raise
-00003fb0: 5f66 6f72 5f73 7461 7475 7328 290d 0a20  _for_status().. 
-00003fc0: 2020 2020 2020 2065 7863 6570 7420 6a73         except js
-00003fd0: 6f6e 2e4a 534f 4e44 6563 6f64 6545 7272  on.JSONDecodeErr
-00003fe0: 6f72 2061 7320 6a64 6563 6f64 6565 7272  or as jdecodeerr
-00003ff0: 3a0d 0a20 2020 2020 2020 2020 2020 2044  :..            D
-00004000: 5355 7365 724f 626a 6563 744c 6f67 4675  SUserObjectLogFu
-00004010: 6e63 732e 4c6f 6745 7863 6570 7469 6f6e  ncs.LogException
-00004020: 2827 4461 7461 7374 7265 616d 5079 272c  ('DatastreamPy',
-00004030: 2027 4453 5265 7370 6f6e 7365 2e67 6574   'DSResponse.get
-00004040: 5f6a 736f 6e5f 5265 7370 6f6e 7365 272c  _json_Response',
-00004050: 2027 4a53 4f4e 2064 6563 6f64 6572 2045   'JSON decoder E
-00004060: 7863 6570 7469 6f6e 206f 6363 7572 6564  xception occured
-00004070: 3a27 2c20 6a64 6563 6f64 6565 7272 290d  :', jdecodeerr).
-00004080: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00004090: 7365 0d0a 2020 2020 2020 2020 6578 6365  se..        exce
-000040a0: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-000040b0: 6578 703a 0d0a 2020 2020 2020 2020 2020  exp:..          
-000040c0: 2020 4453 5573 6572 4f62 6a65 6374 4c6f    DSUserObjectLo
-000040d0: 6746 756e 6373 2e4c 6f67 4578 6365 7074  gFuncs.LogExcept
-000040e0: 696f 6e28 2744 6174 6173 7472 6561 6d50  ion('DatastreamP
-000040f0: 7927 2c20 2744 5352 6573 706f 6e73 652e  y', 'DSResponse.
-00004100: 6765 745f 6a73 6f6e 5f52 6573 706f 6e73  get_json_Respons
-00004110: 6527 2c20 2745 7863 6570 7469 6f6e 206f  e', 'Exception o
-00004120: 6363 7572 6564 3a27 2c20 6578 7029 0d0a  ccured:', exp)..
-00004130: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00004140: 650d 0a20 2020 200d 0a20 2020 2064 6566  e..    ..    def
-00004150: 205f 6765 745f 746f 6b65 6e28 7365 6c66   _get_token(self
-00004160: 2c20 6973 5072 6f78 793d 4661 6c73 6529  , isProxy=False)
-00004170: 3a0d 0a20 2020 2020 2020 2074 6f6b 656e  :..        token
-00004180: 5f75 726c 203d 2073 656c 662e 7572 6c20  _url = self.url 
-00004190: 2b20 2247 6574 546f 6b65 6e22 0d0a 2020  + "GetToken"..  
-000041a0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-000041b0: 2020 2020 2020 2020 7072 6f70 7469 6573          propties
-000041c0: 203d 205b 5d0d 0a20 2020 2020 2020 2020   = []..         
-000041d0: 2020 2070 726f 7074 6965 732e 6170 7065     propties.appe
-000041e0: 6e64 2850 726f 7065 7274 6965 7328 225f  nd(Properties("_
-000041f0: 5f41 7070 4964 222c 2044 5350 6163 6b61  _AppId", DSPacka
-00004200: 6765 496e 666f 2e61 7070 4964 2929 0d0a  geInfo.appId))..
-00004210: 2020 2020 2020 2020 2020 2020 7072 6f70              prop
-00004220: 7469 6573 2e61 7070 656e 6428 5072 6f70  ties.append(Prop
-00004230: 6572 7469 6573 2822 5265 7475 726e 4f70  erties("ReturnOp
-00004240: 7469 6f6e 7322 2c20 224e 6176 6967 6174  tions", "Navigat
-00004250: 6f72 5365 7269 6573 2c4e 6176 6967 6174  orSeries,Navigat
-00004260: 6f72 4461 7461 7479 7065 7322 2929 0d0a  orDatatypes"))..
-00004270: 0d0a 2020 2020 2020 2020 2020 2020 746f  ..            to
-00004280: 6b65 6e52 6571 203d 2054 6f6b 656e 5265  kenReq = TokenRe
-00004290: 7175 6573 7428 7365 6c66 2e75 7365 726e  quest(self.usern
-000042a0: 616d 652c 2073 656c 662e 7061 7373 776f  ame, self.passwo
-000042b0: 7264 2c20 7072 6f70 7469 6573 290d 0a20  rd, propties).. 
-000042c0: 2020 2020 2020 2020 2020 2072 6177 5f74             raw_t
-000042d0: 6f6b 656e 5265 7120 3d20 746f 6b65 6e52  okenReq = tokenR
-000042e0: 6571 2e67 6574 5f54 6f6b 656e 5265 7175  eq.get_TokenRequ
-000042f0: 6573 7428 290d 0a20 2020 2020 2020 2020  est()..         
-00004300: 2020 200d 0a20 2020 2020 2020 2020 2020     ..           
-00004310: 2023 506f 7374 2074 6865 2074 6f6b 656e   #Post the token
-00004320: 2072 6571 7565 7374 2074 6f20 6765 7420   request to get 
-00004330: 7265 7370 6f6e 7365 2069 6e20 6a73 6f6e  response in json
-00004340: 2066 6f72 6d61 740d 0a20 2020 2020 2020   format..       
-00004350: 2020 2020 206a 736f 6e5f 5265 7370 6f6e       json_Respon
-00004360: 7365 203d 2073 656c 662e 5f67 6574 5f6a  se = self._get_j
-00004370: 736f 6e5f 5265 7370 6f6e 7365 2874 6f6b  son_Response(tok
-00004380: 656e 5f75 726c 2c20 7261 775f 746f 6b65  en_url, raw_toke
-00004390: 6e52 6571 290d 0a20 2020 2020 2020 2020  nReq)..         
-000043a0: 2020 2073 656c 662e 746f 6b65 6e45 7870     self.tokenExp
-000043b0: 6972 7920 3d20 7365 6c66 2e6a 736f 6e44  iry = self.jsonD
-000043c0: 6174 6554 696d 655f 746f 5f64 6174 6574  ateTime_to_datet
-000043d0: 696d 6528 6a73 6f6e 5f52 6573 706f 6e73  ime(json_Respons
-000043e0: 655b 2754 6f6b 656e 4578 7069 7279 275d  e['TokenExpiry']
-000043f0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00004400: 656c 662e 746f 6b65 6e20 3d20 6a73 6f6e  elf.token = json
-00004410: 5f52 6573 706f 6e73 655b 2754 6f6b 656e  _Response['Token
-00004420: 5661 6c75 6527 5d0d 0a0d 0a20 2020 2020  Value']....     
-00004430: 2020 2020 2020 2023 2043 6865 636b 2074         # Check t
-00004440: 6865 2050 726f 7065 7274 6965 7320 636f  he Properties co
-00004450: 6c6c 6563 7469 6f6e 2066 6f72 2074 6865  llection for the
-00004460: 2075 726c 7320 7468 6174 2073 7065 6369   urls that speci
-00004470: 6679 2077 6865 7265 2074 6f20 6272 6f77  fy where to brow
-00004480: 7365 2066 6f72 2044 6174 6173 7472 6561  se for Datastrea
-00004490: 6d20 4e61 7669 6761 746f 720d 0a20 2020  m Navigator..   
-000044a0: 2020 2020 2020 2020 2069 6620 6a73 6f6e           if json
-000044b0: 5f52 6573 706f 6e73 655b 2750 726f 7065  _Response['Prope
-000044c0: 7274 6965 7327 5d20 616e 6420 6c65 6e28  rties'] and len(
-000044d0: 6a73 6f6e 5f52 6573 706f 6e73 655b 2750  json_Response['P
-000044e0: 726f 7065 7274 6965 7327 5d29 203e 2030  roperties']) > 0
-000044f0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00004500: 2020 2066 6f72 2070 726f 7020 696e 206a     for prop in j
-00004510: 736f 6e5f 5265 7370 6f6e 7365 5b27 5072  son_Response['Pr
-00004520: 6f70 6572 7469 6573 275d 3a0d 0a20 2020  operties']:..   
-00004530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004540: 2069 6620 6973 696e 7374 616e 6365 2870   if isinstance(p
-00004550: 726f 705b 274b 6579 275d 2c20 7374 7229  rop['Key'], str)
-00004560: 2061 6e64 2070 726f 705b 274b 6579 275d   and prop['Key']
-00004570: 2e6c 6f77 6572 2829 203d 3d20 276e 6176  .lower() == 'nav
-00004580: 6967 6174 6f72 7365 7269 6573 273a 0d0a  igatorseries':..
-00004590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000045a0: 2020 2020 2020 2020 7365 6c66 2e6e 6176          self.nav
-000045b0: 6967 6174 6f72 5365 7269 6573 5572 6c20  igatorSeriesUrl 
-000045c0: 3d20 7072 6f70 5b27 5661 6c75 6527 5d20  = prop['Value'] 
-000045d0: 2320 5468 6520 7572 6c20 746f 2062 726f  # The url to bro
-000045e0: 7773 6520 616e 6420 7365 6172 6368 2044  wse and search D
-000045f0: 6174 6173 7472 6561 6d20 4e61 7669 6761  atastream Naviga
-00004600: 746f 7220 666f 7220 7370 6563 6966 6963  tor for specific
-00004610: 2069 6e73 7472 756d 656e 7473 0d0a 2020   instruments..  
-00004620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004630: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-00004640: 6528 7072 6f70 5b27 4b65 7927 5d2c 2073  e(prop['Key'], s
-00004650: 7472 2920 616e 6420 7072 6f70 5b27 4b65  tr) and prop['Ke
-00004660: 7927 5d2e 6c6f 7765 7228 2920 3d3d 2027  y'].lower() == '
-00004670: 6e61 7669 6761 746f 7264 6174 6174 7970  navigatordatatyp
-00004680: 6573 273a 0d0a 2020 2020 2020 2020 2020  es':..          
-00004690: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000046a0: 6c66 2e6e 6176 6967 6174 6f72 4461 7461  lf.navigatorData
-000046b0: 7479 7065 7355 726c 203d 2070 726f 705b  typesUrl = prop[
-000046c0: 2756 616c 7565 275d 2023 2054 6865 2075  'Value'] # The u
-000046d0: 726c 2074 6f20 6272 6f77 7365 2061 6e64  rl to browse and
-000046e0: 2073 6561 7263 6820 4461 7461 7374 7265   search Datastre
-000046f0: 616d 204e 6176 6967 6174 6f72 2066 6f72  am Navigator for
-00004700: 2073 7065 6369 6669 6320 6461 7461 7479   specific dataty
-00004710: 7065 730d 0a20 2020 2020 2020 2020 2020  pes..           
-00004720: 200d 0a20 2020 2020 2020 2065 7863 6570   ..        excep
-00004730: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-00004740: 7870 3a0d 0a20 2020 2020 2020 2020 2020  xp:..           
-00004750: 2044 5355 7365 724f 626a 6563 744c 6f67   DSUserObjectLog
-00004760: 4675 6e63 732e 4c6f 6745 7863 6570 7469  Funcs.LogExcepti
-00004770: 6f6e 2827 4461 7461 7374 7265 616d 5079  on('DatastreamPy
-00004780: 272c 2027 4453 5265 7370 6f6e 7365 2e67  ', 'DSResponse.g
-00004790: 6574 5f74 6f6b 656e 272c 2027 4578 6365  et_token', 'Exce
-000047a0: 7074 696f 6e20 6f63 6375 7265 643a 272c  ption occured:',
-000047b0: 2065 7870 290d 0a20 2020 2020 2020 2020   exp)..         
-000047c0: 2020 2072 6169 7365 2065 7870 0d0a 0d0a     raise exp....
-000047d0: 2020 2020 6465 6620 4973 5661 6c69 6428      def IsValid(
-000047e0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-000047f0: 7265 7475 726e 2069 7369 6e73 7461 6e63  return isinstanc
-00004800: 6528 7365 6c66 2e74 6f6b 656e 2c20 7374  e(self.token, st
-00004810: 7229 2061 6e64 206c 656e 2873 656c 662e  r) and len(self.
-00004820: 746f 6b65 6e29 203e 2030 2061 6e64 2069  token) > 0 and i
-00004830: 7369 6e73 7461 6e63 6528 7365 6c66 2e74  sinstance(self.t
-00004840: 6f6b 656e 4578 7069 7279 2c20 6461 7465  okenExpiry, date
-00004850: 7469 6d65 290d 0a0d 0a20 2020 2064 6566  time)....    def
-00004860: 2043 6865 636b 5f54 6f6b 656e 2873 656c   Check_Token(sel
-00004870: 6629 3a0d 0a20 2020 2020 2020 2069 6620  f):..        if 
-00004880: 6e6f 7420 7365 6c66 2e49 7356 616c 6964  not self.IsValid
-00004890: 2829 3a0d 0a20 2020 2020 2020 2020 2020  ():..           
-000048a0: 2072 6169 7365 2045 7863 6570 7469 6f6e   raise Exception
-000048b0: 2822 596f 7520 6172 6520 6e6f 7420 6c6f  ("You are not lo
-000048c0: 6767 6564 206f 6e2e 2050 6c65 6173 6520  gged on. Please 
-000048d0: 7265 6372 6561 7465 2074 6869 7320 636c  recreate this cl
-000048e0: 6965 6e74 206f 626a 6563 7420 7375 7070  ient object supp
-000048f0: 6c79 696e 6720 7661 6c69 6420 7573 6572  lying valid user
-00004900: 2063 7265 6465 6e74 6961 6c73 2e22 290d   credentials.").
-00004910: 0a20 2020 2020 2020 2023 2041 2066 756e  .        # A fun
-00004920: 6374 696f 6e20 6361 6c6c 6564 2062 6566  ction called bef
-00004930: 6f72 6520 6576 6572 7920 7175 6572 7920  ore every query 
-00004940: 746f 2063 6865 636b 2061 6e64 2072 656e  to check and ren
-00004950: 6577 2074 6865 2074 6f6b 656e 2069 6620  ew the token if 
-00004960: 7769 7468 696e 2031 3520 6d69 6e75 7465  within 15 minute
-00004970: 7320 6f66 2065 7870 6972 7920 7469 6d65  s of expiry time
-00004980: 206f 7220 6c61 7465 720d 0a20 2020 2020   or later..     
-00004990: 2020 2074 696d 6552 656e 6577 203d 2064     timeRenew = d
-000049a0: 6174 6574 696d 652e 7574 636e 6f77 2829  atetime.utcnow()
-000049b0: 202b 2074 696d 6564 656c 7461 286d 696e   + timedelta(min
-000049c0: 7574 6573 203d 2031 3529 2023 2063 7572  utes = 15) # cur
-000049d0: 696f 7573 6c79 2075 7463 6e6f 7728 2920  iously utcnow() 
-000049e0: 6d65 7468 6f64 2064 6f65 736e 2774 2073  method doesn't s
-000049f0: 6574 2074 6865 2074 696d 6520 7a6f 6e65  et the time zone
-00004a00: 2074 6f20 7574 632e 2057 6520 6e65 6564   to utc. We need
-00004a10: 2074 6f20 646f 2073 6f20 746f 2063 6f6d   to do so to com
-00004a20: 7061 7265 2077 6974 6820 746f 6b65 6e2e  pare with token.
-00004a30: 0d0a 2020 2020 2020 2020 7469 6d65 5265  ..        timeRe
-00004a40: 6e65 7720 3d20 6461 7465 7469 6d65 2874  new = datetime(t
-00004a50: 696d 6552 656e 6577 2e79 6561 722c 2074  imeRenew.year, t
-00004a60: 696d 6552 656e 6577 2e6d 6f6e 7468 2c20  imeRenew.month, 
-00004a70: 7469 6d65 5265 6e65 772e 6461 792c 2074  timeRenew.day, t
-00004a80: 696d 6552 656e 6577 2e68 6f75 722c 2074  imeRenew.hour, t
-00004a90: 696d 6552 656e 6577 2e6d 696e 7574 652c  imeRenew.minute,
-00004aa0: 2074 696d 6552 656e 6577 2e73 6563 6f6e   timeRenew.secon
-00004ab0: 642c 2030 2c20 747a 696e 666f 3d70 7974  d, 0, tzinfo=pyt
-00004ac0: 7a2e 7574 6329 0d0a 2020 2020 2020 2020  z.utc)..        
-00004ad0: 6966 2073 656c 662e 746f 6b65 6e45 7870  if self.tokenExp
-00004ae0: 6972 7920 3c3d 2074 696d 6552 656e 6577  iry <= timeRenew
-00004af0: 203a 0d0a 2020 2020 2020 2020 2020 2020   :..            
-00004b00: 7365 6c66 2e5f 6765 745f 746f 6b65 6e28  self._get_token(
-00004b10: 290d 0a0d 0a20 2020 200d 0a20 2020 2064  )....    ..    d
-00004b20: 6566 205f 6a73 6f6e 5f52 6571 7565 7374  ef _json_Request
-00004b30: 2873 656c 662c 2072 6177 5f74 6578 7429  (self, raw_text)
-00004b40: 3a0d 0a20 2020 2020 2020 2023 636f 6e76  :..        #conv
-00004b50: 6572 7420 7468 6520 6469 6374 696f 6e61  ert the dictiona
-00004b60: 7279 2028 7261 7720 7465 7874 2920 746f  ry (raw text) to
-00004b70: 206a 736f 6e20 7465 7874 2066 6972 7374   json text first
-00004b80: 0d0a 2020 2020 2020 2020 6a73 6f6e 5465  ..        jsonTe
-00004b90: 7874 203d 206a 736f 6e2e 6475 6d70 7328  xt = json.dumps(
-00004ba0: 7261 775f 7465 7874 290d 0a20 2020 2020  raw_text)..     
-00004bb0: 2020 2062 7974 6554 656d 7020 3d20 6279     byteTemp = by
-00004bc0: 7465 7328 6a73 6f6e 5465 7874 2c27 7574  tes(jsonText,'ut
-00004bd0: 662d 3827 290d 0a20 2020 2020 2020 2062  f-8')..        b
-00004be0: 7974 6554 656d 7020 3d20 6a73 6f6e 5465  yteTemp = jsonTe
-00004bf0: 7874 2e65 6e63 6f64 6528 2775 7466 2d38  xt.encode('utf-8
-00004c00: 2729 0d0a 2020 2020 2020 2020 2363 6f6e  ')..        #con
-00004c10: 7665 7274 2074 6865 206a 736f 6e20 5465  vert the json Te
-00004c20: 7874 2074 6f20 6a73 6f6e 2066 6f72 6d61  xt to json forma
-00004c30: 7474 6564 2052 6571 7565 7374 0d0a 2020  tted Request..  
-00004c40: 2020 2020 2020 6a73 6f6e 5265 7175 6573        jsonReques
-00004c50: 7420 3d20 6a73 6f6e 2e6c 6f61 6473 2862  t = json.loads(b
-00004c60: 7974 6554 656d 7029 0d0a 2020 2020 2020  yteTemp)..      
-00004c70: 2020 7265 7475 726e 206a 736f 6e52 6571    return jsonReq
-00004c80: 7565 7374 0d0a 0d0a 2020 2020 6465 6620  uest....    def 
-00004c90: 6a73 6f6e 4461 7465 5469 6d65 5f74 6f5f  jsonDateTime_to_
-00004ca0: 6461 7465 7469 6d65 2873 656c 662c 206a  datetime(self, j
-00004cb0: 736f 6e44 6174 6529 3a0d 0a20 2020 2020  sonDate):..     
-00004cc0: 2020 2023 2043 6f6e 7665 7274 2061 204a     # Convert a J
-00004cd0: 534f 4e20 2f44 6174 6528 2920 7374 7269  SON /Date() stri
-00004ce0: 6e67 2074 6f20 6120 6461 7465 7469 6d65  ng to a datetime
-00004cf0: 206f 626a 6563 740d 0a20 2020 2020 2020   object..       
-00004d00: 2069 6620 6a73 6f6e 4461 7465 2069 7320   if jsonDate is 
-00004d10: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00004d20: 2020 2072 6574 7572 6e20 4e6f 6e65 0d0a     return None..
-00004d30: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00004d40: 2020 2020 2020 2020 2020 6d61 7463 6820            match 
-00004d50: 3d20 7265 2e6d 6174 6368 2872 225e 282f  = re.match(r"^(/
-00004d60: 4461 7465 5c28 2928 2d3f 5c64 2a29 285c  Date\()(-?\d*)(\
-00004d70: 292f 2922 2c20 6a73 6f6e 4461 7465 290d  )/)", jsonDate).
-00004d80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00004d90: 6d61 7463 6820 3d3d 204e 6f6e 653a 0d0a  match == None:..
-00004da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004db0: 6d61 7463 6820 3d20 7265 2e6d 6174 6368  match = re.match
-00004dc0: 2872 225e 282f 4461 7465 5c28 2928 2d3f  (r"^(/Date\()(-?
-00004dd0: 5c64 2a29 285b 2b2d 5d29 282e 2e29 282e  \d*)([+-])(..)(.
-00004de0: 2e29 285c 292f 2922 2c20 6a73 6f6e 4461  .)(\)/)", jsonDa
-00004df0: 7465 290d 0a20 2020 2020 2020 2020 2020  te)..           
-00004e00: 2069 6620 6d61 7463 683a 0d0a 2020 2020   if match:..    
-00004e10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00004e20: 726e 2064 6174 6574 696d 6528 3139 3730  rn datetime(1970
-00004e30: 2c20 312c 2031 2c20 747a 696e 666f 3d70  , 1, 1, tzinfo=p
-00004e40: 7974 7a2e 7574 6329 202b 2074 696d 6564  ytz.utc) + timed
-00004e50: 656c 7461 2873 6563 6f6e 6473 3d66 6c6f  elta(seconds=flo
-00004e60: 6174 286d 6174 6368 2e67 726f 7570 2832  at(match.group(2
-00004e70: 2929 2f31 3030 3029 0d0a 2020 2020 2020  ))/1000)..      
-00004e80: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00004e90: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00004ea0: 7365 2045 7863 6570 7469 6f6e 2822 496e  se Exception("In
-00004eb0: 7661 6c69 6420 4a53 4f4e 2044 6174 653a  valid JSON Date:
-00004ec0: 2022 202b 206a 736f 6e44 6174 6529 0d0a   " + jsonDate)..
-00004ed0: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-00004ee0: 7863 6570 7469 6f6e 2061 7320 6578 703a  xception as exp:
-00004ef0: 0d0a 2020 2020 2020 2020 2020 2020 4453  ..            DS
-00004f00: 5573 6572 4f62 6a65 6374 4c6f 6746 756e  UserObjectLogFun
-00004f10: 6373 2e4c 6f67 4578 6365 7074 696f 6e28  cs.LogException(
-00004f20: 2744 6174 6173 7472 6561 6d50 7927 2c20  'DatastreamPy', 
-00004f30: 2744 5352 6573 706f 6e73 652e 6a73 6f6e  'DSResponse.json
-00004f40: 4461 7465 5469 6d65 5f74 6f5f 6461 7465  DateTime_to_date
-00004f50: 7469 6d65 272c 2027 4578 6365 7074 696f  time', 'Exceptio
-00004f60: 6e20 6f63 6375 7265 643a 272c 2065 7870  n occured:', exp
-00004f70: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-00004f80: 6169 7365 2065 7870 0d0a 2020 2020 2020  aise exp..      
-00004f90: 2020 2020 2020 0d0a 2020 2020 6465 6620        ..    def 
-00004fa0: 5f67 6574 5f44 6174 6528 7365 6c66 2c20  _get_Date(self, 
-00004fb0: 6a73 6f6e 4461 7465 293a 0d0a 2020 2020  jsonDate):..    
-00004fc0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00004fd0: 2020 2020 2020 236d 6174 6368 203d 2072        #match = r
-00004fe0: 652e 6d61 7463 6828 225e 2f44 6174 655b  e.match("^/Date[
-00004ff0: 285d 5b30 2d39 5d7b 3133 7d5b 2b5d 5b30  (][0-9]{13}[+][0
-00005000: 2d39 5d7b 347d 5b29 5d2f 222c 206a 736f  -9]{4}[)]/", jso
-00005010: 6e44 6174 6529 0d0a 2020 2020 2020 2020  nDate)..        
-00005020: 2020 2020 6d61 7463 6820 3d20 7265 2e6d      match = re.m
-00005030: 6174 6368 2872 225e 282f 4461 7465 5c28  atch(r"^(/Date\(
-00005040: 2928 2d3f 5c64 2a29 285b 2b2d 5d29 282e  )(-?\d*)([+-])(.
-00005050: 2e29 282e 2e29 285c 292f 2922 2c20 6a73  .)(..)(\)/)", js
-00005060: 6f6e 4461 7465 290d 0a20 2020 2020 2020  onDate)..       
-00005070: 2020 2020 2069 6620 6d61 7463 683a 0d0a       if match:..
-00005080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005090: 2364 203d 2072 652e 7365 6172 6368 2827  #d = re.search('
-000050a0: 5b30 2d39 5d7b 3133 7d27 2c20 6a73 6f6e  [0-9]{13}', json
-000050b0: 4461 7465 290d 0a20 2020 2020 2020 2020  Date)..         
-000050c0: 2020 2020 2020 2064 203d 2066 6c6f 6174         d = float
-000050d0: 286d 6174 6368 2e67 726f 7570 2832 2929  (match.group(2))
-000050e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000050f0: 2020 6e64 6174 6520 3d20 6461 7465 7469    ndate = dateti
-00005100: 6d65 2831 3937 302c 312c 3129 202b 2074  me(1970,1,1) + t
-00005110: 696d 6564 656c 7461 2873 6563 6f6e 6473  imedelta(seconds
-00005120: 3d66 6c6f 6174 2864 292f 3130 3030 290d  =float(d)/1000).
-00005130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005140: 2075 7463 6461 7465 203d 2070 7974 7a2e   utcdate = pytz.
-00005150: 5554 432e 6672 6f6d 7574 6328 6e64 6174  UTC.fromutc(ndat
-00005160: 6529 2e73 7472 6674 696d 6528 2725 592d  e).strftime('%Y-
-00005170: 256d 2d25 6427 290d 0a20 2020 2020 2020  %m-%d')..       
-00005180: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00005190: 7574 6364 6174 650d 0a20 2020 2020 2020  utcdate..       
-000051a0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-000051b0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000051c0: 6520 4578 6365 7074 696f 6e28 2249 6e76  e Exception("Inv
-000051d0: 616c 6964 204a 534f 4e20 4461 7465 2229  alid JSON Date")
-000051e0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-000051f0: 2045 7863 6570 7469 6f6e 2061 7320 6578   Exception as ex
-00005200: 703a 0d0a 2020 2020 2020 2020 2020 2020  p:..            
-00005210: 4453 5573 6572 4f62 6a65 6374 4c6f 6746  DSUserObjectLogF
-00005220: 756e 6373 2e4c 6f67 4578 6365 7074 696f  uncs.LogExceptio
-00005230: 6e28 2744 6174 6173 7472 6561 6d50 7927  n('DatastreamPy'
-00005240: 2c20 2744 5352 6573 706f 6e73 652e 6765  , 'DSResponse.ge
-00005250: 745f 4461 7465 272c 2027 4578 6365 7074  t_Date', 'Except
-00005260: 696f 6e20 6f63 6375 7265 643a 272c 2065  ion occured:', e
-00005270: 7870 290d 0a20 2020 2020 2020 2020 2020  xp)..           
-00005280: 2072 6169 7365 2065 7870 0d0a 2020 2020   raise exp..    
-00005290: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
-000052a0: 2020 2020 2020 0d0a 2020 2020 0d0a 2020        ..    ..  
-000052b0: 2020 6465 6620 5f67 6574 5f44 6174 6174    def _get_Datat
-000052c0: 7970 6556 616c 7565 7328 7365 6c66 2c20  ypeValues(self, 
-000052d0: 6a73 6f6e 5265 7370 293a 0d0a 2020 2020  jsonResp):..    
-000052e0: 2020 2020 6d75 6c74 6949 6e64 6578 203d      multiIndex =
-000052f0: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00005300: 6466 203d 2070 642e 4461 7461 4672 616d  df = pd.DataFram
-00005310: 6528 290d 0a20 2020 2020 2020 2076 616c  e()..        val
-00005320: 4469 6374 203d 207b 2249 6e73 7472 756d  Dict = {"Instrum
-00005330: 656e 7422 3a5b 5d2c 2244 6174 6174 7970  ent":[],"Datatyp
-00005340: 6522 3a5b 5d2c 2256 616c 7565 223a 5b5d  e":[],"Value":[]
-00005350: 2c22 4375 7272 656e 6379 223a 5b5d 7d0d  ,"Currency":[]}.
-00005360: 0a0d 0a20 2020 2020 2020 2066 6f72 2069  ...        for i
-00005370: 7465 6d20 696e 206a 736f 6e52 6573 705b  tem in jsonResp[
-00005380: 2744 6174 6154 7970 6556 616c 7565 7327  'DataTypeValues'
-00005390: 5d3a 200d 0a20 2020 2020 2020 2020 2020  ]: ..           
-000053a0: 2064 6174 6174 7970 6520 3d20 6974 656d   datatype = item
-000053b0: 5b27 4461 7461 5479 7065 275d 0d0a 2020  ['DataType']..  
-000053c0: 2020 2020 2020 2020 2020 0d0a 2020 2020            ..    
-000053d0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-000053e0: 2069 7465 6d5b 2753 796d 626f 6c56 616c   item['SymbolVal
-000053f0: 7565 7327 5d3a 0d0a 2020 2020 2020 2020  ues']:..        
-00005400: 2020 2020 2020 2069 6e73 7472 756d 656e         instrumen
-00005410: 7420 3d20 695b 2753 796d 626f 6c27 5d0d  t = i['Symbol'].
-00005420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005430: 6375 7272 656e 6379 203d 204e 6f6e 650d  currency = None.
-00005440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005450: 6966 2027 4375 7272 656e 6379 2720 696e  if 'Currency' in
-00005460: 2069 3a0d 0a20 2020 2020 2020 2020 2020   i:..           
-00005470: 2020 2020 2020 2020 6375 7272 656e 6379          currency
-00005480: 203d 2069 5b27 4375 7272 656e 6379 275d   = i['Currency']
-00005490: 2069 6620 695b 2743 7572 7265 6e63 7927   if i['Currency'
-000054a0: 5d20 656c 7365 2027 4e41 270d 0a0d 0a20  ] else 'NA'.... 
-000054b0: 2020 2020 2020 2020 2020 2020 2020 7661                va
-000054c0: 6c44 6963 745b 2244 6174 6174 7970 6522  lDict["Datatype"
-000054d0: 5d2e 6170 7065 6e64 2864 6174 6174 7970  ].append(datatyp
-000054e0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-000054f0: 2020 2076 616c 4469 6374 5b22 496e 7374     valDict["Inst
-00005500: 7275 6d65 6e74 225d 2e61 7070 656e 6428  rument"].append(
-00005510: 696e 7374 7275 6d65 6e74 290d 0a20 2020  instrument)..   
-00005520: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-00005530: 7572 7265 6e63 793a 0d0a 2020 2020 2020  urrency:..      
-00005540: 2020 2020 2020 2020 2020 2020 2076 616c               val
-00005550: 4469 6374 5b27 4375 7272 656e 6379 275d  Dict['Currency']
-00005560: 2e61 7070 656e 6428 6375 7272 656e 6379  .append(currency
-00005570: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00005580: 2020 2020 2020 636f 6c4e 616d 6573 203d        colNames =
-00005590: 2028 696e 7374 7275 6d65 6e74 2c20 6461   (instrument, da
-000055a0: 7461 7479 7065 2c20 6375 7272 656e 6379  tatype, currency
-000055b0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-000055c0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-000055d0: 2020 2020 2020 2020 2020 2020 636f 6c4e              colN
-000055e0: 616d 6573 203d 2028 696e 7374 7275 6d65  ames = (instrume
-000055f0: 6e74 2c20 6461 7461 7479 7065 290d 0a0d  nt, datatype)...
-00005600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005610: 7661 6c75 6573 203d 2069 5b27 5661 6c75  values = i['Valu
-00005620: 6527 5d0d 0a20 2020 2020 2020 2020 2020  e']..           
-00005630: 2020 2020 7661 6c54 7970 6520 3d20 695b      valType = i[
-00005640: 2754 7970 6527 5d0d 0a0d 0a20 2020 2020  'Type']....     
-00005650: 2020 2020 2020 2020 2020 2348 616e 646c            #Handl
-00005660: 696e 6720 616c 6c20 706f 7373 6962 6c65  ing all possible
-00005670: 2074 7970 6573 206f 6620 6461 7461 2061   types of data a
-00005680: 7320 7065 7220 4453 5379 6d62 6f6c 5265  s per DSSymbolRe
-00005690: 7370 6f6e 7365 5661 6c75 6554 7970 650d  sponseValueType.
-000056a0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000056b0: 2020 2354 6865 7365 2076 616c 7565 2074    #These value t
-000056c0: 7970 6573 2072 6574 7572 6e20 616e 2061  ypes return an a
-000056d0: 7272 6179 0d0a 2020 2020 2020 2020 2020  rray..          
-000056e0: 2020 2020 2069 6620 7661 6c54 7970 6520       if valType 
-000056f0: 696e 205b 4453 5379 6d62 6f6c 5265 7370  in [DSSymbolResp
-00005700: 6f6e 7365 5661 6c75 6554 7970 652e 426f  onseValueType.Bo
-00005710: 6f6c 4172 7261 792c 200d 0a20 2020 2020  olArray, ..     
-00005720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005730: 2020 2020 2020 2020 2044 5353 796d 626f           DSSymbo
-00005740: 6c52 6573 706f 6e73 6556 616c 7565 5479  lResponseValueTy
-00005750: 7065 2e49 6e74 4172 7261 792c 200d 0a20  pe.IntArray, .. 
-00005760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005770: 2020 2020 2020 2020 2020 2020 2044 5353               DSS
-00005780: 796d 626f 6c52 6573 706f 6e73 6556 616c  ymbolResponseVal
-00005790: 7565 5479 7065 2e44 6174 6554 696d 6541  ueType.DateTimeA
-000057a0: 7272 6179 2c0d 0a20 2020 2020 2020 2020  rray,..         
-000057b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000057c0: 2020 2020 2044 5353 796d 626f 6c52 6573       DSSymbolRes
-000057d0: 706f 6e73 6556 616c 7565 5479 7065 2e44  ponseValueType.D
-000057e0: 6f75 626c 6541 7272 6179 2c0d 0a20 2020  oubleArray,..   
-000057f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005800: 2020 2020 2020 2020 2020 2044 5353 796d             DSSym
-00005810: 626f 6c52 6573 706f 6e73 6556 616c 7565  bolResponseValue
-00005820: 5479 7065 2e53 7472 696e 6741 7272 6179  Type.StringArray
-00005830: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00005840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005850: 2044 5353 796d 626f 6c52 6573 706f 6e73   DSSymbolRespons
-00005860: 6556 616c 7565 5479 7065 2e4f 626a 6563  eValueType.Objec
-00005870: 7441 7272 6179 2c0d 0a20 2020 2020 2020  tArray,..       
-00005880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005890: 2020 2020 2020 2044 5353 796d 626f 6c52         DSSymbolR
-000058a0: 6573 706f 6e73 6556 616c 7565 5479 7065  esponseValueType
-000058b0: 2e4e 756c 6c61 626c 6542 6f6f 6c41 7272  .NullableBoolArr
-000058c0: 6179 2c0d 0a20 2020 2020 2020 2020 2020  ay,..           
-000058d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058e0: 2020 2044 5353 796d 626f 6c52 6573 706f     DSSymbolRespo
-000058f0: 6e73 6556 616c 7565 5479 7065 2e4e 756c  nseValueType.Nul
-00005900: 6c61 626c 6549 6e74 4172 7261 792c 0d0a  lableIntArray,..
-00005910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005920: 2020 2020 2020 2020 2020 2020 2020 4453                DS
-00005930: 5379 6d62 6f6c 5265 7370 6f6e 7365 5661  SymbolResponseVa
-00005940: 6c75 6554 7970 652e 4e75 6c6c 6162 6c65  lueType.Nullable
-00005950: 4461 7465 5469 6d65 4172 7261 792c 0d0a  DateTimeArray,..
-00005960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005970: 2020 2020 2020 2020 2020 2020 2020 4453                DS
-00005980: 5379 6d62 6f6c 5265 7370 6f6e 7365 5661  SymbolResponseVa
-00005990: 6c75 6554 7970 652e 4e75 6c6c 6162 6c65  lueType.Nullable
-000059a0: 446f 7562 6c65 4172 7261 795d 3a0d 0a20  DoubleArray]:.. 
-000059b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000059c0: 2020 2023 5468 6520 6172 7261 7920 6361     #The array ca
-000059d0: 6e20 6265 206f 6620 626f 6f6c 2c20 646f  n be of bool, do
-000059e0: 7562 6c65 2c20 696e 742c 2073 7472 696e  uble, int, strin
-000059f0: 672c 2064 6174 6573 206f 7220 4f62 6a65  g, dates or Obje
-00005a00: 6374 0d0a 0d0a 2020 2020 2020 2020 2020  ct....          
-00005a10: 2020 2020 2020 2020 2020 2343 6865 636b            #Check
-00005a20: 2069 6620 7468 6520 6172 7261 7920 6f66   if the array of
-00005a30: 2068 6173 204a 534f 4e20 6461 7465 2073   has JSON date s
-00005a40: 7472 696e 6720 616e 6420 636f 6e76 6572  tring and conver
-00005a50: 7420 6561 6368 2074 6f20 4461 7465 7469  t each to Dateti
-00005a60: 6d65 0d0a 2020 2020 2020 2020 2020 2020  me..            
-00005a70: 2020 2020 2020 2020 7465 6d70 203d 205b          temp = [
-00005a80: 7365 6c66 2e5f 6765 745f 4461 7465 2878  self._get_Date(x
-00005a90: 2920 6966 2069 7369 6e73 7461 6e63 6528  ) if isinstance(
-00005aa0: 782c 2073 7472 2920 616e 6420 782e 7374  x, str) and x.st
-00005ab0: 6172 7473 7769 7468 2827 2f44 6174 6528  artswith('/Date(
-00005ac0: 2729 2065 6c73 6520 7820 666f 7220 7820  ') else x for x 
-00005ad0: 696e 2076 616c 7565 735d 0d0a 2020 2020  in values]..    
-00005ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005af0: 6466 5b63 6f6c 4e61 6d65 735d 203d 2074  df[colNames] = t
-00005b00: 656d 700d 0a20 2020 2020 2020 2020 2020  emp..           
-00005b10: 2020 2020 2020 2020 200d 0a20 2020 2020           ..     
-00005b20: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00005b30: 6620 6c65 6e28 7661 6c75 6573 2920 3e20  f len(values) > 
-00005b40: 313a 0d0a 2020 2020 2020 2020 2020 2020  1:..            
-00005b50: 2020 2020 2020 2020 2020 2020 6d75 6c74              mult
-00005b60: 6949 6e64 6578 203d 2054 7275 650d 0a20  iIndex = True.. 
-00005b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b80: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00005b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ba0: 2020 6d75 6c74 6949 6e64 6578 203d 2046    multiIndex = F
-00005bb0: 616c 7365 0d0a 2020 2020 2020 2020 2020  alse..          
-00005bc0: 2020 2020 2020 2020 2020 2020 2020 7661                va
-00005bd0: 6c44 6963 745b 2256 616c 7565 225d 2e61  lDict["Value"].a
-00005be0: 7070 656e 6428 7661 6c75 6573 5b30 5d29  ppend(values[0])
-00005bf0: 2020 0d0a 0d0a 2020 2020 2020 2020 2020    ....          
-00005c00: 2020 2020 2023 5468 6573 6520 7661 6c75       #These valu
-00005c10: 6520 7479 7065 7320 7265 7475 726e 2073  e types return s
-00005c20: 696e 676c 6520 7661 6c75 650d 0a20 2020  ingle value..   
-00005c30: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00005c40: 2076 616c 5479 7065 2069 6e20 5b44 5353   valType in [DSS
-00005c50: 796d 626f 6c52 6573 706f 6e73 6556 616c  ymbolResponseVal
-00005c60: 7565 5479 7065 2e45 6d70 7479 2c0d 0a20  ueType.Empty,.. 
-00005c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005c80: 2020 2020 2020 2020 2020 2020 2020 2044                 D
-00005c90: 5353 796d 626f 6c52 6573 706f 6e73 6556  SSymbolResponseV
-00005ca0: 616c 7565 5479 7065 2e42 6f6f 6c2c 0d0a  alueType.Bool,..
-00005cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000039d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000039e0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
+000039f0: 6465 6620 5f67 6574 5f52 6573 706f 6e73  def _get_Respons
+00003a00: 6528 7365 6c66 2c20 7265 7155 726c 2c20  e(self, reqUrl, 
+00003a10: 7261 775f 7265 7175 6573 7429 3a0d 0a20  raw_request):.. 
+00003a20: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+00003a30: 2020 2020 2020 2020 2023 636f 6e76 6572           #conver
+00003a40: 7420 7261 7720 7265 7175 6573 7420 746f  t raw request to
+00003a50: 206a 736f 6e20 666f 726d 6174 2062 6566   json format bef
+00003a60: 6f72 6520 706f 7374 0d0a 2020 2020 2020  ore post..      
+00003a70: 2020 2020 2020 6a73 6f6e 5265 7175 6573        jsonReques
+00003a80: 7420 3d20 7365 6c66 2e5f 6a73 6f6e 5f52  t = self._json_R
+00003a90: 6571 7565 7374 2872 6177 5f72 6571 7565  equest(raw_reque
+00003aa0: 7374 290d 0a20 2020 2020 2020 2020 2020  st)..           
+00003ab0: 200d 0a20 2020 2020 2020 2020 2020 2068   ..            h
+00003ac0: 7474 705f 5265 7370 6f6e 7365 203d 2073  ttp_Response = s
+00003ad0: 656c 662e 5f72 6571 5365 7373 696f 6e2e  elf._reqSession.
+00003ae0: 706f 7374 2872 6571 5572 6c2c 206a 736f  post(reqUrl, jso
+00003af0: 6e3d 6a73 6f6e 5265 7175 6573 742c 2020  n=jsonRequest,  
+00003b00: 7072 6f78 6965 733d 7365 6c66 2e5f 7072  proxies=self._pr
+00003b10: 6f78 6965 732c 2076 6572 6966 7920 3d20  oxies, verify = 
+00003b20: 7365 6c66 2e5f 6365 7274 6669 6c65 732c  self._certfiles,
+00003b30: 2063 6572 7420 3d20 7365 6c66 2e5f 7373   cert = self._ss
+00003b40: 6c43 6572 742c 2074 696d 656f 7574 3d20  lCert, timeout= 
+00003b50: 7365 6c66 2e5f 7469 6d65 6f75 7429 0d0a  self._timeout)..
+00003b60: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00003b70: 726e 2068 7474 705f 5265 7370 6f6e 7365  rn http_Response
+00003b80: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+00003b90: 2045 7863 6570 7469 6f6e 2061 7320 6578   Exception as ex
+00003ba0: 703a 0d0a 2020 2020 2020 2020 2020 2020  p:..            
+00003bb0: 4453 5573 6572 4f62 6a65 6374 4c6f 6746  DSUserObjectLogF
+00003bc0: 756e 6373 2e4c 6f67 4578 6365 7074 696f  uncs.LogExceptio
+00003bd0: 6e28 2744 6174 6173 7472 6561 6d50 7927  n('DatastreamPy'
+00003be0: 2c20 2744 5352 6573 706f 6e73 652e 6765  , 'DSResponse.ge
+00003bf0: 745f 5265 7370 6f6e 7365 272c 2027 4578  t_Response', 'Ex
+00003c00: 6365 7074 696f 6e20 6f63 6375 7265 643a  ception occured:
+00003c10: 272c 2065 7870 290d 0a20 2020 2020 2020  ', exp)..       
+00003c20: 2020 2020 2072 6169 7365 2065 7870 0d0a       raise exp..
+00003c30: 0d0a 2020 2020 2020 2020 0d0a 2020 2020  ..        ..    
+00003c40: 6465 6620 5f67 6574 5f6a 736f 6e5f 5265  def _get_json_Re
+00003c50: 7370 6f6e 7365 2873 656c 662c 2072 6571  sponse(self, req
+00003c60: 5572 6c2c 2072 6177 5f72 6571 7565 7374  Url, raw_request
+00003c70: 293a 0d0a 2020 2020 2020 2020 7472 793a  ):..        try:
+00003c80: 0d0a 2020 2020 2020 2020 2020 6874 7470  ..          http
+00003c90: 5265 7370 6f6e 7365 203d 2073 656c 662e  Response = self.
+00003ca0: 5f67 6574 5f52 6573 706f 6e73 6528 7265  _get_Response(re
+00003cb0: 7155 726c 2c20 7261 775f 7265 7175 6573  qUrl, raw_reques
+00003cc0: 7429 0d0a 2020 2020 2020 2020 2020 2320  t)..          # 
+00003cd0: 6368 6563 6b20 7468 6520 7265 7370 6f6e  check the respon
+00003ce0: 7365 0d0a 2020 2020 2020 2020 2020 6966  se..          if
+00003cf0: 2068 7474 7052 6573 706f 6e73 652e 6f6b   httpResponse.ok
+00003d00: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00003d10: 206a 736f 6e5f 5265 7370 6f6e 7365 203d   json_Response =
+00003d20: 2064 6963 7428 6874 7470 5265 7370 6f6e   dict(httpRespon
+00003d30: 7365 2e6a 736f 6e28 2929 0d0a 2020 2020  se.json())..    
+00003d40: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00003d50: 206a 736f 6e5f 5265 7370 6f6e 7365 0d0a   json_Response..
+00003d60: 2020 2020 2020 2020 2020 656c 6966 2068            elif h
+00003d70: 7474 7052 6573 706f 6e73 652e 7374 6174  ttpResponse.stat
+00003d80: 7573 5f63 6f64 6520 3d3d 2034 3030 206f  us_code == 400 o
+00003d90: 7220 6874 7470 5265 7370 6f6e 7365 2e73  r httpResponse.s
+00003da0: 7461 7475 735f 636f 6465 203d 3d20 3430  tatus_code == 40
+00003db0: 333a 0d0a 2020 2020 2020 2020 2020 2020  3:..            
+00003dc0: 2020 2020 2320 706f 7373 6962 6c65 2044      # possible D
+00003dd0: 5346 6175 6c74 2065 7863 6570 7469 6f6e  SFault exception
+00003de0: 2072 6574 7572 6e65 6420 6475 6520 746f   returned due to
+00003df0: 2070 6572 6d69 7373 696f 6e73 2c20 6574   permissions, et
+00003e00: 630d 0a20 2020 2020 2020 2020 2020 2020  c..             
+00003e10: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+00003e20: 2020 2020 2020 2020 2020 2020 2074 7279               try
+00003e30: 4a73 6f6e 203d 206a 736f 6e2e 6c6f 6164  Json = json.load
+00003e40: 7328 6874 7470 5265 7370 6f6e 7365 2e74  s(httpResponse.t
+00003e50: 6578 7429 0d0a 2020 2020 2020 2020 2020  ext)..          
+00003e60: 2020 2020 2020 2020 2020 6966 2027 4d65            if 'Me
+00003e70: 7373 6167 6527 2069 6e20 7472 794a 736f  ssage' in tryJso
+00003e80: 6e2e 6b65 7973 2829 2061 6e64 2027 436f  n.keys() and 'Co
+00003e90: 6465 2720 696e 2074 7279 4a73 6f6e 2e6b  de' in tryJson.k
+00003ea0: 6579 7328 293a 0d0a 2020 2020 2020 2020  eys():..        
+00003eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003ec0: 6661 756c 7444 6963 7420 3d20 6469 6374  faultDict = dict
+00003ed0: 2874 7279 4a73 6f6e 290d 0a20 2020 2020  (tryJson)..     
+00003ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003ef0: 2020 2072 6169 7365 2044 5355 7365 724f     raise DSUserO
+00003f00: 626a 6563 7446 6175 6c74 2866 6175 6c74  bjectFault(fault
+00003f10: 4469 6374 290d 0a20 2020 2020 2020 2020  Dict)..         
+00003f20: 2020 2020 2020 2065 7863 6570 7420 6a73         except js
+00003f30: 6f6e 2e4a 534f 4e44 6563 6f64 6545 7272  on.JSONDecodeErr
+00003f40: 6f72 2061 7320 6a64 6563 6f64 6565 7272  or as jdecodeerr
+00003f50: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00003f60: 2020 2020 2020 2070 6173 730d 0a20 2020         pass..   
+00003f70: 2020 2020 2020 2023 2075 6e65 7870 6563         # unexpec
+00003f80: 7465 6420 7265 7370 6f6e 7365 2073 6f20  ted response so 
+00003f90: 7261 6973 6520 6173 2061 6e20 6572 726f  raise as an erro
+00003fa0: 720d 0a20 2020 2020 2020 2020 2068 7474  r..          htt
+00003fb0: 7052 6573 706f 6e73 652e 7261 6973 655f  pResponse.raise_
+00003fc0: 666f 725f 7374 6174 7573 2829 0d0a 2020  for_status()..  
+00003fd0: 2020 2020 2020 6578 6365 7074 206a 736f        except jso
+00003fe0: 6e2e 4a53 4f4e 4465 636f 6465 4572 726f  n.JSONDecodeErro
+00003ff0: 7220 6173 206a 6465 636f 6465 6572 723a  r as jdecodeerr:
+00004000: 0d0a 2020 2020 2020 2020 2020 2020 4453  ..            DS
+00004010: 5573 6572 4f62 6a65 6374 4c6f 6746 756e  UserObjectLogFun
+00004020: 6373 2e4c 6f67 4578 6365 7074 696f 6e28  cs.LogException(
+00004030: 2744 6174 6173 7472 6561 6d50 7927 2c20  'DatastreamPy', 
+00004040: 2744 5352 6573 706f 6e73 652e 6765 745f  'DSResponse.get_
+00004050: 6a73 6f6e 5f52 6573 706f 6e73 6527 2c20  json_Response', 
+00004060: 274a 534f 4e20 6465 636f 6465 7220 4578  'JSON decoder Ex
+00004070: 6365 7074 696f 6e20 6f63 6375 7265 643a  ception occured:
+00004080: 272c 206a 6465 636f 6465 6572 7229 0d0a  ', jdecodeerr)..
+00004090: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+000040a0: 650d 0a20 2020 2020 2020 2065 7863 6570  e..        excep
+000040b0: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+000040c0: 7870 3a0d 0a20 2020 2020 2020 2020 2020  xp:..           
+000040d0: 2044 5355 7365 724f 626a 6563 744c 6f67   DSUserObjectLog
+000040e0: 4675 6e63 732e 4c6f 6745 7863 6570 7469  Funcs.LogExcepti
+000040f0: 6f6e 2827 4461 7461 7374 7265 616d 5079  on('DatastreamPy
+00004100: 272c 2027 4453 5265 7370 6f6e 7365 2e67  ', 'DSResponse.g
+00004110: 6574 5f6a 736f 6e5f 5265 7370 6f6e 7365  et_json_Response
+00004120: 272c 2027 4578 6365 7074 696f 6e20 6f63  ', 'Exception oc
+00004130: 6375 7265 643a 272c 2065 7870 290d 0a20  cured:', exp).. 
+00004140: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00004150: 0d0a 2020 2020 0d0a 2020 2020 6465 6620  ..    ..    def 
+00004160: 5f67 6574 5f74 6f6b 656e 2873 656c 662c  _get_token(self,
+00004170: 2069 7350 726f 7879 3d46 616c 7365 293a   isProxy=False):
+00004180: 0d0a 2020 2020 2020 2020 746f 6b65 6e5f  ..        token_
+00004190: 7572 6c20 3d20 7365 6c66 2e75 726c 202b  url = self.url +
+000041a0: 2022 4765 7454 6f6b 656e 220d 0a20 2020   "GetToken"..   
+000041b0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+000041c0: 2020 2020 2020 2070 726f 7074 6965 7320         propties 
+000041d0: 3d20 5b5d 0d0a 2020 2020 2020 2020 2020  = []..          
+000041e0: 2020 7072 6f70 7469 6573 2e61 7070 656e    propties.appen
+000041f0: 6428 5072 6f70 6572 7469 6573 2822 5f5f  d(Properties("__
+00004200: 4170 7049 6422 2c20 4453 5061 636b 6167  AppId", DSPackag
+00004210: 6549 6e66 6f2e 6170 7049 6429 290d 0a20  eInfo.appId)).. 
+00004220: 2020 2020 2020 2020 2020 2070 726f 7074             propt
+00004230: 6965 732e 6170 7065 6e64 2850 726f 7065  ies.append(Prope
+00004240: 7274 6965 7328 2252 6574 7572 6e4f 7074  rties("ReturnOpt
+00004250: 696f 6e73 222c 2022 4e61 7669 6761 746f  ions", "Navigato
+00004260: 7253 6572 6965 732c 4e61 7669 6761 746f  rSeries,Navigato
+00004270: 7244 6174 6174 7970 6573 2229 290d 0a0d  rDatatypes"))...
+00004280: 0a20 2020 2020 2020 2020 2020 2074 6f6b  .            tok
+00004290: 656e 5265 7120 3d20 546f 6b65 6e52 6571  enReq = TokenReq
+000042a0: 7565 7374 2873 656c 662e 7573 6572 6e61  uest(self.userna
+000042b0: 6d65 2c20 7365 6c66 2e70 6173 7377 6f72  me, self.passwor
+000042c0: 642c 2070 726f 7074 6965 7329 0d0a 2020  d, propties)..  
+000042d0: 2020 2020 2020 2020 2020 7261 775f 746f            raw_to
+000042e0: 6b65 6e52 6571 203d 2074 6f6b 656e 5265  kenReq = tokenRe
+000042f0: 712e 6765 745f 546f 6b65 6e52 6571 7565  q.get_TokenReque
+00004300: 7374 2829 0d0a 2020 2020 2020 2020 2020  st()..          
+00004310: 2020 0d0a 2020 2020 2020 2020 2020 2020    ..            
+00004320: 2350 6f73 7420 7468 6520 746f 6b65 6e20  #Post the token 
+00004330: 7265 7175 6573 7420 746f 2067 6574 2072  request to get r
+00004340: 6573 706f 6e73 6520 696e 206a 736f 6e20  esponse in json 
+00004350: 666f 726d 6174 0d0a 2020 2020 2020 2020  format..        
+00004360: 2020 2020 6a73 6f6e 5f52 6573 706f 6e73      json_Respons
+00004370: 6520 3d20 7365 6c66 2e5f 6765 745f 6a73  e = self._get_js
+00004380: 6f6e 5f52 6573 706f 6e73 6528 746f 6b65  on_Response(toke
+00004390: 6e5f 7572 6c2c 2072 6177 5f74 6f6b 656e  n_url, raw_token
+000043a0: 5265 7129 0d0a 2020 2020 2020 2020 2020  Req)..          
+000043b0: 2020 7365 6c66 2e74 6f6b 656e 4578 7069    self.tokenExpi
+000043c0: 7279 203d 2073 656c 662e 6a73 6f6e 4461  ry = self.jsonDa
+000043d0: 7465 5469 6d65 5f74 6f5f 6461 7465 7469  teTime_to_dateti
+000043e0: 6d65 286a 736f 6e5f 5265 7370 6f6e 7365  me(json_Response
+000043f0: 5b27 546f 6b65 6e45 7870 6972 7927 5d29  ['TokenExpiry'])
+00004400: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00004410: 6c66 2e74 6f6b 656e 203d 206a 736f 6e5f  lf.token = json_
+00004420: 5265 7370 6f6e 7365 5b27 546f 6b65 6e56  Response['TokenV
+00004430: 616c 7565 275d 0d0a 0d0a 2020 2020 2020  alue']....      
+00004440: 2020 2020 2020 2320 4368 6563 6b20 7468        # Check th
+00004450: 6520 5072 6f70 6572 7469 6573 2063 6f6c  e Properties col
+00004460: 6c65 6374 696f 6e20 666f 7220 7468 6520  lection for the 
+00004470: 7572 6c73 2074 6861 7420 7370 6563 6966  urls that specif
+00004480: 7920 7768 6572 6520 746f 2062 726f 7773  y where to brows
+00004490: 6520 666f 7220 4461 7461 7374 7265 616d  e for Datastream
+000044a0: 204e 6176 6967 6174 6f72 0d0a 2020 2020   Navigator..    
+000044b0: 2020 2020 2020 2020 6966 206a 736f 6e5f          if json_
+000044c0: 5265 7370 6f6e 7365 5b27 5072 6f70 6572  Response['Proper
+000044d0: 7469 6573 275d 2061 6e64 206c 656e 286a  ties'] and len(j
+000044e0: 736f 6e5f 5265 7370 6f6e 7365 5b27 5072  son_Response['Pr
+000044f0: 6f70 6572 7469 6573 275d 2920 3e20 303a  operties']) > 0:
+00004500: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004510: 2020 666f 7220 7072 6f70 2069 6e20 6a73    for prop in js
+00004520: 6f6e 5f52 6573 706f 6e73 655b 2750 726f  on_Response['Pro
+00004530: 7065 7274 6965 7327 5d3a 0d0a 2020 2020  perties']:..    
+00004540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004550: 6966 2069 7369 6e73 7461 6e63 6528 7072  if isinstance(pr
+00004560: 6f70 5b27 4b65 7927 5d2c 2073 7472 2920  op['Key'], str) 
+00004570: 616e 6420 7072 6f70 5b27 4b65 7927 5d2e  and prop['Key'].
+00004580: 6c6f 7765 7228 2920 3d3d 2027 6e61 7669  lower() == 'navi
+00004590: 6761 746f 7273 6572 6965 7327 3a0d 0a20  gatorseries':.. 
+000045a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000045b0: 2020 2020 2020 2073 656c 662e 6e61 7669         self.navi
+000045c0: 6761 746f 7253 6572 6965 7355 726c 203d  gatorSeriesUrl =
+000045d0: 2070 726f 705b 2756 616c 7565 275d 2023   prop['Value'] #
+000045e0: 2054 6865 2075 726c 2074 6f20 6272 6f77   The url to brow
+000045f0: 7365 2061 6e64 2073 6561 7263 6820 4461  se and search Da
+00004600: 7461 7374 7265 616d 204e 6176 6967 6174  tastream Navigat
+00004610: 6f72 2066 6f72 2073 7065 6369 6669 6320  or for specific 
+00004620: 696e 7374 7275 6d65 6e74 730d 0a20 2020  instruments..   
+00004630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004640: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00004650: 2870 726f 705b 274b 6579 275d 2c20 7374  (prop['Key'], st
+00004660: 7229 2061 6e64 2070 726f 705b 274b 6579  r) and prop['Key
+00004670: 275d 2e6c 6f77 6572 2829 203d 3d20 276e  '].lower() == 'n
+00004680: 6176 6967 6174 6f72 6461 7461 7479 7065  avigatordatatype
+00004690: 7327 3a0d 0a20 2020 2020 2020 2020 2020  s':..           
+000046a0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000046b0: 662e 6e61 7669 6761 746f 7244 6174 6174  f.navigatorDatat
+000046c0: 7970 6573 5572 6c20 3d20 7072 6f70 5b27  ypesUrl = prop['
+000046d0: 5661 6c75 6527 5d20 2320 5468 6520 7572  Value'] # The ur
+000046e0: 6c20 746f 2062 726f 7773 6520 616e 6420  l to browse and 
+000046f0: 7365 6172 6368 2044 6174 6173 7472 6561  search Datastrea
+00004700: 6d20 4e61 7669 6761 746f 7220 666f 7220  m Navigator for 
+00004710: 7370 6563 6966 6963 2064 6174 6174 7970  specific datatyp
+00004720: 6573 0d0a 2020 2020 2020 2020 2020 2020  es..            
+00004730: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+00004740: 2045 7863 6570 7469 6f6e 2061 7320 6578   Exception as ex
+00004750: 703a 0d0a 2020 2020 2020 2020 2020 2020  p:..            
+00004760: 4453 5573 6572 4f62 6a65 6374 4c6f 6746  DSUserObjectLogF
+00004770: 756e 6373 2e4c 6f67 4578 6365 7074 696f  uncs.LogExceptio
+00004780: 6e28 2744 6174 6173 7472 6561 6d50 7927  n('DatastreamPy'
+00004790: 2c20 2744 5352 6573 706f 6e73 652e 6765  , 'DSResponse.ge
+000047a0: 745f 746f 6b65 6e27 2c20 2745 7863 6570  t_token', 'Excep
+000047b0: 7469 6f6e 206f 6363 7572 6564 3a27 2c20  tion occured:', 
+000047c0: 6578 7029 0d0a 2020 2020 2020 2020 2020  exp)..          
+000047d0: 2020 7261 6973 6520 6578 700d 0a0d 0a20    raise exp.... 
+000047e0: 2020 2064 6566 2049 7356 616c 6964 2873     def IsValid(s
+000047f0: 656c 6629 3a0d 0a20 2020 2020 2020 2072  elf):..        r
+00004800: 6574 7572 6e20 6973 696e 7374 616e 6365  eturn isinstance
+00004810: 2873 656c 662e 746f 6b65 6e2c 2073 7472  (self.token, str
+00004820: 2920 616e 6420 6c65 6e28 7365 6c66 2e74  ) and len(self.t
+00004830: 6f6b 656e 2920 3e20 3020 616e 6420 6973  oken) > 0 and is
+00004840: 696e 7374 616e 6365 2873 656c 662e 746f  instance(self.to
+00004850: 6b65 6e45 7870 6972 792c 2064 6174 6574  kenExpiry, datet
+00004860: 696d 6529 0d0a 0d0a 2020 2020 6465 6620  ime)....    def 
+00004870: 4368 6563 6b5f 546f 6b65 6e28 7365 6c66  Check_Token(self
+00004880: 293a 0d0a 2020 2020 2020 2020 6966 206e  ):..        if n
+00004890: 6f74 2073 656c 662e 4973 5661 6c69 6428  ot self.IsValid(
+000048a0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+000048b0: 7261 6973 6520 4578 6365 7074 696f 6e28  raise Exception(
+000048c0: 2259 6f75 2061 7265 206e 6f74 206c 6f67  "You are not log
+000048d0: 6765 6420 6f6e 2e20 506c 6561 7365 2072  ged on. Please r
+000048e0: 6563 7265 6174 6520 7468 6973 2063 6c69  ecreate this cli
+000048f0: 656e 7420 6f62 6a65 6374 2073 7570 706c  ent object suppl
+00004900: 7969 6e67 2076 616c 6964 2075 7365 7220  ying valid user 
+00004910: 6372 6564 656e 7469 616c 732e 2229 0d0a  credentials.")..
+00004920: 2020 2020 2020 2020 2320 4120 6675 6e63          # A func
+00004930: 7469 6f6e 2063 616c 6c65 6420 6265 666f  tion called befo
+00004940: 7265 2065 7665 7279 2071 7565 7279 2074  re every query t
+00004950: 6f20 6368 6563 6b20 616e 6420 7265 6e65  o check and rene
+00004960: 7720 7468 6520 746f 6b65 6e20 6966 2077  w the token if w
+00004970: 6974 6869 6e20 3135 206d 696e 7574 6573  ithin 15 minutes
+00004980: 206f 6620 6578 7069 7279 2074 696d 6520   of expiry time 
+00004990: 6f72 206c 6174 6572 0d0a 2020 2020 2020  or later..      
+000049a0: 2020 7469 6d65 5265 6e65 7720 3d20 6461    timeRenew = da
+000049b0: 7465 7469 6d65 2e75 7463 6e6f 7728 2920  tetime.utcnow() 
+000049c0: 2b20 7469 6d65 6465 6c74 6128 6d69 6e75  + timedelta(minu
+000049d0: 7465 7320 3d20 3135 2920 2320 6375 7269  tes = 15) # curi
+000049e0: 6f75 736c 7920 7574 636e 6f77 2829 206d  ously utcnow() m
+000049f0: 6574 686f 6420 646f 6573 6e27 7420 7365  ethod doesn't se
+00004a00: 7420 7468 6520 7469 6d65 207a 6f6e 6520  t the time zone 
+00004a10: 746f 2075 7463 2e20 5765 206e 6565 6420  to utc. We need 
+00004a20: 746f 2064 6f20 736f 2074 6f20 636f 6d70  to do so to comp
+00004a30: 6172 6520 7769 7468 2074 6f6b 656e 2e0d  are with token..
+00004a40: 0a20 2020 2020 2020 2074 696d 6552 656e  .        timeRen
+00004a50: 6577 203d 2064 6174 6574 696d 6528 7469  ew = datetime(ti
+00004a60: 6d65 5265 6e65 772e 7965 6172 2c20 7469  meRenew.year, ti
+00004a70: 6d65 5265 6e65 772e 6d6f 6e74 682c 2074  meRenew.month, t
+00004a80: 696d 6552 656e 6577 2e64 6179 2c20 7469  imeRenew.day, ti
+00004a90: 6d65 5265 6e65 772e 686f 7572 2c20 7469  meRenew.hour, ti
+00004aa0: 6d65 5265 6e65 772e 6d69 6e75 7465 2c20  meRenew.minute, 
+00004ab0: 7469 6d65 5265 6e65 772e 7365 636f 6e64  timeRenew.second
+00004ac0: 2c20 302c 2074 7a69 6e66 6f3d 7079 747a  , 0, tzinfo=pytz
+00004ad0: 2e75 7463 290d 0a20 2020 2020 2020 2069  .utc)..        i
+00004ae0: 6620 7365 6c66 2e74 6f6b 656e 4578 7069  f self.tokenExpi
+00004af0: 7279 203c 3d20 7469 6d65 5265 6e65 7720  ry <= timeRenew 
+00004b00: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+00004b10: 656c 662e 5f67 6574 5f74 6f6b 656e 2829  elf._get_token()
+00004b20: 0d0a 0d0a 2020 2020 0d0a 2020 2020 6465  ....    ..    de
+00004b30: 6620 5f6a 736f 6e5f 5265 7175 6573 7428  f _json_Request(
+00004b40: 7365 6c66 2c20 7261 775f 7465 7874 293a  self, raw_text):
+00004b50: 0d0a 2020 2020 2020 2020 2363 6f6e 7665  ..        #conve
+00004b60: 7274 2074 6865 2064 6963 7469 6f6e 6172  rt the dictionar
+00004b70: 7920 2872 6177 2074 6578 7429 2074 6f20  y (raw text) to 
+00004b80: 6a73 6f6e 2074 6578 7420 6669 7273 740d  json text first.
+00004b90: 0a20 2020 2020 2020 206a 736f 6e54 6578  .        jsonTex
+00004ba0: 7420 3d20 6a73 6f6e 2e64 756d 7073 2872  t = json.dumps(r
+00004bb0: 6177 5f74 6578 7429 0d0a 2020 2020 2020  aw_text)..      
+00004bc0: 2020 6279 7465 5465 6d70 203d 2062 7974    byteTemp = byt
+00004bd0: 6573 286a 736f 6e54 6578 742c 2775 7466  es(jsonText,'utf
+00004be0: 2d38 2729 0d0a 2020 2020 2020 2020 6279  -8')..        by
+00004bf0: 7465 5465 6d70 203d 206a 736f 6e54 6578  teTemp = jsonTex
+00004c00: 742e 656e 636f 6465 2827 7574 662d 3827  t.encode('utf-8'
+00004c10: 290d 0a20 2020 2020 2020 2023 636f 6e76  )..        #conv
+00004c20: 6572 7420 7468 6520 6a73 6f6e 2054 6578  ert the json Tex
+00004c30: 7420 746f 206a 736f 6e20 666f 726d 6174  t to json format
+00004c40: 7465 6420 5265 7175 6573 740d 0a20 2020  ted Request..   
+00004c50: 2020 2020 206a 736f 6e52 6571 7565 7374       jsonRequest
+00004c60: 203d 206a 736f 6e2e 6c6f 6164 7328 6279   = json.loads(by
+00004c70: 7465 5465 6d70 290d 0a20 2020 2020 2020  teTemp)..       
+00004c80: 2072 6574 7572 6e20 6a73 6f6e 5265 7175   return jsonRequ
+00004c90: 6573 740d 0a0d 0a20 2020 2064 6566 206a  est....    def j
+00004ca0: 736f 6e44 6174 6554 696d 655f 746f 5f64  sonDateTime_to_d
+00004cb0: 6174 6574 696d 6528 7365 6c66 2c20 6a73  atetime(self, js
+00004cc0: 6f6e 4461 7465 293a 0d0a 2020 2020 2020  onDate):..      
+00004cd0: 2020 2320 436f 6e76 6572 7420 6120 4a53    # Convert a JS
+00004ce0: 4f4e 202f 4461 7465 2829 2073 7472 696e  ON /Date() strin
+00004cf0: 6720 746f 2061 2064 6174 6574 696d 6520  g to a datetime 
+00004d00: 6f62 6a65 6374 0d0a 2020 2020 2020 2020  object..        
+00004d10: 6966 206a 736f 6e44 6174 6520 6973 204e  if jsonDate is N
+00004d20: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00004d30: 2020 7265 7475 726e 204e 6f6e 650d 0a20    return None.. 
+00004d40: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+00004d50: 2020 2020 2020 2020 206d 6174 6368 203d           match =
+00004d60: 2072 652e 6d61 7463 6828 7222 5e28 2f44   re.match(r"^(/D
+00004d70: 6174 655c 2829 282d 3f5c 642a 2928 5c29  ate\()(-?\d*)(\)
+00004d80: 2f29 222c 206a 736f 6e44 6174 6529 0d0a  /)", jsonDate)..
+00004d90: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+00004da0: 6174 6368 203d 3d20 4e6f 6e65 3a0d 0a20  atch == None:.. 
+00004db0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00004dc0: 6174 6368 203d 2072 652e 6d61 7463 6828  atch = re.match(
+00004dd0: 7222 5e28 2f44 6174 655c 2829 282d 3f5c  r"^(/Date\()(-?\
+00004de0: 642a 2928 5b2b 2d5d 2928 2e2e 2928 2e2e  d*)([+-])(..)(..
+00004df0: 2928 5c29 2f29 222c 206a 736f 6e44 6174  )(\)/)", jsonDat
+00004e00: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+00004e10: 6966 206d 6174 6368 3a0d 0a20 2020 2020  if match:..     
+00004e20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00004e30: 6e20 6461 7465 7469 6d65 2831 3937 302c  n datetime(1970,
+00004e40: 2031 2c20 312c 2074 7a69 6e66 6f3d 7079   1, 1, tzinfo=py
+00004e50: 747a 2e75 7463 2920 2b20 7469 6d65 6465  tz.utc) + timede
+00004e60: 6c74 6128 7365 636f 6e64 733d 666c 6f61  lta(seconds=floa
+00004e70: 7428 6d61 7463 682e 6772 6f75 7028 3229  t(match.group(2)
+00004e80: 292f 3130 3030 290d 0a20 2020 2020 2020  )/1000)..       
+00004e90: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00004ea0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00004eb0: 6520 4578 6365 7074 696f 6e28 2249 6e76  e Exception("Inv
+00004ec0: 616c 6964 204a 534f 4e20 4461 7465 3a20  alid JSON Date: 
+00004ed0: 2220 2b20 6a73 6f6e 4461 7465 290d 0a20  " + jsonDate).. 
+00004ee0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+00004ef0: 6365 7074 696f 6e20 6173 2065 7870 3a0d  ception as exp:.
+00004f00: 0a20 2020 2020 2020 2020 2020 2044 5355  .            DSU
+00004f10: 7365 724f 626a 6563 744c 6f67 4675 6e63  serObjectLogFunc
+00004f20: 732e 4c6f 6745 7863 6570 7469 6f6e 2827  s.LogException('
+00004f30: 4461 7461 7374 7265 616d 5079 272c 2027  DatastreamPy', '
+00004f40: 4453 5265 7370 6f6e 7365 2e6a 736f 6e44  DSResponse.jsonD
+00004f50: 6174 6554 696d 655f 746f 5f64 6174 6574  ateTime_to_datet
+00004f60: 696d 6527 2c20 2745 7863 6570 7469 6f6e  ime', 'Exception
+00004f70: 206f 6363 7572 6564 3a27 2c20 6578 7029   occured:', exp)
+00004f80: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
+00004f90: 6973 6520 6578 700d 0a20 2020 2020 2020  ise exp..       
+00004fa0: 2020 2020 200d 0a20 2020 2064 6566 205f       ..    def _
+00004fb0: 6765 745f 4461 7465 2873 656c 662c 206a  get_Date(self, j
+00004fc0: 736f 6e44 6174 6529 3a0d 0a20 2020 2020  sonDate):..     
+00004fd0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+00004fe0: 2020 2020 2023 6d61 7463 6820 3d20 7265       #match = re
+00004ff0: 2e6d 6174 6368 2822 5e2f 4461 7465 5b28  .match("^/Date[(
+00005000: 5d5b 302d 395d 7b31 337d 5b2b 5d5b 302d  ][0-9]{13}[+][0-
+00005010: 395d 7b34 7d5b 295d 2f22 2c20 6a73 6f6e  9]{4}[)]/", json
+00005020: 4461 7465 290d 0a20 2020 2020 2020 2020  Date)..         
+00005030: 2020 206d 6174 6368 203d 2072 652e 6d61     match = re.ma
+00005040: 7463 6828 7222 5e28 2f44 6174 655c 2829  tch(r"^(/Date\()
+00005050: 282d 3f5c 642a 2928 5b2b 2d5d 2928 2e2e  (-?\d*)([+-])(..
+00005060: 2928 2e2e 2928 5c29 2f29 222c 206a 736f  )(..)(\)/)", jso
+00005070: 6e44 6174 6529 0d0a 2020 2020 2020 2020  nDate)..        
+00005080: 2020 2020 6966 206d 6174 6368 3a0d 0a20      if match:.. 
+00005090: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+000050a0: 6420 3d20 7265 2e73 6561 7263 6828 275b  d = re.search('[
+000050b0: 302d 395d 7b31 337d 272c 206a 736f 6e44  0-9]{13}', jsonD
+000050c0: 6174 6529 0d0a 2020 2020 2020 2020 2020  ate)..          
+000050d0: 2020 2020 2020 6420 3d20 666c 6f61 7428        d = float(
+000050e0: 6d61 7463 682e 6772 6f75 7028 3229 290d  match.group(2)).
+000050f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005100: 206e 6461 7465 203d 2064 6174 6574 696d   ndate = datetim
+00005110: 6528 3139 3730 2c31 2c31 2920 2b20 7469  e(1970,1,1) + ti
+00005120: 6d65 6465 6c74 6128 7365 636f 6e64 733d  medelta(seconds=
+00005130: 666c 6f61 7428 6429 2f31 3030 3029 0d0a  float(d)/1000)..
+00005140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005150: 7574 6364 6174 6520 3d20 7079 747a 2e55  utcdate = pytz.U
+00005160: 5443 2e66 726f 6d75 7463 286e 6461 7465  TC.fromutc(ndate
+00005170: 292e 7374 7266 7469 6d65 2827 2559 2d25  ).strftime('%Y-%
+00005180: 6d2d 2564 2729 0d0a 2020 2020 2020 2020  m-%d')..        
+00005190: 2020 2020 2020 2020 7265 7475 726e 2075          return u
+000051a0: 7463 6461 7465 0d0a 2020 2020 2020 2020  tcdate..        
+000051b0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+000051c0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000051d0: 2045 7863 6570 7469 6f6e 2822 496e 7661   Exception("Inva
+000051e0: 6c69 6420 4a53 4f4e 2044 6174 6522 290d  lid JSON Date").
+000051f0: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+00005200: 4578 6365 7074 696f 6e20 6173 2065 7870  Exception as exp
+00005210: 3a0d 0a20 2020 2020 2020 2020 2020 2044  :..            D
+00005220: 5355 7365 724f 626a 6563 744c 6f67 4675  SUserObjectLogFu
+00005230: 6e63 732e 4c6f 6745 7863 6570 7469 6f6e  ncs.LogException
+00005240: 2827 4461 7461 7374 7265 616d 5079 272c  ('DatastreamPy',
+00005250: 2027 4453 5265 7370 6f6e 7365 2e67 6574   'DSResponse.get
+00005260: 5f44 6174 6527 2c20 2745 7863 6570 7469  _Date', 'Excepti
+00005270: 6f6e 206f 6363 7572 6564 3a27 2c20 6578  on occured:', ex
+00005280: 7029 0d0a 2020 2020 2020 2020 2020 2020  p)..            
+00005290: 7261 6973 6520 6578 700d 0a20 2020 2020  raise exp..     
+000052a0: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
+000052b0: 2020 2020 200d 0a20 2020 200d 0a20 2020       ..    ..   
+000052c0: 2064 6566 205f 6765 745f 4461 7461 7479   def _get_Dataty
+000052d0: 7065 5661 6c75 6573 2873 656c 662c 206a  peValues(self, j
+000052e0: 736f 6e52 6573 7029 3a0d 0a20 2020 2020  sonResp):..     
+000052f0: 2020 206d 756c 7469 496e 6465 7820 3d20     multiIndex = 
+00005300: 4661 6c73 650d 0a20 2020 2020 2020 2064  False..        d
+00005310: 6620 3d20 7064 2e44 6174 6146 7261 6d65  f = pd.DataFrame
+00005320: 2829 0d0a 2020 2020 2020 2020 7661 6c44  ()..        valD
+00005330: 6963 7420 3d20 7b22 496e 7374 7275 6d65  ict = {"Instrume
+00005340: 6e74 223a 5b5d 2c22 4461 7461 7479 7065  nt":[],"Datatype
+00005350: 223a 5b5d 2c22 5661 6c75 6522 3a5b 5d2c  ":[],"Value":[],
+00005360: 2243 7572 7265 6e63 7922 3a5b 5d7d 0d0a  "Currency":[]}..
+00005370: 0d0a 2020 2020 2020 2020 666f 7220 6974  ..        for it
+00005380: 656d 2069 6e20 6a73 6f6e 5265 7370 5b27  em in jsonResp['
+00005390: 4461 7461 5479 7065 5661 6c75 6573 275d  DataTypeValues']
+000053a0: 3a20 0d0a 2020 2020 2020 2020 2020 2020  : ..            
+000053b0: 6461 7461 7479 7065 203d 2069 7465 6d5b  datatype = item[
+000053c0: 2744 6174 6154 7970 6527 5d0d 0a20 2020  'DataType']..   
+000053d0: 2020 2020 2020 2020 200d 0a20 2020 2020           ..     
+000053e0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+000053f0: 6974 656d 5b27 5379 6d62 6f6c 5661 6c75  item['SymbolValu
+00005400: 6573 275d 3a0d 0a20 2020 2020 2020 2020  es']:..         
+00005410: 2020 2020 2020 696e 7374 7275 6d65 6e74        instrument
+00005420: 203d 2069 5b27 5379 6d62 6f6c 275d 0d0a   = i['Symbol']..
+00005430: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00005440: 7572 7265 6e63 7920 3d20 4e6f 6e65 0d0a  urrency = None..
+00005450: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00005460: 6620 2743 7572 7265 6e63 7927 2069 6e20  f 'Currency' in 
+00005470: 693a 0d0a 2020 2020 2020 2020 2020 2020  i:..            
+00005480: 2020 2020 2020 2063 7572 7265 6e63 7920         currency 
+00005490: 3d20 695b 2743 7572 7265 6e63 7927 5d20  = i['Currency'] 
+000054a0: 6966 2069 5b27 4375 7272 656e 6379 275d  if i['Currency']
+000054b0: 2065 6c73 6520 274e 4127 0d0a 0d0a 2020   else 'NA'....  
+000054c0: 2020 2020 2020 2020 2020 2020 2076 616c               val
+000054d0: 4469 6374 5b22 4461 7461 7479 7065 225d  Dict["Datatype"]
+000054e0: 2e61 7070 656e 6428 6461 7461 7479 7065  .append(datatype
+000054f0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00005500: 2020 7661 6c44 6963 745b 2249 6e73 7472    valDict["Instr
+00005510: 756d 656e 7422 5d2e 6170 7065 6e64 2869  ument"].append(i
+00005520: 6e73 7472 756d 656e 7429 0d0a 2020 2020  nstrument)..    
+00005530: 2020 2020 2020 2020 2020 2069 6620 6375             if cu
+00005540: 7272 656e 6379 3a0d 0a20 2020 2020 2020  rrency:..       
+00005550: 2020 2020 2020 2020 2020 2020 7661 6c44              valD
+00005560: 6963 745b 2743 7572 7265 6e63 7927 5d2e  ict['Currency'].
+00005570: 6170 7065 6e64 2863 7572 7265 6e63 7929  append(currency)
+00005580: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005590: 2020 2020 2063 6f6c 4e61 6d65 7320 3d20       colNames = 
+000055a0: 2869 6e73 7472 756d 656e 742c 2064 6174  (instrument, dat
+000055b0: 6174 7970 652c 2063 7572 7265 6e63 7929  atype, currency)
+000055c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000055d0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+000055e0: 2020 2020 2020 2020 2020 2063 6f6c 4e61             colNa
+000055f0: 6d65 7320 3d20 2869 6e73 7472 756d 656e  mes = (instrumen
+00005600: 742c 2064 6174 6174 7970 6529 0d0a 0d0a  t, datatype)....
+00005610: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00005620: 616c 7565 7320 3d20 695b 2756 616c 7565  alues = i['Value
+00005630: 275d 0d0a 2020 2020 2020 2020 2020 2020  ']..            
+00005640: 2020 2076 616c 5479 7065 203d 2069 5b27     valType = i['
+00005650: 5479 7065 275d 0d0a 0d0a 2020 2020 2020  Type']....      
+00005660: 2020 2020 2020 2020 2023 4861 6e64 6c69           #Handli
+00005670: 6e67 2061 6c6c 2070 6f73 7369 626c 6520  ng all possible 
+00005680: 7479 7065 7320 6f66 2064 6174 6120 6173  types of data as
+00005690: 2070 6572 2044 5353 796d 626f 6c52 6573   per DSSymbolRes
+000056a0: 706f 6e73 6556 616c 7565 5479 7065 0d0a  ponseValueType..
+000056b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000056c0: 2023 5468 6573 6520 7661 6c75 6520 7479   #These value ty
+000056d0: 7065 7320 7265 7475 726e 2061 6e20 6172  pes return an ar
+000056e0: 7261 790d 0a20 2020 2020 2020 2020 2020  ray..           
+000056f0: 2020 2020 6966 2076 616c 5479 7065 2069      if valType i
+00005700: 6e20 5b44 5353 796d 626f 6c52 6573 706f  n [DSSymbolRespo
+00005710: 6e73 6556 616c 7565 5479 7065 2e42 6f6f  nseValueType.Boo
+00005720: 6c41 7272 6179 2c20 0d0a 2020 2020 2020  lArray, ..      
+00005730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005740: 2020 2020 2020 2020 4453 5379 6d62 6f6c          DSSymbol
+00005750: 5265 7370 6f6e 7365 5661 6c75 6554 7970  ResponseValueTyp
+00005760: 652e 496e 7441 7272 6179 2c20 0d0a 2020  e.IntArray, ..  
+00005770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005780: 2020 2020 2020 2020 2020 2020 4453 5379              DSSy
+00005790: 6d62 6f6c 5265 7370 6f6e 7365 5661 6c75  mbolResponseValu
+000057a0: 6554 7970 652e 4461 7465 5469 6d65 4172  eType.DateTimeAr
+000057b0: 7261 792c 0d0a 2020 2020 2020 2020 2020  ray,..          
+000057c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000057d0: 2020 2020 4453 5379 6d62 6f6c 5265 7370      DSSymbolResp
+000057e0: 6f6e 7365 5661 6c75 6554 7970 652e 446f  onseValueType.Do
+000057f0: 7562 6c65 4172 7261 792c 0d0a 2020 2020  ubleArray,..    
+00005800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005810: 2020 2020 2020 2020 2020 4453 5379 6d62            DSSymb
+00005820: 6f6c 5265 7370 6f6e 7365 5661 6c75 6554  olResponseValueT
+00005830: 7970 652e 5374 7269 6e67 4172 7261 792c  ype.StringArray,
+00005840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005860: 4453 5379 6d62 6f6c 5265 7370 6f6e 7365  DSSymbolResponse
+00005870: 5661 6c75 6554 7970 652e 4f62 6a65 6374  ValueType.Object
+00005880: 4172 7261 792c 0d0a 2020 2020 2020 2020  Array,..        
+00005890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000058a0: 2020 2020 2020 4453 5379 6d62 6f6c 5265        DSSymbolRe
+000058b0: 7370 6f6e 7365 5661 6c75 6554 7970 652e  sponseValueType.
+000058c0: 4e75 6c6c 6162 6c65 426f 6f6c 4172 7261  NullableBoolArra
+000058d0: 792c 0d0a 2020 2020 2020 2020 2020 2020  y,..            
+000058e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000058f0: 2020 4453 5379 6d62 6f6c 5265 7370 6f6e    DSSymbolRespon
+00005900: 7365 5661 6c75 6554 7970 652e 4e75 6c6c  seValueType.Null
+00005910: 6162 6c65 496e 7441 7272 6179 2c0d 0a20  ableIntArray,.. 
+00005920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005930: 2020 2020 2020 2020 2020 2020 2044 5353               DSS
+00005940: 796d 626f 6c52 6573 706f 6e73 6556 616c  ymbolResponseVal
+00005950: 7565 5479 7065 2e4e 756c 6c61 626c 6544  ueType.NullableD
+00005960: 6174 6554 696d 6541 7272 6179 2c0d 0a20  ateTimeArray,.. 
+00005970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005980: 2020 2020 2020 2020 2020 2020 2044 5353               DSS
+00005990: 796d 626f 6c52 6573 706f 6e73 6556 616c  ymbolResponseVal
+000059a0: 7565 5479 7065 2e4e 756c 6c61 626c 6544  ueType.NullableD
+000059b0: 6f75 626c 6541 7272 6179 5d3a 0d0a 2020  oubleArray]:..  
+000059c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000059d0: 2020 2354 6865 2061 7272 6179 2063 616e    #The array can
+000059e0: 2062 6520 6f66 2062 6f6f 6c2c 2064 6f75   be of bool, dou
+000059f0: 626c 652c 2069 6e74 2c20 7374 7269 6e67  ble, int, string
+00005a00: 2c20 6461 7465 7320 6f72 204f 626a 6563  , dates or Objec
+00005a10: 740d 0a0d 0a20 2020 2020 2020 2020 2020  t....           
+00005a20: 2020 2020 2020 2020 2023 4368 6563 6b20           #Check 
+00005a30: 6966 2074 6865 2061 7272 6179 206f 6620  if the array of 
+00005a40: 6861 7320 4a53 4f4e 2064 6174 6520 7374  has JSON date st
+00005a50: 7269 6e67 2061 6e64 2063 6f6e 7665 7274  ring and convert
+00005a60: 2065 6163 6820 746f 2044 6174 6574 696d   each to Datetim
+00005a70: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+00005a80: 2020 2020 2020 2074 656d 7020 3d20 5b73         temp = [s
+00005a90: 656c 662e 5f67 6574 5f44 6174 6528 7829  elf._get_Date(x)
+00005aa0: 2069 6620 6973 696e 7374 616e 6365 2878   if isinstance(x
+00005ab0: 2c20 7374 7229 2061 6e64 2078 2e73 7461  , str) and x.sta
+00005ac0: 7274 7377 6974 6828 272f 4461 7465 2827  rtswith('/Date('
+00005ad0: 2920 656c 7365 2078 2066 6f72 2078 2069  ) else x for x i
+00005ae0: 6e20 7661 6c75 6573 5d0d 0a20 2020 2020  n values]..     
+00005af0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00005b00: 665b 636f 6c4e 616d 6573 5d20 3d20 7465  f[colNames] = te
+00005b10: 6d70 0d0a 2020 2020 2020 2020 2020 2020  mp..            
+00005b20: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
+00005b30: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00005b40: 206c 656e 2876 616c 7565 7329 203e 2031   len(values) > 1
+00005b50: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00005b60: 2020 2020 2020 2020 2020 206d 756c 7469             multi
+00005b70: 496e 6465 7820 3d20 5472 7565 0d0a 2020  Index = True..  
+00005b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b90: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00005ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005bb0: 206d 756c 7469 496e 6465 7820 3d20 4661   multiIndex = Fa
+00005bc0: 6c73 650d 0a20 2020 2020 2020 2020 2020  lse..           
+00005bd0: 2020 2020 2020 2020 2020 2020 2076 616c               val
+00005be0: 4469 6374 5b22 5661 6c75 6522 5d2e 6170  Dict["Value"].ap
+00005bf0: 7065 6e64 2876 616c 7565 735b 305d 2920  pend(values[0]) 
+00005c00: 200d 0a0d 0a20 2020 2020 2020 2020 2020   ....           
+00005c10: 2020 2020 2354 6865 7365 2076 616c 7565      #These value
+00005c20: 2074 7970 6573 2072 6574 7572 6e20 7369   types return si
+00005c30: 6e67 6c65 2076 616c 7565 0d0a 2020 2020  ngle value..    
+00005c40: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00005c50: 7661 6c54 7970 6520 696e 205b 4453 5379  valType in [DSSy
+00005c60: 6d62 6f6c 5265 7370 6f6e 7365 5661 6c75  mbolResponseValu
+00005c70: 6554 7970 652e 456d 7074 792c 0d0a 2020  eType.Empty,..  
+00005c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005c90: 2020 2020 2020 2020 2020 2020 2020 4453                DS
+00005ca0: 5379 6d62 6f6c 5265 7370 6f6e 7365 5661  SymbolResponseVa
+00005cb0: 6c75 6554 7970 652e 426f 6f6c 2c0d 0a20  lueType.Bool,.. 
 00005cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005cd0: 4453 5379 6d62 6f6c 5265 7370 6f6e 7365  DSSymbolResponse
-00005ce0: 5661 6c75 6554 7970 652e 496e 742c 0d0a  ValueType.Int,..
-00005cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005cd0: 2020 2020 2020 2020 2020 2020 2020 2044                 D
+00005ce0: 5353 796d 626f 6c52 6573 706f 6e73 6556  SSymbolResponseV
+00005cf0: 616c 7565 5479 7065 2e49 6e74 2c0d 0a20  alueType.Int,.. 
 00005d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d10: 4453 5379 6d62 6f6c 5265 7370 6f6e 7365  DSSymbolResponse
-00005d20: 5661 6c75 6554 7970 652e 4461 7465 5469  ValueType.DateTi
-00005d30: 6d65 2c0d 0a20 2020 2020 2020 2020 2020  me,..           
-00005d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d50: 2020 2020 2044 5353 796d 626f 6c52 6573       DSSymbolRes
-00005d60: 706f 6e73 6556 616c 7565 5479 7065 2e44  ponseValueType.D
-00005d70: 6f75 626c 652c 0d0a 2020 2020 2020 2020  ouble,..        
-00005d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005d90: 2020 2020 2020 2020 4453 5379 6d62 6f6c          DSSymbol
-00005da0: 5265 7370 6f6e 7365 5661 6c75 6554 7970  ResponseValueTyp
-00005db0: 652e 5374 7269 6e67 5d3a 0d0a 2020 2020  e.String]:..    
-00005dc0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00005dd0: 656d 7020 3d20 7365 6c66 2e5f 6765 745f  emp = self._get_
-00005de0: 4461 7465 2876 616c 7565 7329 2069 6620  Date(values) if 
-00005df0: 6973 696e 7374 616e 6365 2876 616c 7565  isinstance(value
-00005e00: 732c 2073 7472 2920 616e 6420 7661 6c75  s, str) and valu
-00005e10: 6573 2e73 7461 7274 7377 6974 6828 272f  es.startswith('/
-00005e20: 4461 7465 2827 2920 656c 7365 2076 616c  Date(') else val
-00005e30: 7565 7320 0d0a 2020 2020 2020 2020 2020  ues ..          
-00005e40: 2020 2020 2020 2020 2076 616c 4469 6374           valDict
-00005e50: 5b22 5661 6c75 6522 5d2e 6170 7065 6e64  ["Value"].append
-00005e60: 2874 656d 7029 0d0a 2020 2020 2020 2020  (temp)..        
-00005e70: 2020 2020 2020 2065 6c69 6620 7661 6c54         elif valT
-00005e80: 7970 6520 3d3d 2044 5353 796d 626f 6c52  ype == DSSymbolR
-00005e90: 6573 706f 6e73 6556 616c 7565 5479 7065  esponseValueType
-00005ea0: 2e45 7272 6f72 3a0d 0a20 2020 2020 2020  .Error:..       
-00005eb0: 2020 2020 2020 2020 2020 2020 2020 2345                #E
-00005ec0: 7272 6f72 2052 6574 7572 6e65 640d 0a20  rror Returned.. 
-00005ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ee0: 2020 2020 7661 6c44 6963 745b 2256 616c      valDict["Val
-00005ef0: 7565 225d 2e61 7070 656e 6428 7661 6c75  ue"].append(valu
-00005f00: 6573 290d 0a0d 0a20 2020 2020 2020 2069  es)....        i
-00005f10: 6620 6d75 6c74 6949 6e64 6578 3a0d 0a20  f multiIndex:.. 
-00005f20: 2020 2020 2020 2020 2020 2069 6620 6375             if cu
-00005f30: 7272 656e 6379 3a0d 0a20 2020 2020 2020  rrency:..       
-00005f40: 2020 2020 2020 2020 2020 6466 2e63 6f6c            df.col
-00005f50: 756d 6e73 203d 2070 642e 4d75 6c74 6949  umns = pd.MultiI
-00005f60: 6e64 6578 2e66 726f 6d5f 7475 706c 6573  ndex.from_tuples
-00005f70: 2864 662e 636f 6c75 6d6e 732c 206e 616d  (df.columns, nam
-00005f80: 6573 3d5b 2749 6e73 7472 756d 656e 7427  es=['Instrument'
-00005f90: 2c27 4669 656c 6427 2c27 4375 7272 656e  ,'Field','Curren
-00005fa0: 6379 275d 290d 0a20 2020 2020 2020 2020  cy'])..         
-00005fb0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00005fc0: 2020 2020 2020 2020 2020 2064 662e 636f             df.co
-00005fd0: 6c75 6d6e 7320 3d20 7064 2e4d 756c 7469  lumns = pd.Multi
-00005fe0: 496e 6465 782e 6672 6f6d 5f74 7570 6c65  Index.from_tuple
-00005ff0: 7328 6466 2e63 6f6c 756d 6e73 2c20 6e61  s(df.columns, na
-00006000: 6d65 733d 5b27 496e 7374 7275 6d65 6e74  mes=['Instrument
-00006010: 272c 2746 6965 6c64 275d 290d 0a20 2020  ','Field'])..   
-00006020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006030: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-00006040: 206d 756c 7469 496e 6465 783a 0d0a 2020   multiIndex:..  
-00006050: 2020 2020 2020 2020 2020 696e 6465 784c            indexL
-00006060: 656e 203d 2072 616e 6765 286c 656e 2876  en = range(len(v
-00006070: 616c 4469 6374 5b27 496e 7374 7275 6d65  alDict['Instrume
-00006080: 6e74 275d 2929 0d0a 2020 2020 2020 2020  nt']))..        
-00006090: 2020 2020 6966 2076 616c 4469 6374 5b27      if valDict['
-000060a0: 4375 7272 656e 6379 275d 3a0d 0a20 2020  Currency']:..   
-000060b0: 2020 2020 2020 2020 2020 2020 206e 6577               new
-000060c0: 6466 203d 2070 642e 4461 7461 4672 616d  df = pd.DataFram
-000060d0: 6528 6461 7461 3d76 616c 4469 6374 2c63  e(data=valDict,c
-000060e0: 6f6c 756d 6e73 3d5b 2249 6e73 7472 756d  olumns=["Instrum
-000060f0: 656e 7422 2c20 2244 6174 6174 7970 6522  ent", "Datatype"
-00006100: 2c20 2256 616c 7565 222c 2022 4375 7272  , "Value", "Curr
-00006110: 656e 6379 225d 2c0d 0a20 2020 2020 2020  ency"],..       
-00006120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006130: 2020 2020 2020 2020 2020 696e 6465 783d            index=
-00006140: 696e 6465 784c 656e 290d 0a20 2020 2020  indexLen)..     
-00006150: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00006160: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-00006170: 7764 6620 3d20 7064 2e44 6174 6146 7261  wdf = pd.DataFra
-00006180: 6d65 2864 6174 613d 7661 6c44 6963 742c  me(data=valDict,
-00006190: 636f 6c75 6d6e 733d 5b22 496e 7374 7275  columns=["Instru
-000061a0: 6d65 6e74 222c 2022 4461 7461 7479 7065  ment", "Datatype
-000061b0: 222c 2022 5661 6c75 6522 5d2c 0d0a 2020  ", "Value"],..  
-000061c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000061d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000061e0: 6e64 6578 3d69 6e64 6578 4c65 6e29 0d0a  ndex=indexLen)..
-000061f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00006200: 726e 206e 6577 6466 0d0a 2020 2020 2020  rn newdf..      
-00006210: 2020 7265 7475 726e 2064 6620 0d0a 2020    return df ..  
-00006220: 2020 2020 2020 2020 2020 0d0a 2020 2020            ..    
-00006230: 6465 6620 5f66 6f72 6d61 745f 5265 7370  def _format_Resp
-00006240: 6f6e 7365 2873 656c 662c 2072 6573 706f  onse(self, respo
-00006250: 6e73 655f 6a73 6f6e 293a 0d0a 2020 2020  nse_json):..    
-00006260: 2020 2020 2320 4966 2064 6174 6573 2069      # If dates i
-00006270: 7320 6e6f 7420 6176 6169 6c61 626c 652c  s not available,
-00006280: 2074 6865 2072 6571 7565 7374 2069 7320   the request is 
-00006290: 6e6f 7420 636f 6e73 7472 7563 7465 6420  not constructed 
-000062a0: 636f 7272 6563 746c 790d 0a20 2020 2020  correctly..     
-000062b0: 2020 2072 6573 706f 6e73 655f 6a73 6f6e     response_json
-000062c0: 203d 2064 6963 7428 7265 7370 6f6e 7365   = dict(response
-000062d0: 5f6a 736f 6e29 0d0a 2020 2020 2020 2020  _json)..        
-000062e0: 6966 2027 4461 7465 7327 2069 6e20 7265  if 'Dates' in re
-000062f0: 7370 6f6e 7365 5f6a 736f 6e3a 0d0a 2020  sponse_json:..  
-00006300: 2020 2020 2020 2020 2020 6461 7465 735f            dates_
-00006310: 636f 6e76 6572 7465 6420 3d20 5b5d 0d0a  converted = []..
-00006320: 2020 2020 2020 2020 2020 2020 6966 2072              if r
-00006330: 6573 706f 6e73 655f 6a73 6f6e 5b27 4461  esponse_json['Da
-00006340: 7465 7327 5d20 213d 204e 6f6e 653a 0d0a  tes'] != None:..
-00006350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006360: 6461 7465 7320 3d20 7265 7370 6f6e 7365  dates = response
-00006370: 5f6a 736f 6e5b 2744 6174 6573 275d 0d0a  _json['Dates']..
-00006380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006390: 666f 7220 6420 696e 2064 6174 6573 3a0d  for d in dates:.
-000063a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000063b0: 2020 2020 2064 6174 6573 5f63 6f6e 7665       dates_conve
-000063c0: 7274 6564 2e61 7070 656e 6428 7365 6c66  rted.append(self
-000063d0: 2e5f 6765 745f 4461 7465 2864 2929 0d0a  ._get_Date(d))..
-000063e0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-000063f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00006400: 6e20 2745 7272 6f72 202d 2070 6c65 6173  n 'Error - pleas
-00006410: 6520 6368 6563 6b20 696e 7374 7275 6d65  e check instrume
-00006420: 6e74 7320 616e 6420 7061 7261 6d65 7465  nts and paramete
-00006430: 7273 2028 7469 6d65 2073 6572 6965 7320  rs (time series 
-00006440: 6f72 2073 7461 7469 6329 270d 0a20 2020  or static)'..   
-00006450: 2020 2020 200d 0a20 2020 2020 2020 2023       ..        #
-00006460: 204c 6f6f 7020 7468 726f 7567 6820 7468   Loop through th
-00006470: 6520 7661 6c75 6573 2069 6e20 7468 6520  e values in the 
-00006480: 7265 7370 6f6e 7365 0d0a 2020 2020 2020  response..      
-00006490: 2020 6461 7461 6672 616d 6520 3d20 7365    dataframe = se
-000064a0: 6c66 2e5f 6765 745f 4461 7461 7479 7065  lf._get_Datatype
-000064b0: 5661 6c75 6573 2872 6573 706f 6e73 655f  Values(response_
-000064c0: 6a73 6f6e 290d 0a20 2020 2020 2020 2069  json)..        i
-000064d0: 6620 286c 656e 2864 6174 6573 5f63 6f6e  f (len(dates_con
-000064e0: 7665 7274 6564 2920 3d3d 206c 656e 2864  verted) == len(d
-000064f0: 6174 6166 7261 6d65 2e69 6e64 6578 2929  ataframe.index))
-00006500: 3a0d 0a20 2020 2020 2020 2020 2020 2064  :..            d
-00006510: 6174 6166 7261 6d65 2e69 6e64 6578 2e6e  ataframe.index.n
-00006520: 616d 6520 3d20 2744 6174 6573 270d 0a20  ame = 'Dates'.. 
-00006530: 2020 2020 2020 2020 2020 2064 6174 6166             dataf
-00006540: 7261 6d65 2e69 6e64 6578 203d 2064 6174  rame.index = dat
-00006550: 6573 5f63 6f6e 7665 7274 6564 0d0a 2020  es_converted..  
-00006560: 2020 2020 2020 656c 6966 2028 6c65 6e28        elif (len(
-00006570: 6461 7465 735f 636f 6e76 6572 7465 6429  dates_converted)
-00006580: 203d 3d20 3129 3a0d 0a20 2020 2020 2020   == 1):..       
-00006590: 2020 2020 2064 6174 6166 7261 6d65 5b27       dataframe['
-000065a0: 4461 7465 7327 5d20 3d20 6461 7465 735f  Dates'] = dates_
-000065b0: 636f 6e76 6572 7465 645b 305d 0d0a 2020  converted[0]..  
-000065c0: 2020 2020 2020 2020 2020 6966 2028 6c65            if (le
-000065d0: 6e28 6461 7461 6672 616d 652e 696e 6465  n(dataframe.inde
-000065e0: 7829 203e 206c 656e 2864 6174 6573 5f63  x) > len(dates_c
-000065f0: 6f6e 7665 7274 6564 2929 3a0d 0a20 2020  onverted)):..   
-00006600: 2020 2020 2020 2020 2020 2020 2064 6174               dat
-00006610: 6166 7261 6d65 2e69 6e64 6578 203d 2064  aframe.index = d
-00006620: 6174 6166 7261 6d65 5b27 4461 7465 7327  ataframe['Dates'
-00006630: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-00006640: 2020 2064 6174 6166 7261 6d65 203d 2064     dataframe = d
-00006650: 6174 6166 7261 6d65 2e64 726f 7028 636f  ataframe.drop(co
-00006660: 6c75 6d6e 733d 2744 6174 6573 272c 2061  lumns='Dates', a
-00006670: 7869 7320 3d20 3129 0d0a 2020 2020 2020  xis = 1)..      
-00006680: 2020 0d0a 2020 2020 2020 2020 0d0a 2020    ..        ..  
-00006690: 2020 2020 2020 2020 2020 0d0a 2020 2020            ..    
-000066a0: 2020 2020 2320 2020 2069 6620 286c 656e      #    if (len
-000066b0: 2864 6174 6573 5f63 6f6e 7665 7274 6564  (dates_converted
-000066c0: 2920 3e20 3129 3a0d 0a20 2020 2020 2020  ) > 1):..       
-000066d0: 2023 2020 2020 2020 2020 2364 6174 6166   #        #dataf
-000066e0: 7261 6d65 2e69 6e73 6572 7428 6c6f 6320  rame.insert(loc 
-000066f0: 3d20 302c 2063 6f6c 756d 6e20 3d20 2744  = 0, column = 'D
-00006700: 6174 6573 272c 2076 616c 7565 203d 2064  ates', value = d
-00006710: 6174 6573 5f63 6f6e 7665 7274 6564 290d  ates_converted).
-00006720: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00006730: 2020 6461 7461 6672 616d 652e 696e 6465    dataframe.inde
-00006740: 7820 3d20 6461 7465 735f 636f 6e76 6572  x = dates_conver
-00006750: 7465 640d 0a20 2020 2020 2020 2023 2020  ted..        #  
-00006760: 2020 2020 2020 6461 7461 6672 616d 652e        dataframe.
-00006770: 696e 6465 782e 6e61 6d65 203d 2027 4461  index.name = 'Da
-00006780: 7465 7327 0d0a 2020 2020 2020 2020 2365  tes'..        #e
-00006790: 6c69 6620 286c 656e 2864 6174 6573 5f63  lif (len(dates_c
-000067a0: 6f6e 7665 7274 6564 2920 3d3d 2031 293a  onverted) == 1):
-000067b0: 0d0a 2020 2020 2020 2020 2320 2020 2064  ..        #    d
-000067c0: 6174 6166 7261 6d65 5b27 4461 7465 7327  ataframe['Dates'
-000067d0: 5d20 3d20 6461 7465 735f 636f 6e76 6572  ] = dates_conver
-000067e0: 7465 645b 305d 0d0a 2020 2020 2020 2020  ted[0]..        
-000067f0: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00006800: 2064 6174 6166 7261 6d65 0d0a 0d0a 2020   dataframe....  
-00006810: 2020 6465 6620 5f66 6f72 6d61 745f 6275    def _format_bu
-00006820: 6e64 6c65 5f72 6573 706f 6e73 6528 7365  ndle_response(se
-00006830: 6c66 2c72 6573 706f 6e73 655f 6a73 6f6e  lf,response_json
-00006840: 293a 0d0a 2020 2020 2020 2020 666f 726d  ):..        form
-00006850: 6174 7465 6452 6573 7020 3d20 5b5d 0d0a  attedResp = []..
-00006860: 2020 2020 2020 2020 666f 7220 6561 6368          for each
-00006870: 4461 7461 5265 7370 6f6e 7365 2069 6e20  DataResponse in 
-00006880: 7265 7370 6f6e 7365 5f6a 736f 6e5b 2744  response_json['D
-00006890: 6174 6152 6573 706f 6e73 6573 275d 3a0d  ataResponses']:.
-000068a0: 0a20 2020 2020 2020 2020 2020 2064 6620  .            df 
-000068b0: 3d20 7365 6c66 2e5f 666f 726d 6174 5f52  = self._format_R
-000068c0: 6573 706f 6e73 6528 6561 6368 4461 7461  esponse(eachData
-000068d0: 5265 7370 6f6e 7365 290d 0a20 2020 2020  Response)..     
-000068e0: 2020 2020 2020 2066 6f72 6d61 7474 6564         formatted
-000068f0: 5265 7370 2e61 7070 656e 6428 6466 2920  Resp.append(df) 
-00006900: 2020 2020 200d 0a20 2020 2020 2020 2020       ..         
-00006910: 2020 0d0a 2020 2020 2020 2020 7265 7475    ..        retu
-00006920: 726e 2066 6f72 6d61 7474 6564 5265 7370  rn formattedResp
-00006930: 0d0a 2020 200d 0a20 2020 2020 2020 0d0a  ..   ..       ..
-00006940: 2020 2020 6465 6620 5f67 6574 5f6d 6574      def _get_met
-00006950: 6164 6174 6128 7365 6c66 2c20 6a73 6f6e  adata(self, json
-00006960: 5265 7370 293a 0d0a 2020 2020 2020 2020  Resp):..        
-00006970: 6e61 6d65 7320 3d20 7b7d 0d0a 2020 2020  names = {}..    
-00006980: 2020 2020 6966 206a 736f 6e52 6573 705b      if jsonResp[
-00006990: 2753 796d 626f 6c4e 616d 6573 275d 3a0d  'SymbolNames']:.
-000069a0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-000069b0: 2069 2069 6e20 6a73 6f6e 5265 7370 5b27   i in jsonResp['
-000069c0: 5379 6d62 6f6c 4e61 6d65 7327 5d3a 0d0a  SymbolNames']:..
-000069d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000069e0: 6e61 6d65 732e 7570 6461 7465 287b 695b  names.update({i[
-000069f0: 274b 6579 275d 3a20 695b 2756 616c 7565  'Key']: i['Value
-00006a00: 275d 7d29 0d0a 2020 2020 2020 2020 2020  ']})..          
-00006a10: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
-00006a20: 6966 206a 736f 6e52 6573 705b 2744 6174  if jsonResp['Dat
-00006a30: 6154 7970 654e 616d 6573 275d 3a0d 0a20  aTypeNames']:.. 
-00006a40: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-00006a50: 2069 6e20 6a73 6f6e 5265 7370 5b27 4461   in jsonResp['Da
-00006a60: 7461 5479 7065 4e61 6d65 7327 5d3a 0d0a  taTypeNames']:..
-00006a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006a80: 6e61 6d65 732e 7570 6461 7465 287b 695b  names.update({i[
-00006a90: 274b 6579 275d 3a20 695b 2756 616c 7565  'Key']: i['Value
-00006aa0: 275d 7d29 0d0a 2020 2020 2020 2020 7072  ']})..        pr
-00006ab0: 696e 7428 6e61 6d65 7329 0d0a 2020 2020  int(names)..    
-00006ac0: 2020 2020 0d0a 0d0a 2020 2020 6465 6620      ....    def 
-00006ad0: 5f67 6574 5f6d 6574 6164 6174 615f 6275  _get_metadata_bu
-00006ae0: 6e64 6c65 2873 656c 662c 206a 736f 6e52  ndle(self, jsonR
-00006af0: 6573 7029 3a0d 0a20 2020 2020 2020 2066  esp):..        f
-00006b00: 6f72 2065 6163 6844 6174 6152 6573 706f  or eachDataRespo
-00006b10: 6e73 6520 696e 206a 736f 6e52 6573 703a  nse in jsonResp:
-00006b20: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00006b30: 6c66 2e5f 6765 745f 6d65 7461 6461 7461  lf._get_metadata
-00006b40: 2865 6163 6844 6174 6152 6573 706f 6e73  (eachDataRespons
-00006b50: 6529 0d0a 232d 2d2d 2d2d 2d2d 2d2d 2d2d  e)..#-----------
-00006b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005d10: 2020 2020 2020 2020 2020 2020 2020 2044                 D
+00005d20: 5353 796d 626f 6c52 6573 706f 6e73 6556  SSymbolResponseV
+00005d30: 616c 7565 5479 7065 2e44 6174 6554 696d  alueType.DateTim
+00005d40: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00005d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005d60: 2020 2020 4453 5379 6d62 6f6c 5265 7370      DSSymbolResp
+00005d70: 6f6e 7365 5661 6c75 6554 7970 652e 446f  onseValueType.Do
+00005d80: 7562 6c65 2c0d 0a20 2020 2020 2020 2020  uble,..         
+00005d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005da0: 2020 2020 2020 2044 5353 796d 626f 6c52         DSSymbolR
+00005db0: 6573 706f 6e73 6556 616c 7565 5479 7065  esponseValueType
+00005dc0: 2e53 7472 696e 675d 3a0d 0a20 2020 2020  .String]:..     
+00005dd0: 2020 2020 2020 2020 2020 2020 2020 7465                te
+00005de0: 6d70 203d 2073 656c 662e 5f67 6574 5f44  mp = self._get_D
+00005df0: 6174 6528 7661 6c75 6573 2920 6966 2069  ate(values) if i
+00005e00: 7369 6e73 7461 6e63 6528 7661 6c75 6573  sinstance(values
+00005e10: 2c20 7374 7229 2061 6e64 2076 616c 7565  , str) and value
+00005e20: 732e 7374 6172 7473 7769 7468 2827 2f44  s.startswith('/D
+00005e30: 6174 6528 2729 2065 6c73 6520 7661 6c75  ate(') else valu
+00005e40: 6573 200d 0a20 2020 2020 2020 2020 2020  es ..           
+00005e50: 2020 2020 2020 2020 7661 6c44 6963 745b          valDict[
+00005e60: 2256 616c 7565 225d 2e61 7070 656e 6428  "Value"].append(
+00005e70: 7465 6d70 290d 0a20 2020 2020 2020 2020  temp)..         
+00005e80: 2020 2020 2020 656c 6966 2076 616c 5479        elif valTy
+00005e90: 7065 203d 3d20 4453 5379 6d62 6f6c 5265  pe == DSSymbolRe
+00005ea0: 7370 6f6e 7365 5661 6c75 6554 7970 652e  sponseValueType.
+00005eb0: 4572 726f 723a 0d0a 2020 2020 2020 2020  Error:..        
+00005ec0: 2020 2020 2020 2020 2020 2020 2023 4572               #Er
+00005ed0: 726f 7220 5265 7475 726e 6564 0d0a 2020  ror Returned..  
+00005ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005ef0: 2020 2076 616c 4469 6374 5b22 5661 6c75     valDict["Valu
+00005f00: 6522 5d2e 6170 7065 6e64 2876 616c 7565  e"].append(value
+00005f10: 7329 0d0a 0d0a 2020 2020 2020 2020 6966  s)....        if
+00005f20: 206d 756c 7469 496e 6465 783a 0d0a 2020   multiIndex:..  
+00005f30: 2020 2020 2020 2020 2020 6966 2063 7572            if cur
+00005f40: 7265 6e63 793a 0d0a 2020 2020 2020 2020  rency:..        
+00005f50: 2020 2020 2020 2020 2064 662e 636f 6c75           df.colu
+00005f60: 6d6e 7320 3d20 7064 2e4d 756c 7469 496e  mns = pd.MultiIn
+00005f70: 6465 782e 6672 6f6d 5f74 7570 6c65 7328  dex.from_tuples(
+00005f80: 6466 2e63 6f6c 756d 6e73 2c20 6e61 6d65  df.columns, name
+00005f90: 733d 5b27 496e 7374 7275 6d65 6e74 272c  s=['Instrument',
+00005fa0: 2746 6965 6c64 272c 2743 7572 7265 6e63  'Field','Currenc
+00005fb0: 7927 5d29 0d0a 2020 2020 2020 2020 2020  y'])..          
+00005fc0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00005fd0: 2020 2020 2020 2020 2020 6466 2e63 6f6c            df.col
+00005fe0: 756d 6e73 203d 2070 642e 4d75 6c74 6949  umns = pd.MultiI
+00005ff0: 6e64 6578 2e66 726f 6d5f 7475 706c 6573  ndex.from_tuples
+00006000: 2864 662e 636f 6c75 6d6e 732c 206e 616d  (df.columns, nam
+00006010: 6573 3d5b 2749 6e73 7472 756d 656e 7427  es=['Instrument'
+00006020: 2c27 4669 656c 6427 5d29 0d0a 2020 2020  ,'Field'])..    
+00006030: 2020 2020 2020 2020 2020 2020 2020 200d                 .
+00006040: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00006050: 6d75 6c74 6949 6e64 6578 3a0d 0a20 2020  multiIndex:..   
+00006060: 2020 2020 2020 2020 2069 6e64 6578 4c65           indexLe
+00006070: 6e20 3d20 7261 6e67 6528 6c65 6e28 7661  n = range(len(va
+00006080: 6c44 6963 745b 2749 6e73 7472 756d 656e  lDict['Instrumen
+00006090: 7427 5d29 290d 0a20 2020 2020 2020 2020  t']))..         
+000060a0: 2020 2069 6620 7661 6c44 6963 745b 2743     if valDict['C
+000060b0: 7572 7265 6e63 7927 5d3a 0d0a 2020 2020  urrency']:..    
+000060c0: 2020 2020 2020 2020 2020 2020 6e65 7764              newd
+000060d0: 6620 3d20 7064 2e44 6174 6146 7261 6d65  f = pd.DataFrame
+000060e0: 2864 6174 613d 7661 6c44 6963 742c 636f  (data=valDict,co
+000060f0: 6c75 6d6e 733d 5b22 496e 7374 7275 6d65  lumns=["Instrume
+00006100: 6e74 222c 2022 4461 7461 7479 7065 222c  nt", "Datatype",
+00006110: 2022 5661 6c75 6522 2c20 2243 7572 7265   "Value", "Curre
+00006120: 6e63 7922 5d2c 0d0a 2020 2020 2020 2020  ncy"],..        
+00006130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006140: 2020 2020 2020 2020 2069 6e64 6578 3d69           index=i
+00006150: 6e64 6578 4c65 6e29 0d0a 2020 2020 2020  ndexLen)..      
+00006160: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00006170: 2020 2020 2020 2020 2020 2020 206e 6577               new
+00006180: 6466 203d 2070 642e 4461 7461 4672 616d  df = pd.DataFram
+00006190: 6528 6461 7461 3d76 616c 4469 6374 2c63  e(data=valDict,c
+000061a0: 6f6c 756d 6e73 3d5b 2249 6e73 7472 756d  olumns=["Instrum
+000061b0: 656e 7422 2c20 2244 6174 6174 7970 6522  ent", "Datatype"
+000061c0: 2c20 2256 616c 7565 225d 2c0d 0a20 2020  , "Value"],..   
+000061d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000061e0: 2020 2020 2020 2020 2020 2020 2020 696e                in
+000061f0: 6465 783d 696e 6465 784c 656e 290d 0a20  dex=indexLen).. 
+00006200: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00006210: 6e20 6e65 7764 660d 0a20 2020 2020 2020  n newdf..       
+00006220: 2072 6574 7572 6e20 6466 200d 0a20 2020   return df ..   
+00006230: 2020 2020 2020 2020 200d 0a20 2020 2064           ..    d
+00006240: 6566 205f 666f 726d 6174 5f52 6573 706f  ef _format_Respo
+00006250: 6e73 6528 7365 6c66 2c20 7265 7370 6f6e  nse(self, respon
+00006260: 7365 5f6a 736f 6e29 3a0d 0a20 2020 2020  se_json):..     
+00006270: 2020 2023 2049 6620 6461 7465 7320 6973     # If dates is
+00006280: 206e 6f74 2061 7661 696c 6162 6c65 2c20   not available, 
+00006290: 7468 6520 7265 7175 6573 7420 6973 206e  the request is n
+000062a0: 6f74 2063 6f6e 7374 7275 6374 6564 2063  ot constructed c
+000062b0: 6f72 7265 6374 6c79 0d0a 2020 2020 2020  orrectly..      
+000062c0: 2020 7265 7370 6f6e 7365 5f6a 736f 6e20    response_json 
+000062d0: 3d20 6469 6374 2872 6573 706f 6e73 655f  = dict(response_
+000062e0: 6a73 6f6e 290d 0a20 2020 2020 2020 2069  json)..        i
+000062f0: 6620 2744 6174 6573 2720 696e 2072 6573  f 'Dates' in res
+00006300: 706f 6e73 655f 6a73 6f6e 3a0d 0a20 2020  ponse_json:..   
+00006310: 2020 2020 2020 2020 2064 6174 6573 5f63           dates_c
+00006320: 6f6e 7665 7274 6564 203d 205b 5d0d 0a20  onverted = [].. 
+00006330: 2020 2020 2020 2020 2020 2069 6620 7265             if re
+00006340: 7370 6f6e 7365 5f6a 736f 6e5b 2744 6174  sponse_json['Dat
+00006350: 6573 275d 2021 3d20 4e6f 6e65 3a0d 0a20  es'] != None:.. 
+00006360: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00006370: 6174 6573 203d 2072 6573 706f 6e73 655f  ates = response_
+00006380: 6a73 6f6e 5b27 4461 7465 7327 5d0d 0a20  json['Dates'].. 
+00006390: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000063a0: 6f72 2064 2069 6e20 6461 7465 733a 0d0a  or d in dates:..
+000063b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000063c0: 2020 2020 6461 7465 735f 636f 6e76 6572      dates_conver
+000063d0: 7465 642e 6170 7065 6e64 2873 656c 662e  ted.append(self.
+000063e0: 5f67 6574 5f44 6174 6528 6429 290d 0a20  _get_Date(d)).. 
+000063f0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00006400: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00006410: 2027 4572 726f 7220 2d20 706c 6561 7365   'Error - please
+00006420: 2063 6865 636b 2069 6e73 7472 756d 656e   check instrumen
+00006430: 7473 2061 6e64 2070 6172 616d 6574 6572  ts and parameter
+00006440: 7320 2874 696d 6520 7365 7269 6573 206f  s (time series o
+00006450: 7220 7374 6174 6963 2927 0d0a 2020 2020  r static)'..    
+00006460: 2020 2020 0d0a 2020 2020 2020 2020 2320      ..        # 
+00006470: 4c6f 6f70 2074 6872 6f75 6768 2074 6865  Loop through the
+00006480: 2076 616c 7565 7320 696e 2074 6865 2072   values in the r
+00006490: 6573 706f 6e73 650d 0a20 2020 2020 2020  esponse..       
+000064a0: 2064 6174 6166 7261 6d65 203d 2073 656c   dataframe = sel
+000064b0: 662e 5f67 6574 5f44 6174 6174 7970 6556  f._get_DatatypeV
+000064c0: 616c 7565 7328 7265 7370 6f6e 7365 5f6a  alues(response_j
+000064d0: 736f 6e29 0d0a 2020 2020 2020 2020 6966  son)..        if
+000064e0: 2028 6c65 6e28 6461 7465 735f 636f 6e76   (len(dates_conv
+000064f0: 6572 7465 6429 203d 3d20 6c65 6e28 6461  erted) == len(da
+00006500: 7461 6672 616d 652e 696e 6465 7829 293a  taframe.index)):
+00006510: 0d0a 2020 2020 2020 2020 2020 2020 6461  ..            da
+00006520: 7461 6672 616d 652e 696e 6465 782e 6e61  taframe.index.na
+00006530: 6d65 203d 2027 4461 7465 7327 0d0a 2020  me = 'Dates'..  
+00006540: 2020 2020 2020 2020 2020 6461 7461 6672            datafr
+00006550: 616d 652e 696e 6465 7820 3d20 6461 7465  ame.index = date
+00006560: 735f 636f 6e76 6572 7465 640d 0a20 2020  s_converted..   
+00006570: 2020 2020 2065 6c69 6620 286c 656e 2864       elif (len(d
+00006580: 6174 6573 5f63 6f6e 7665 7274 6564 2920  ates_converted) 
+00006590: 3d3d 2031 293a 0d0a 2020 2020 2020 2020  == 1):..        
+000065a0: 2020 2020 6461 7461 6672 616d 655b 2744      dataframe['D
+000065b0: 6174 6573 275d 203d 2064 6174 6573 5f63  ates'] = dates_c
+000065c0: 6f6e 7665 7274 6564 5b30 5d0d 0a20 2020  onverted[0]..   
+000065d0: 2020 2020 2020 2020 2069 6620 286c 656e           if (len
+000065e0: 2864 6174 6166 7261 6d65 2e69 6e64 6578  (dataframe.index
+000065f0: 2920 3e20 6c65 6e28 6461 7465 735f 636f  ) > len(dates_co
+00006600: 6e76 6572 7465 6429 293a 0d0a 2020 2020  nverted)):..    
+00006610: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00006620: 6672 616d 652e 696e 6465 7820 3d20 6461  frame.index = da
+00006630: 7461 6672 616d 655b 2744 6174 6573 275d  taframe['Dates']
+00006640: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006650: 2020 6461 7461 6672 616d 6520 3d20 6461    dataframe = da
+00006660: 7461 6672 616d 652e 6472 6f70 2863 6f6c  taframe.drop(col
+00006670: 756d 6e73 3d27 4461 7465 7327 2c20 6178  umns='Dates', ax
+00006680: 6973 203d 2031 290d 0a20 2020 2020 2020  is = 1)..       
+00006690: 200d 0a20 2020 2020 2020 200d 0a20 2020   ..        ..   
+000066a0: 2020 2020 2020 2020 200d 0a20 2020 2020           ..     
+000066b0: 2020 2023 2020 2020 6966 2028 6c65 6e28     #    if (len(
+000066c0: 6461 7465 735f 636f 6e76 6572 7465 6429  dates_converted)
+000066d0: 203e 2031 293a 0d0a 2020 2020 2020 2020   > 1):..        
+000066e0: 2320 2020 2020 2020 2023 6461 7461 6672  #        #datafr
+000066f0: 616d 652e 696e 7365 7274 286c 6f63 203d  ame.insert(loc =
+00006700: 2030 2c20 636f 6c75 6d6e 203d 2027 4461   0, column = 'Da
+00006710: 7465 7327 2c20 7661 6c75 6520 3d20 6461  tes', value = da
+00006720: 7465 735f 636f 6e76 6572 7465 6429 0d0a  tes_converted)..
+00006730: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00006740: 2064 6174 6166 7261 6d65 2e69 6e64 6578   dataframe.index
+00006750: 203d 2064 6174 6573 5f63 6f6e 7665 7274   = dates_convert
+00006760: 6564 0d0a 2020 2020 2020 2020 2320 2020  ed..        #   
+00006770: 2020 2020 2064 6174 6166 7261 6d65 2e69       dataframe.i
+00006780: 6e64 6578 2e6e 616d 6520 3d20 2744 6174  ndex.name = 'Dat
+00006790: 6573 270d 0a20 2020 2020 2020 2023 656c  es'..        #el
+000067a0: 6966 2028 6c65 6e28 6461 7465 735f 636f  if (len(dates_co
+000067b0: 6e76 6572 7465 6429 203d 3d20 3129 3a0d  nverted) == 1):.
+000067c0: 0a20 2020 2020 2020 2023 2020 2020 6461  .        #    da
+000067d0: 7461 6672 616d 655b 2744 6174 6573 275d  taframe['Dates']
+000067e0: 203d 2064 6174 6573 5f63 6f6e 7665 7274   = dates_convert
+000067f0: 6564 5b30 5d0d 0a20 2020 2020 2020 200d  ed[0]..        .
+00006800: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00006810: 6461 7461 6672 616d 650d 0a0d 0a20 2020  dataframe....   
+00006820: 2064 6566 205f 666f 726d 6174 5f62 756e   def _format_bun
+00006830: 646c 655f 7265 7370 6f6e 7365 2873 656c  dle_response(sel
+00006840: 662c 7265 7370 6f6e 7365 5f6a 736f 6e29  f,response_json)
+00006850: 3a0d 0a20 2020 2020 2020 2066 6f72 6d61  :..        forma
+00006860: 7474 6564 5265 7370 203d 205b 5d0d 0a20  ttedResp = [].. 
+00006870: 2020 2020 2020 2066 6f72 2065 6163 6844         for eachD
+00006880: 6174 6152 6573 706f 6e73 6520 696e 2072  ataResponse in r
+00006890: 6573 706f 6e73 655f 6a73 6f6e 5b27 4461  esponse_json['Da
+000068a0: 7461 5265 7370 6f6e 7365 7327 5d3a 0d0a  taResponses']:..
+000068b0: 2020 2020 2020 2020 2020 2020 6466 203d              df =
+000068c0: 2073 656c 662e 5f66 6f72 6d61 745f 5265   self._format_Re
+000068d0: 7370 6f6e 7365 2865 6163 6844 6174 6152  sponse(eachDataR
+000068e0: 6573 706f 6e73 6529 0d0a 2020 2020 2020  esponse)..      
+000068f0: 2020 2020 2020 666f 726d 6174 7465 6452        formattedR
+00006900: 6573 702e 6170 7065 6e64 2864 6629 2020  esp.append(df)  
+00006910: 2020 2020 0d0a 2020 2020 2020 2020 2020      ..          
+00006920: 200d 0a20 2020 2020 2020 2072 6574 7572   ..        retur
+00006930: 6e20 666f 726d 6174 7465 6452 6573 700d  n formattedResp.
+00006940: 0a20 2020 0d0a 2020 2020 2020 200d 0a20  .   ..       .. 
+00006950: 2020 2064 6566 205f 6765 745f 6d65 7461     def _get_meta
+00006960: 6461 7461 2873 656c 662c 206a 736f 6e52  data(self, jsonR
+00006970: 6573 7029 3a0d 0a20 2020 2020 2020 206e  esp):..        n
+00006980: 616d 6573 203d 207b 7d0d 0a20 2020 2020  ames = {}..     
+00006990: 2020 2069 6620 6a73 6f6e 5265 7370 5b27     if jsonResp['
+000069a0: 5379 6d62 6f6c 4e61 6d65 7327 5d3a 0d0a  SymbolNames']:..
+000069b0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000069c0: 6920 696e 206a 736f 6e52 6573 705b 2753  i in jsonResp['S
+000069d0: 796d 626f 6c4e 616d 6573 275d 3a0d 0a20  ymbolNames']:.. 
+000069e0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+000069f0: 616d 6573 2e75 7064 6174 6528 7b69 5b27  ames.update({i['
+00006a00: 4b65 7927 5d3a 2069 5b27 5661 6c75 6527  Key']: i['Value'
+00006a10: 5d7d 290d 0a20 2020 2020 2020 2020 2020  ]})..           
+00006a20: 2020 2020 200d 0a20 2020 2020 2020 2069       ..        i
+00006a30: 6620 6a73 6f6e 5265 7370 5b27 4461 7461  f jsonResp['Data
+00006a40: 5479 7065 4e61 6d65 7327 5d3a 0d0a 2020  TypeNames']:..  
+00006a50: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+00006a60: 696e 206a 736f 6e52 6573 705b 2744 6174  in jsonResp['Dat
+00006a70: 6154 7970 654e 616d 6573 275d 3a0d 0a20  aTypeNames']:.. 
+00006a80: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00006a90: 616d 6573 2e75 7064 6174 6528 7b69 5b27  ames.update({i['
+00006aa0: 4b65 7927 5d3a 2069 5b27 5661 6c75 6527  Key']: i['Value'
+00006ab0: 5d7d 290d 0a20 2020 2020 2020 2070 7269  ]})..        pri
+00006ac0: 6e74 286e 616d 6573 290d 0a20 2020 2020  nt(names)..     
+00006ad0: 2020 200d 0a0d 0a20 2020 2064 6566 205f     ....    def _
+00006ae0: 6765 745f 6d65 7461 6461 7461 5f62 756e  get_metadata_bun
+00006af0: 646c 6528 7365 6c66 2c20 6a73 6f6e 5265  dle(self, jsonRe
+00006b00: 7370 293a 0d0a 2020 2020 2020 2020 666f  sp):..        fo
+00006b10: 7220 6561 6368 4461 7461 5265 7370 6f6e  r eachDataRespon
+00006b20: 7365 2069 6e20 6a73 6f6e 5265 7370 3a0d  se in jsonResp:.
+00006b30: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00006b40: 662e 5f67 6574 5f6d 6574 6164 6174 6128  f._get_metadata(
+00006b50: 6561 6368 4461 7461 5265 7370 6f6e 7365  eachDataResponse
+00006b60: 290d 0a23 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  )..#------------
 00006b70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006b80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 0d0a       ----------....
+00006ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006bb0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d 0a         ---------....
```

## Comparing `DatastreamPy-2.0.27.dist-info/METADATA` & `DatastreamPy-2.0.28.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: DatastreamPy
-Version: 2.0.27
+Version: 2.0.28
 Summary: Python package for Datastream Web Services API
 Author: LSEG
 Author-email: datastreamapi@lseg.com
 License: Apache Software License (http://www.apache.org/licenses/LICENSE-2.0)
 Requires-Python: >=3
 Description-Content-Type: text/markdown
 Requires-Dist: pandas
```

## Comparing `DatastreamPy-2.0.27.dist-info/RECORD` & `DatastreamPy-2.0.28.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 DatastreamPy/DSConnect.py,sha256=fyKii7eJU95M3Xsm-SB-2GgvJg_2_NHOVZ3sFmQ_0ik,16190
-DatastreamPy/DSUserDataObjectBase.py,sha256=UpebT7VQpckksHMHWegH-IGpoSmIrD0sndb-EgsCQq0,22949
+DatastreamPy/DSUserDataObjectBase.py,sha256=LnfYeqvQAqMBj_TCiYhGosxO9JZ4kt-ZafDJ76p4TGM,22949
 DatastreamPy/DS_Requests.py,sha256=uPFJe8C54guWFSZS8tvQNsn00hnUF7ipVNX8JtAAzxo,5633
-DatastreamPy/DS_Response.py,sha256=B0LyouL8mvm-r8D4jpmTs0RX-9swqCMelpusPVrt_kA,27566
+DatastreamPy/DS_Response.py,sha256=aYRV_3qwvdLcOF12OBeJvdPDaTZljvH73Nnvd-62_HY,27581
 DatastreamPy/DatastreamEconomicFilters.py,sha256=73gTd_naqDrTW6DH2QXQ2tc5C_uTEvwSZi8w-CpHPdY,60200
 DatastreamPy/DatastreamUserCreated_TimeSeries.py,sha256=nVgv0IhgMu5_FiSrA3lpcE3248gNasdWIl0-iMJ71zo,52895
 DatastreamPy/__init__.py,sha256=EoZTqqEHz9OQbUFrGYtT-80Nw8WV5BYGUgxsvKvIV2U,1041
-DatastreamPy-2.0.27.dist-info/METADATA,sha256=RDBUUcdwpBFg6SfiVXMviCoQqS37CUUnpkPKRR0xSUs,27395
-DatastreamPy-2.0.27.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
-DatastreamPy-2.0.27.dist-info/top_level.txt,sha256=B3hGJALzw6vwaMsJGwuxz537PgGsGd3KUkSh0OvQcAc,13
-DatastreamPy-2.0.27.dist-info/RECORD,,
+DatastreamPy-2.0.28.dist-info/METADATA,sha256=xC3DqOaiOANptalGHrGJ7rhfyjFNywF58nC045tXGhM,27395
+DatastreamPy-2.0.28.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
+DatastreamPy-2.0.28.dist-info/top_level.txt,sha256=B3hGJALzw6vwaMsJGwuxz537PgGsGd3KUkSh0OvQcAc,13
+DatastreamPy-2.0.28.dist-info/RECORD,,
```

